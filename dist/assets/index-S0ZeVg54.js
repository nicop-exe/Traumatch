function dA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function fA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $w={exports:{}},Xh={},Hw={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu=Symbol.for("react.element"),pA=Symbol.for("react.portal"),mA=Symbol.for("react.fragment"),gA=Symbol.for("react.strict_mode"),_A=Symbol.for("react.profiler"),yA=Symbol.for("react.provider"),vA=Symbol.for("react.context"),wA=Symbol.for("react.forward_ref"),TA=Symbol.for("react.suspense"),EA=Symbol.for("react.memo"),SA=Symbol.for("react.lazy"),Dy=Symbol.iterator;function IA(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kw=Object.assign,Qw={};function Ko(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yw(){}Yw.prototype=Ko.prototype;function Im(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}var Cm=Im.prototype=new Yw;Cm.constructor=Im;Kw(Cm,Ko.prototype);Cm.isPureReactComponent=!0;var Oy=Array.isArray,Xw=Object.prototype.hasOwnProperty,Am={current:null},Jw={key:!0,ref:!0,__self:!0,__source:!0};function Zw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xw.call(e,r)&&!Jw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:nu,type:t,key:i,ref:o,props:s,_owner:Am.current}}function CA(t,e){return{$$typeof:nu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function km(t){return typeof t=="object"&&t!==null&&t.$$typeof===nu}function AA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var My=/\/+/g;function rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AA(""+t.key):e.toString(36)}function gc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nu:case pA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+rf(o,0):r,Oy(s)?(n="",t!=null&&(n=t.replace(My,"$&/")+"/"),gc(s,e,n,"",function(c){return c})):s!=null&&(km(s)&&(s=CA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(My,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Oy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+rf(i,a);o+=gc(i,e,n,l,s)}else if(l=IA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+rf(i,a++),o+=gc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zu(t,e,n){if(t==null)return t;var r=[],s=0;return gc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},_c={transition:null},xA={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:_c,ReactCurrentOwner:Am};function eT(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:zu,forEach:function(t,e,n){zu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zu(t,function(){e++}),e},toArray:function(t){return zu(t,function(e){return e})||[]},only:function(t){if(!km(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Ko;ge.Fragment=mA;ge.Profiler=_A;ge.PureComponent=Im;ge.StrictMode=gA;ge.Suspense=TA;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xA;ge.act=eT;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Am.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xw.call(e,l)&&!Jw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nu,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:vA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yA,_context:t},t.Consumer=t};ge.createElement=Zw;ge.createFactory=function(t){var e=Zw.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:wA,render:t}};ge.isValidElement=km;ge.lazy=function(t){return{$$typeof:SA,_payload:{_status:-1,_result:t},_init:kA}};ge.memo=function(t,e){return{$$typeof:EA,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=_c.transition;_c.transition={};try{t()}finally{_c.transition=e}};ge.unstable_act=eT;ge.useCallback=function(t,e){return Ht.current.useCallback(t,e)};ge.useContext=function(t){return Ht.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Ht.current.useEffect(t,e)};ge.useId=function(){return Ht.current.useId()};ge.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Ht.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};ge.useRef=function(t){return Ht.current.useRef(t)};ge.useState=function(t){return Ht.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Ht.current.useTransition()};ge.version="18.3.1";Hw.exports=ge;var U=Hw.exports;const Jh=fA(U),RA=dA({__proto__:null,default:Jh},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=U,NA=Symbol.for("react.element"),bA=Symbol.for("react.fragment"),DA=Object.prototype.hasOwnProperty,OA=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MA={key:!0,ref:!0,__self:!0,__source:!0};function tT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DA.call(e,r)&&!MA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NA,type:t,key:i,ref:o,props:s,_owner:OA.current}}Xh.Fragment=bA;Xh.jsx=tT;Xh.jsxs=tT;$w.exports=Xh;var O=$w.exports,Hf={},nT={exports:{}},dn={},rT={exports:{}},sT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var q=F.length;F.push(B);e:for(;0<q;){var K=q-1>>>1,se=F[K];if(0<s(se,B))F[K]=B,F[q]=se,q=K;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var B=F[0],q=F.pop();if(q!==B){F[0]=q;e:for(var K=0,se=F.length,Ze=se>>>1;K<Ze;){var xe=2*(K+1)-1,ce=F[xe],_e=xe+1,Fe=F[_e];if(0>s(ce,q))_e<se&&0>s(Fe,ce)?(F[K]=Fe,F[_e]=q,K=_e):(F[K]=ce,F[xe]=q,K=xe);else if(_e<se&&0>s(Fe,q))F[K]=Fe,F[_e]=q,K=_e;else break e}}return B}function s(F,B){var q=F.sortIndex-B.sortIndex;return q!==0?q:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,_=!1,T=!1,I=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=F)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function b(F){if(T=!1,S(F),!_)if(n(l)!==null)_=!0,Y(P);else{var B=n(c);B!==null&&J(b,B.startTime-F)}}function P(F,B){_=!1,T&&(T=!1,v(y),y=-1),m=!0;var q=p;try{for(S(B),d=n(l);d!==null&&(!(d.expirationTime>B)||F&&!x());){var K=d.callback;if(typeof K=="function"){d.callback=null,p=d.priorityLevel;var se=K(d.expirationTime<=B);B=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),S(B)}else r(l);d=n(l)}if(d!==null)var Ze=!0;else{var xe=n(c);xe!==null&&J(b,xe.startTime-B),Ze=!1}return Ze}finally{d=null,p=q,m=!1}}var D=!1,E=null,y=-1,C=5,k=-1;function x(){return!(t.unstable_now()-k<C)}function N(){if(E!==null){var F=t.unstable_now();k=F;var B=!0;try{B=E(!0,F)}finally{B?R():(D=!1,E=null)}}else D=!1}var R;if(typeof w=="function")R=function(){w(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=N,R=function(){Z.postMessage(null)}}else R=function(){I(N,0)};function Y(F){E=F,D||(D=!0,R())}function J(F,B){y=I(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Y(P))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var q=p;p=B;try{return F()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=p;p=F;try{return B()}finally{p=q}},t.unstable_scheduleCallback=function(F,B,q){var K=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,F={id:h++,callback:B,priorityLevel:F,startTime:q,expirationTime:se,sortIndex:-1},q>K?(F.sortIndex=q,e(c,F),n(l)===null&&F===n(c)&&(T?(v(y),y=-1):T=!0,J(b,q-K))):(F.sortIndex=se,e(l,F),_||m||(_=!0,Y(P))),F},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(F){var B=p;return function(){var q=p;p=B;try{return F.apply(this,arguments)}finally{p=q}}}})(sT);rT.exports=sT;var VA=rT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=U,cn=VA;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iT=new Set,dl={};function bi(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(dl[t]=e,t=0;t<e.length;t++)iT.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=Object.prototype.hasOwnProperty,FA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},Ly={};function UA(t){return Gf.call(Ly,t)?!0:Gf.call(Vy,t)?!1:FA.test(t)?Ly[t]=!0:(Vy[t]=!0,!1)}function jA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BA(t,e,n,r){if(e===null||typeof e>"u"||jA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xm=/[\-:]([a-z])/g;function Rm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xm,Rm);Rt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xm,Rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xm,Rm);Rt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pm(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BA(e,n,s,r)&&(n=null),r||s===null?UA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wu=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Kf=Symbol.for("react.profiler"),oT=Symbol.for("react.provider"),aT=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Dm=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),lT=Symbol.for("react.offscreen"),Fy=Symbol.iterator;function Ra(t){return t===null||typeof t!="object"?null:(t=Fy&&t[Fy]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,sf;function Fa(t){if(sf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sf=e&&e[1]||""}return`
`+sf+t}var of=!1;function af(t,e){if(!t||of)return"";of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{of=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fa(t):""}function zA(t){switch(t.tag){case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return t=af(t.type,!1),t;case 11:return t=af(t.type.render,!1),t;case 1:return t=af(t.type,!0),t;default:return""}}function Xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zi:return"Fragment";case Ji:return"Portal";case Kf:return"Profiler";case Nm:return"StrictMode";case Qf:return"Suspense";case Yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aT:return(t.displayName||"Context")+".Consumer";case oT:return(t._context.displayName||"Context")+".Provider";case bm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dm:return e=t.displayName||null,e!==null?e:Xf(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return Xf(t(e))}catch{}}return null}function WA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xf(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qA(t){var e=uT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qu(t){t._valueTracker||(t._valueTracker=qA(t))}function cT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jf(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Uy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hT(t,e){e=e.checked,e!=null&&Pm(t,"checked",e,!1)}function Zf(t,e){hT(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ep(t,e.type,n):e.hasOwnProperty("defaultValue")&&ep(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ep(t,e,n){(e!=="number"||Bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ua=Array.isArray;function po(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function By(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ua(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function dT(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $u,pT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($u=$u||document.createElement("div"),$u.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$u.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$A=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(t){$A.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ka[e]=Ka[t]})});function mT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ka.hasOwnProperty(t)&&Ka[t]?(""+e).trim():e+"px"}function gT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HA=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rp(t,e){if(e){if(HA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=null;function Om(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var op=null,mo=null,go=null;function Wy(t){if(t=iu(t)){if(typeof op!="function")throw Error(z(280));var e=t.stateNode;e&&(e=rd(e),op(t.stateNode,t.type,e))}}function _T(t){mo?go?go.push(t):go=[t]:mo=t}function yT(){if(mo){var t=mo,e=go;if(go=mo=null,Wy(t),e)for(t=0;t<e.length;t++)Wy(e[t])}}function vT(t,e){return t(e)}function wT(){}var lf=!1;function TT(t,e,n){if(lf)return t(e,n);lf=!0;try{return vT(t,e,n)}finally{lf=!1,(mo!==null||go!==null)&&(wT(),yT())}}function pl(t,e){var n=t.stateNode;if(n===null)return null;var r=rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ap=!1;if(kr)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){ap=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{ap=!1}function GA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Qa=!1,zc=null,Wc=!1,lp=null,KA={onError:function(t){Qa=!0,zc=t}};function QA(t,e,n,r,s,i,o,a,l){Qa=!1,zc=null,GA.apply(KA,arguments)}function YA(t,e,n,r,s,i,o,a,l){if(QA.apply(this,arguments),Qa){if(Qa){var c=zc;Qa=!1,zc=null}else throw Error(z(198));Wc||(Wc=!0,lp=c)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ET(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qy(t){if(Di(t)!==t)throw Error(z(188))}function XA(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qy(s),t;if(i===r)return qy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function ST(t){return t=XA(t),t!==null?IT(t):null}function IT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IT(t);if(e!==null)return e;t=t.sibling}return null}var CT=cn.unstable_scheduleCallback,$y=cn.unstable_cancelCallback,JA=cn.unstable_shouldYield,ZA=cn.unstable_requestPaint,rt=cn.unstable_now,ek=cn.unstable_getCurrentPriorityLevel,Mm=cn.unstable_ImmediatePriority,AT=cn.unstable_UserBlockingPriority,qc=cn.unstable_NormalPriority,tk=cn.unstable_LowPriority,kT=cn.unstable_IdlePriority,Zh=null,er=null;function nk(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:ik,rk=Math.log,sk=Math.LN2;function ik(t){return t>>>=0,t===0?32:31-(rk(t)/sk|0)|0}var Hu=64,Gu=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ja(a):(i&=o,i!==0&&(r=ja(i)))}else o=n&~s,o!==0?r=ja(o):i!==0&&(r=ja(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),s=1<<n,r|=t[n],e&=~s;return r}function ok(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ak(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Vn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ok(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function up(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xT(){var t=Hu;return Hu<<=1,!(Hu&4194240)&&(Hu=64),t}function uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function lk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function RT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PT,Lm,NT,bT,DT,cp=!1,Ku=[],fs=null,ps=null,ms=null,ml=new Map,gl=new Map,ss=[],uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(t,e){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(e.pointerId)}}function Na(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=iu(e),e!==null&&Lm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ck(t,e,n,r,s){switch(e){case"focusin":return fs=Na(fs,t,e,n,r,s),!0;case"dragenter":return ps=Na(ps,t,e,n,r,s),!0;case"mouseover":return ms=Na(ms,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ml.set(i,Na(ml.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gl.set(i,Na(gl.get(i)||null,t,e,n,r,s)),!0}return!1}function OT(t){var e=ii(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=ET(n),e!==null){t.blockedOn=e,DT(t.priority,function(){NT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ip=r,n.target.dispatchEvent(r),ip=null}else return e=iu(n),e!==null&&Lm(e),t.blockedOn=n,!1;e.shift()}return!0}function Gy(t,e,n){yc(t)&&n.delete(e)}function hk(){cp=!1,fs!==null&&yc(fs)&&(fs=null),ps!==null&&yc(ps)&&(ps=null),ms!==null&&yc(ms)&&(ms=null),ml.forEach(Gy),gl.forEach(Gy)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,cp||(cp=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,hk)))}function _l(t){function e(s){return ba(s,t)}if(0<Ku.length){ba(Ku[0],t);for(var n=1;n<Ku.length;n++){var r=Ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fs!==null&&ba(fs,t),ps!==null&&ba(ps,t),ms!==null&&ba(ms,t),ml.forEach(e),gl.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)OT(n),n.blockedOn===null&&ss.shift()}var _o=Lr.ReactCurrentBatchConfig,Hc=!0;function dk(t,e,n,r){var s=Ie,i=_o.transition;_o.transition=null;try{Ie=1,Fm(t,e,n,r)}finally{Ie=s,_o.transition=i}}function fk(t,e,n,r){var s=Ie,i=_o.transition;_o.transition=null;try{Ie=4,Fm(t,e,n,r)}finally{Ie=s,_o.transition=i}}function Fm(t,e,n,r){if(Hc){var s=hp(t,e,n,r);if(s===null)vf(t,e,r,Gc,n),Hy(t,r);else if(ck(s,t,e,n,r))r.stopPropagation();else if(Hy(t,r),e&4&&-1<uk.indexOf(t)){for(;s!==null;){var i=iu(s);if(i!==null&&PT(i),i=hp(t,e,n,r),i===null&&vf(t,e,r,Gc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else vf(t,e,r,null,n)}}var Gc=null;function hp(t,e,n,r){if(Gc=null,t=Om(r),t=ii(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ET(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gc=t,null}function MT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ek()){case Mm:return 1;case AT:return 4;case qc:case tk:return 16;case kT:return 536870912;default:return 16}default:return 16}}var us=null,Um=null,vc=null;function VT(){if(vc)return vc;var t,e=Um,n=e.length,r,s="value"in us?us.value:us.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vc=s.slice(t,1<r?1-r:void 0)}function wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qu(){return!0}function Ky(){return!1}function fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qu:Ky,this.isPropagationStopped=Ky,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),e}var Qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=fn(Qo),su=Ge({},Qo,{view:0,detail:0}),pk=fn(su),cf,hf,Da,ed=Ge({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(cf=t.screenX-Da.screenX,hf=t.screenY-Da.screenY):hf=cf=0,Da=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:hf}}),Qy=fn(ed),mk=Ge({},ed,{dataTransfer:0}),gk=fn(mk),_k=Ge({},su,{relatedTarget:0}),df=fn(_k),yk=Ge({},Qo,{animationName:0,elapsedTime:0,pseudoElement:0}),vk=fn(yk),wk=Ge({},Qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tk=fn(wk),Ek=Ge({},Qo,{data:0}),Yy=fn(Ek),Sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ck={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ak(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ck[t])?!!e[t]:!1}function Bm(){return Ak}var kk=Ge({},su,{key:function(t){if(t.key){var e=Sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ik[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bm,charCode:function(t){return t.type==="keypress"?wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xk=fn(kk),Rk=Ge({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xy=fn(Rk),Pk=Ge({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bm}),Nk=fn(Pk),bk=Ge({},Qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dk=fn(bk),Ok=Ge({},ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=fn(Ok),Vk=[9,13,27,32],zm=kr&&"CompositionEvent"in window,Ya=null;kr&&"documentMode"in document&&(Ya=document.documentMode);var Lk=kr&&"TextEvent"in window&&!Ya,LT=kr&&(!zm||Ya&&8<Ya&&11>=Ya),Jy=" ",Zy=!1;function FT(t,e){switch(t){case"keyup":return Vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function Fk(t,e){switch(t){case"compositionend":return UT(e);case"keypress":return e.which!==32?null:(Zy=!0,Jy);case"textInput":return t=e.data,t===Jy&&Zy?null:t;default:return null}}function Uk(t,e){if(eo)return t==="compositionend"||!zm&&FT(t,e)?(t=VT(),vc=Um=us=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LT&&e.locale!=="ko"?null:e.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jk[t.type]:e==="textarea"}function jT(t,e,n,r){_T(r),e=Kc(e,"onChange"),0<e.length&&(n=new jm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xa=null,yl=null;function Bk(t){XT(t,0)}function td(t){var e=ro(t);if(cT(e))return t}function zk(t,e){if(t==="change")return e}var BT=!1;if(kr){var ff;if(kr){var pf="oninput"in document;if(!pf){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),pf=typeof tv.oninput=="function"}ff=pf}else ff=!1;BT=ff&&(!document.documentMode||9<document.documentMode)}function nv(){Xa&&(Xa.detachEvent("onpropertychange",zT),yl=Xa=null)}function zT(t){if(t.propertyName==="value"&&td(yl)){var e=[];jT(e,yl,t,Om(t)),TT(Bk,e)}}function Wk(t,e,n){t==="focusin"?(nv(),Xa=e,yl=n,Xa.attachEvent("onpropertychange",zT)):t==="focusout"&&nv()}function qk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return td(yl)}function $k(t,e){if(t==="click")return td(e)}function Hk(t,e){if(t==="input"||t==="change")return td(e)}function Gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:Gk;function vl(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gf.call(e,s)||!Bn(t[s],e[s]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sv(t,e){var n=rv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rv(n)}}function WT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qT(){for(var t=window,e=Bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bc(t.document)}return e}function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kk(t){var e=qT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WT(n.ownerDocument.documentElement,n)){if(r!==null&&Wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=sv(n,i);var o=sv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qk=kr&&"documentMode"in document&&11>=document.documentMode,to=null,dp=null,Ja=null,fp=!1;function iv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fp||to==null||to!==Bc(r)||(r=to,"selectionStart"in r&&Wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ja&&vl(Ja,r)||(Ja=r,r=Kc(dp,"onSelect"),0<r.length&&(e=new jm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=to)))}function Yu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},mf={},$T={};kr&&($T=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function nd(t){if(mf[t])return mf[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $T)return mf[t]=e[n];return t}var HT=nd("animationend"),GT=nd("animationiteration"),KT=nd("animationstart"),QT=nd("transitionend"),YT=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){YT.set(t,e),bi(e,[t])}for(var gf=0;gf<ov.length;gf++){var _f=ov[gf],Yk=_f.toLowerCase(),Xk=_f[0].toUpperCase()+_f.slice(1);js(Yk,"on"+Xk)}js(HT,"onAnimationEnd");js(GT,"onAnimationIteration");js(KT,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(QT,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function av(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,YA(r,e,void 0,t),t.currentTarget=null}function XT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;av(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;av(s,a,c),i=l}}}if(Wc)throw t=lp,Wc=!1,lp=null,t}function De(t,e){var n=e[yp];n===void 0&&(n=e[yp]=new Set);var r=t+"__bubble";n.has(r)||(JT(e,t,2,!1),n.add(r))}function yf(t,e,n){var r=0;e&&(r|=4),JT(n,t,r,e)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function wl(t){if(!t[Xu]){t[Xu]=!0,iT.forEach(function(n){n!=="selectionchange"&&(Jk.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xu]||(e[Xu]=!0,yf("selectionchange",!1,e))}}function JT(t,e,n,r){switch(MT(e)){case 1:var s=dk;break;case 4:s=fk;break;default:s=Fm}n=s.bind(null,e,n,t),s=void 0,!ap||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function vf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ii(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}TT(function(){var c=i,h=Om(n),d=[];e:{var p=YT.get(t);if(p!==void 0){var m=jm,_=t;switch(t){case"keypress":if(wc(n)===0)break e;case"keydown":case"keyup":m=xk;break;case"focusin":_="focus",m=df;break;case"focusout":_="blur",m=df;break;case"beforeblur":case"afterblur":m=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Nk;break;case HT:case GT:case KT:m=vk;break;case QT:m=Dk;break;case"scroll":m=pk;break;case"wheel":m=Mk;break;case"copy":case"cut":case"paste":m=Tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xy}var T=(e&4)!==0,I=!T&&t==="scroll",v=T?p!==null?p+"Capture":null:p;T=[];for(var w=c,S;w!==null;){S=w;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,v!==null&&(b=pl(w,v),b!=null&&T.push(Tl(w,b,S)))),I)break;w=w.return}0<T.length&&(p=new m(p,_,null,n,h),d.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==ip&&(_=n.relatedTarget||n.fromElement)&&(ii(_)||_[xr]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?ii(_):null,_!==null&&(I=Di(_),_!==I||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(T=Qy,b="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=Xy,b="onPointerLeave",v="onPointerEnter",w="pointer"),I=m==null?p:ro(m),S=_==null?p:ro(_),p=new T(b,w+"leave",m,n,h),p.target=I,p.relatedTarget=S,b=null,ii(h)===c&&(T=new T(v,w+"enter",_,n,h),T.target=S,T.relatedTarget=I,b=T),I=b,m&&_)t:{for(T=m,v=_,w=0,S=T;S;S=Hi(S))w++;for(S=0,b=v;b;b=Hi(b))S++;for(;0<w-S;)T=Hi(T),w--;for(;0<S-w;)v=Hi(v),S--;for(;w--;){if(T===v||v!==null&&T===v.alternate)break t;T=Hi(T),v=Hi(v)}T=null}else T=null;m!==null&&lv(d,p,m,T,!1),_!==null&&I!==null&&lv(d,I,_,T,!0)}}e:{if(p=c?ro(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=zk;else if(ev(p))if(BT)P=Hk;else{P=qk;var D=Wk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=$k);if(P&&(P=P(t,c))){jT(d,P,n,h);break e}D&&D(t,p,c),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&ep(p,"number",p.value)}switch(D=c?ro(c):window,t){case"focusin":(ev(D)||D.contentEditable==="true")&&(to=D,dp=c,Ja=null);break;case"focusout":Ja=dp=to=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,iv(d,n,h);break;case"selectionchange":if(Qk)break;case"keydown":case"keyup":iv(d,n,h)}var E;if(zm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else eo?FT(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(LT&&n.locale!=="ko"&&(eo||y!=="onCompositionStart"?y==="onCompositionEnd"&&eo&&(E=VT()):(us=h,Um="value"in us?us.value:us.textContent,eo=!0)),D=Kc(c,y),0<D.length&&(y=new Yy(y,t,null,n,h),d.push({event:y,listeners:D}),E?y.data=E:(E=UT(n),E!==null&&(y.data=E)))),(E=Lk?Fk(t,n):Uk(t,n))&&(c=Kc(c,"onBeforeInput"),0<c.length&&(h=new Yy("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=E))}XT(d,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pl(t,n),i!=null&&r.unshift(Tl(t,i,s)),i=pl(t,e),i!=null&&r.push(Tl(t,i,s))),t=t.return}return r}function Hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=pl(n,i),l!=null&&o.unshift(Tl(n,l,a))):s||(l=pl(n,i),l!=null&&o.push(Tl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Zk=/\r\n?/g,ex=/\u0000|\uFFFD/g;function uv(t){return(typeof t=="string"?t:""+t).replace(Zk,`
`).replace(ex,"")}function Ju(t,e,n){if(e=uv(e),uv(t)!==e&&n)throw Error(z(425))}function Qc(){}var pp=null,mp=null;function gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,tx=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(t){return cv.resolve(null).then(t).catch(rx)}:_p;function rx(t){setTimeout(function(){throw t})}function wf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_l(e)}function gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Yo,El="__reactProps$"+Yo,xr="__reactContainer$"+Yo,yp="__reactEvents$"+Yo,sx="__reactListeners$"+Yo,ix="__reactHandles$"+Yo;function ii(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hv(t);t!==null;){if(n=t[Zn])return n;t=hv(t)}return e}t=n,n=t.parentNode}return null}function iu(t){return t=t[Zn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function rd(t){return t[El]||null}var vp=[],so=-1;function Bs(t){return{current:t}}function Ve(t){0>so||(t.current=vp[so],vp[so]=null,so--)}function Pe(t,e){so++,vp[so]=t.current,t.current=e}var Rs={},Ft=Bs(Rs),Zt=Bs(!1),mi=Rs;function xo(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function en(t){return t=t.childContextTypes,t!=null}function Yc(){Ve(Zt),Ve(Ft)}function dv(t,e,n){if(Ft.current!==Rs)throw Error(z(168));Pe(Ft,e),Pe(Zt,n)}function ZT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,WA(t)||"Unknown",s));return Ge({},n,r)}function Xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,mi=Ft.current,Pe(Ft,t),Pe(Zt,Zt.current),!0}function fv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=ZT(t,e,mi),r.__reactInternalMemoizedMergedChildContext=t,Ve(Zt),Ve(Ft),Pe(Ft,t)):Ve(Zt),Pe(Zt,n)}var gr=null,sd=!1,Tf=!1;function eE(t){gr===null?gr=[t]:gr.push(t)}function ox(t){sd=!0,eE(t)}function zs(){if(!Tf&&gr!==null){Tf=!0;var t=0,e=Ie;try{var n=gr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gr=null,sd=!1}catch(s){throw gr!==null&&(gr=gr.slice(t+1)),CT(Mm,zs),s}finally{Ie=e,Tf=!1}}return null}var io=[],oo=0,Jc=null,Zc=0,pn=[],mn=0,gi=null,yr=1,vr="";function ti(t,e){io[oo++]=Zc,io[oo++]=Jc,Jc=t,Zc=e}function tE(t,e,n){pn[mn++]=yr,pn[mn++]=vr,pn[mn++]=gi,gi=t;var r=yr;t=vr;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,yr=1<<32-Vn(e)+s|n<<s|r,vr=i+t}else yr=1<<i|n<<s|r,vr=t}function qm(t){t.return!==null&&(ti(t,1),tE(t,1,0))}function $m(t){for(;t===Jc;)Jc=io[--oo],io[oo]=null,Zc=io[--oo],io[oo]=null;for(;t===gi;)gi=pn[--mn],pn[mn]=null,vr=pn[--mn],pn[mn]=null,yr=pn[--mn],pn[mn]=null}var un=null,ln=null,Be=!1,Pn=null;function nE(t,e){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,ln=gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gi!==null?{id:yr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,ln=null,!0):!1;default:return!1}}function wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tp(t){if(Be){var e=ln;if(e){var n=e;if(!pv(t,e)){if(wp(t))throw Error(z(418));e=gs(n.nextSibling);var r=un;e&&pv(t,e)?nE(r,n):(t.flags=t.flags&-4097|2,Be=!1,un=t)}}else{if(wp(t))throw Error(z(418));t.flags=t.flags&-4097|2,Be=!1,un=t}}}function mv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Zu(t){if(t!==un)return!1;if(!Be)return mv(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gp(t.type,t.memoizedProps)),e&&(e=ln)){if(wp(t))throw rE(),Error(z(418));for(;e;)nE(t,e),e=gs(e.nextSibling)}if(mv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=un?gs(t.stateNode.nextSibling):null;return!0}function rE(){for(var t=ln;t;)t=gs(t.nextSibling)}function Ro(){ln=un=null,Be=!1}function Hm(t){Pn===null?Pn=[t]:Pn.push(t)}var ax=Lr.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ec(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gv(t){var e=t._init;return e(t._payload)}function sE(t){function e(v,w){if(t){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=ws(v,w),v.index=0,v.sibling=null,v}function i(v,w,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,S,b){return w===null||w.tag!==6?(w=xf(S,v.mode,b),w.return=v,w):(w=s(w,S),w.return=v,w)}function l(v,w,S,b){var P=S.type;return P===Zi?h(v,w,S.props.children,b,S.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ts&&gv(P)===w.type)?(b=s(w,S.props),b.ref=Oa(v,w,S),b.return=v,b):(b=kc(S.type,S.key,S.props,null,v.mode,b),b.ref=Oa(v,w,S),b.return=v,b)}function c(v,w,S,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Rf(S,v.mode,b),w.return=v,w):(w=s(w,S.children||[]),w.return=v,w)}function h(v,w,S,b,P){return w===null||w.tag!==7?(w=di(S,v.mode,b,P),w.return=v,w):(w=s(w,S),w.return=v,w)}function d(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=xf(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wu:return S=kc(w.type,w.key,w.props,null,v.mode,S),S.ref=Oa(v,null,w),S.return=v,S;case Ji:return w=Rf(w,v.mode,S),w.return=v,w;case ts:var b=w._init;return d(v,b(w._payload),S)}if(Ua(w)||Ra(w))return w=di(w,v.mode,S,null),w.return=v,w;ec(v,w)}return null}function p(v,w,S,b){var P=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:a(v,w,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wu:return S.key===P?l(v,w,S,b):null;case Ji:return S.key===P?c(v,w,S,b):null;case ts:return P=S._init,p(v,w,P(S._payload),b)}if(Ua(S)||Ra(S))return P!==null?null:h(v,w,S,b,null);ec(v,S)}return null}function m(v,w,S,b,P){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(S)||null,a(w,v,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wu:return v=v.get(b.key===null?S:b.key)||null,l(w,v,b,P);case Ji:return v=v.get(b.key===null?S:b.key)||null,c(w,v,b,P);case ts:var D=b._init;return m(v,w,S,D(b._payload),P)}if(Ua(b)||Ra(b))return v=v.get(S)||null,h(w,v,b,P,null);ec(w,b)}return null}function _(v,w,S,b){for(var P=null,D=null,E=w,y=w=0,C=null;E!==null&&y<S.length;y++){E.index>y?(C=E,E=null):C=E.sibling;var k=p(v,E,S[y],b);if(k===null){E===null&&(E=C);break}t&&E&&k.alternate===null&&e(v,E),w=i(k,w,y),D===null?P=k:D.sibling=k,D=k,E=C}if(y===S.length)return n(v,E),Be&&ti(v,y),P;if(E===null){for(;y<S.length;y++)E=d(v,S[y],b),E!==null&&(w=i(E,w,y),D===null?P=E:D.sibling=E,D=E);return Be&&ti(v,y),P}for(E=r(v,E);y<S.length;y++)C=m(E,v,y,S[y],b),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?y:C.key),w=i(C,w,y),D===null?P=C:D.sibling=C,D=C);return t&&E.forEach(function(x){return e(v,x)}),Be&&ti(v,y),P}function T(v,w,S,b){var P=Ra(S);if(typeof P!="function")throw Error(z(150));if(S=P.call(S),S==null)throw Error(z(151));for(var D=P=null,E=w,y=w=0,C=null,k=S.next();E!==null&&!k.done;y++,k=S.next()){E.index>y?(C=E,E=null):C=E.sibling;var x=p(v,E,k.value,b);if(x===null){E===null&&(E=C);break}t&&E&&x.alternate===null&&e(v,E),w=i(x,w,y),D===null?P=x:D.sibling=x,D=x,E=C}if(k.done)return n(v,E),Be&&ti(v,y),P;if(E===null){for(;!k.done;y++,k=S.next())k=d(v,k.value,b),k!==null&&(w=i(k,w,y),D===null?P=k:D.sibling=k,D=k);return Be&&ti(v,y),P}for(E=r(v,E);!k.done;y++,k=S.next())k=m(E,v,y,k.value,b),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?y:k.key),w=i(k,w,y),D===null?P=k:D.sibling=k,D=k);return t&&E.forEach(function(N){return e(v,N)}),Be&&ti(v,y),P}function I(v,w,S,b){if(typeof S=="object"&&S!==null&&S.type===Zi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Wu:e:{for(var P=S.key,D=w;D!==null;){if(D.key===P){if(P=S.type,P===Zi){if(D.tag===7){n(v,D.sibling),w=s(D,S.props.children),w.return=v,v=w;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ts&&gv(P)===D.type){n(v,D.sibling),w=s(D,S.props),w.ref=Oa(v,D,S),w.return=v,v=w;break e}n(v,D);break}else e(v,D);D=D.sibling}S.type===Zi?(w=di(S.props.children,v.mode,b,S.key),w.return=v,v=w):(b=kc(S.type,S.key,S.props,null,v.mode,b),b.ref=Oa(v,w,S),b.return=v,v=b)}return o(v);case Ji:e:{for(D=S.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(v,w.sibling),w=s(w,S.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Rf(S,v.mode,b),w.return=v,v=w}return o(v);case ts:return D=S._init,I(v,w,D(S._payload),b)}if(Ua(S))return _(v,w,S,b);if(Ra(S))return T(v,w,S,b);ec(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,S),w.return=v,v=w):(n(v,w),w=xf(S,v.mode,b),w.return=v,v=w),o(v)):n(v,w)}return I}var Po=sE(!0),iE=sE(!1),eh=Bs(null),th=null,ao=null,Gm=null;function Km(){Gm=ao=th=null}function Qm(t){var e=eh.current;Ve(eh),t._currentValue=e}function Ep(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yo(t,e){th=t,Gm=ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(Gm!==t)if(t={context:t,memoizedValue:e,next:null},ao===null){if(th===null)throw Error(z(308));ao=t,th.dependencies={lanes:0,firstContext:t}}else ao=ao.next=t;return e}var oi=null;function Ym(t){oi===null?oi=[t]:oi.push(t)}function oE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ym(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rr(t,r)}function Rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ns=!1;function Xm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _s(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rr(t,n)}return s=r.interleaved,s===null?(e.next=e,Ym(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rr(t,n)}function Tc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}function _v(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nh(t,e,n,r){var s=t.updateQueue;ns=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,T=a;switch(p=e,m=n,T.tag){case 1:if(_=T.payload,typeof _=="function"){d=_.call(m,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=T.payload,p=typeof _=="function"?_.call(m,d,p):_,p==null)break e;d=Ge({},d,p);break e;case 2:ns=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yi|=o,t.lanes=o,t.memoizedState=d}}function yv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ou={},tr=Bs(ou),Sl=Bs(ou),Il=Bs(ou);function ai(t){if(t===ou)throw Error(z(174));return t}function Jm(t,e){switch(Pe(Il,e),Pe(Sl,t),Pe(tr,ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=np(e,t)}Ve(tr),Pe(tr,e)}function No(){Ve(tr),Ve(Sl),Ve(Il)}function lE(t){ai(Il.current);var e=ai(tr.current),n=np(e,t.type);e!==n&&(Pe(Sl,t),Pe(tr,n))}function Zm(t){Sl.current===t&&(Ve(tr),Ve(Sl))}var qe=Bs(0);function rh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ef=[];function eg(){for(var t=0;t<Ef.length;t++)Ef[t]._workInProgressVersionPrimary=null;Ef.length=0}var Ec=Lr.ReactCurrentDispatcher,Sf=Lr.ReactCurrentBatchConfig,_i=0,He=null,ct=null,vt=null,sh=!1,Za=!1,Cl=0,lx=0;function bt(){throw Error(z(321))}function tg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function ng(t,e,n,r,s,i){if(_i=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ec.current=t===null||t.memoizedState===null?dx:fx,t=n(r,s),Za){i=0;do{if(Za=!1,Cl=0,25<=i)throw Error(z(301));i+=1,vt=ct=null,e.updateQueue=null,Ec.current=px,t=n(r,s)}while(Za)}if(Ec.current=ih,e=ct!==null&&ct.next!==null,_i=0,vt=ct=He=null,sh=!1,e)throw Error(z(300));return t}function rg(){var t=Cl!==0;return Cl=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?He.memoizedState=vt=t:vt=vt.next=t,vt}function In(){if(ct===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=vt===null?He.memoizedState:vt.next;if(e!==null)vt=e,ct=t;else{if(t===null)throw Error(z(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},vt===null?He.memoizedState=vt=t:vt=vt.next=t}return vt}function Al(t,e){return typeof e=="function"?e(t):e}function If(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((_i&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,He.lanes|=h,yi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Bn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,yi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cf(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bn(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uE(){}function cE(t,e){var n=He,r=In(),s=e(),i=!Bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Jt=!0),r=r.queue,sg(fE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,kl(9,dE.bind(null,n,r,s,e),void 0,null),Tt===null)throw Error(z(349));_i&30||hE(n,e,s)}return s}function hE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dE(t,e,n,r){e.value=n,e.getSnapshot=r,pE(e)&&mE(t)}function fE(t,e,n){return n(function(){pE(e)&&mE(t)})}function pE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function mE(t){var e=Rr(t,1);e!==null&&Ln(e,t,1,-1)}function vv(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=hx.bind(null,He,t),[e.memoizedState,t]}function kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gE(){return In().memoizedState}function Sc(t,e,n,r){var s=Xn();He.flags|=t,s.memoizedState=kl(1|e,n,void 0,r===void 0?null:r)}function id(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&tg(r,o.deps)){s.memoizedState=kl(e,n,i,r);return}}He.flags|=t,s.memoizedState=kl(1|e,n,i,r)}function wv(t,e){return Sc(8390656,8,t,e)}function sg(t,e){return id(2048,8,t,e)}function _E(t,e){return id(4,2,t,e)}function yE(t,e){return id(4,4,t,e)}function vE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wE(t,e,n){return n=n!=null?n.concat([t]):null,id(4,4,vE.bind(null,e,t),n)}function ig(){}function TE(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function EE(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SE(t,e,n){return _i&21?(Bn(n,e)||(n=xT(),He.lanes|=n,yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function ux(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Sf.transition;Sf.transition={};try{t(!1),e()}finally{Ie=n,Sf.transition=r}}function IE(){return In().memoizedState}function cx(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CE(t))AE(e,n);else if(n=oE(t,e,n,r),n!==null){var s=$t();Ln(n,t,r,s),kE(n,e,r)}}function hx(t,e,n){var r=vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CE(t))AE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Bn(a,o)){var l=e.interleaved;l===null?(s.next=s,Ym(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=oE(t,e,s,r),n!==null&&(s=$t(),Ln(n,t,r,s),kE(n,e,r))}}function CE(t){var e=t.alternate;return t===He||e!==null&&e===He}function AE(t,e){Za=sh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}var ih={readContext:Sn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},dx={readContext:Sn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4194308,4,vE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sc(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cx.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:vv,useDebugValue:ig,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=vv(!1),e=t[0];return t=ux.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=Xn();if(Be){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Tt===null)throw Error(z(349));_i&30||hE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,wv(fE.bind(null,r,i,t),[t]),r.flags|=2048,kl(9,dE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xn(),e=Tt.identifierPrefix;if(Be){var n=vr,r=yr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fx={readContext:Sn,useCallback:TE,useContext:Sn,useEffect:sg,useImperativeHandle:wE,useInsertionEffect:_E,useLayoutEffect:yE,useMemo:EE,useReducer:If,useRef:gE,useState:function(){return If(Al)},useDebugValue:ig,useDeferredValue:function(t){var e=In();return SE(e,ct.memoizedState,t)},useTransition:function(){var t=If(Al)[0],e=In().memoizedState;return[t,e]},useMutableSource:uE,useSyncExternalStore:cE,useId:IE,unstable_isNewReconciler:!1},px={readContext:Sn,useCallback:TE,useContext:Sn,useEffect:sg,useImperativeHandle:wE,useInsertionEffect:_E,useLayoutEffect:yE,useMemo:EE,useReducer:Cf,useRef:gE,useState:function(){return Cf(Al)},useDebugValue:ig,useDeferredValue:function(t){var e=In();return ct===null?e.memoizedState=t:SE(e,ct.memoizedState,t)},useTransition:function(){var t=Cf(Al)[0],e=In().memoizedState;return[t,e]},useMutableSource:uE,useSyncExternalStore:cE,useId:IE,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var od={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=vs(t),i=Er(r,s);i.payload=e,n!=null&&(i.callback=n),e=_s(t,i,s),e!==null&&(Ln(e,t,s,r),Tc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=vs(t),i=Er(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_s(t,i,s),e!==null&&(Ln(e,t,s,r),Tc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=vs(t),s=Er(n,r);s.tag=2,e!=null&&(s.callback=e),e=_s(t,s,r),e!==null&&(Ln(e,t,r,n),Tc(e,t,r))}};function Tv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vl(n,r)||!vl(s,i):!0}function xE(t,e,n){var r=!1,s=Rs,i=e.contextType;return typeof i=="object"&&i!==null?i=Sn(i):(s=en(e)?mi:Ft.current,r=e.contextTypes,i=(r=r!=null)?xo(t,s):Rs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ev(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function Ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sn(i):(i=en(e)?mi:Ft.current,s.context=xo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&od.enqueueReplaceState(s,s.state,null),nh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=zA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Af(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mx=typeof WeakMap=="function"?WeakMap:Map;function RE(t,e,n){n=Er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ah||(ah=!0,Mp=r),Cp(t,e)},n}function PE(t,e,n){n=Er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cp(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Rx.bind(null,t,e,n),e.then(t,t))}function Iv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Er(-1,1),e.tag=2,_s(n,e,1))),n.lanes|=1),t)}var gx=Lr.ReactCurrentOwner,Jt=!1;function zt(t,e,n,r){e.child=t===null?iE(e,null,n,r):Po(e,t.child,n,r)}function Av(t,e,n,r,s){n=n.render;var i=e.ref;return yo(e,s),r=ng(t,e,n,r,i,s),n=rg(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Be&&n&&qm(e),e.flags|=1,zt(t,e,r,s),e.child)}function kv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NE(t,e,i,r,s)):(t=kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vl,n(o,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=ws(i,r),t.ref=e.ref,t.return=e,e.child=t}function NE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vl(i,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Ap(t,e,n,r,s)}function bE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(uo,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(uo,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(uo,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(uo,on),on|=r;return zt(t,e,s,n),e.child}function DE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ap(t,e,n,r,s){var i=en(n)?mi:Ft.current;return i=xo(e,i),yo(e,s),n=ng(t,e,n,r,i,s),r=rg(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Be&&r&&qm(e),e.flags|=1,zt(t,e,n,s),e.child)}function xv(t,e,n,r,s){if(en(n)){var i=!0;Xc(e)}else i=!1;if(yo(e,s),e.stateNode===null)Ic(t,e),xE(e,n,r),Ip(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Sn(c):(c=en(n)?mi:Ft.current,c=xo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ev(e,o,r,c),ns=!1;var p=e.memoizedState;o.state=p,nh(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Zt.current||ns?(typeof h=="function"&&(Sp(e,n,h,r),l=e.memoizedState),(a=ns||Tv(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=en(n)?mi:Ft.current,l=xo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&Ev(e,o,r,l),ns=!1,p=e.memoizedState,o.state=p,nh(e,r,o,s);var _=e.memoizedState;a!==d||p!==_||Zt.current||ns?(typeof m=="function"&&(Sp(e,n,m,r),_=e.memoizedState),(c=ns||Tv(e,n,c,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return kp(t,e,n,r,i,s)}function kp(t,e,n,r,s,i){DE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fv(e,n,!1),Pr(t,e,i);r=e.stateNode,gx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Po(e,t.child,null,i),e.child=Po(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&fv(e,n,!0),e.child}function OE(t){var e=t.stateNode;e.pendingContext?dv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dv(t,e.context,!1),Jm(t,e.containerInfo)}function Rv(t,e,n,r,s){return Ro(),Hm(s),e.flags|=256,zt(t,e,n,r),e.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function Rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function ME(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(qe,s&1),t===null)return Tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ud(o,r,0,null),t=di(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rp(n),e.memoizedState=xp,t):og(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return _x(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ws(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ws(a,i):(i=di(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xp,r}return i=t.child,t=i.sibling,r=ws(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function og(t,e){return e=ud({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tc(t,e,n,r){return r!==null&&Hm(r),Po(e,t.child,null,n),t=og(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _x(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Af(Error(z(422))),tc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ud({mode:"visible",children:r.children},s,0,null),i=di(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Po(e,t.child,null,o),e.child.memoizedState=Rp(o),e.memoizedState=xp,i);if(!(e.mode&1))return tc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Af(i,r,void 0),tc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jt||a){if(r=Tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rr(t,s),Ln(r,t,s,-1))}return dg(),r=Af(Error(z(421))),tc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Px.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ln=gs(s.nextSibling),un=e,Be=!0,Pn=null,t!==null&&(pn[mn++]=yr,pn[mn++]=vr,pn[mn++]=gi,yr=t.id,vr=t.overflow,gi=e),e=og(e,r.children),e.flags|=4096,e)}function Pv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ep(t.return,e,n)}function kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function VE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pv(t,n,e);else if(t.tag===19)Pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kf(e,!0,n,null,i);break;case"together":kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yx(t,e,n){switch(e.tag){case 3:OE(e),Ro();break;case 5:lE(e);break;case 1:en(e.type)&&Xc(e);break;case 4:Jm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(eh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?ME(t,e,n):(Pe(qe,qe.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);Pe(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return VE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,bE(t,e,n)}return Pr(t,e,n)}var LE,Pp,FE,UE;LE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pp=function(){};FE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ai(tr.current);var i=null;switch(n){case"input":s=Jf(t,s),r=Jf(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=tp(t,s),r=tp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qc)}rp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(dl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(dl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&De("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};UE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ma(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vx(t,e,n){var r=e.pendingProps;switch($m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return en(e.type)&&Yc(),Dt(e),null;case 3:return r=e.stateNode,No(),Ve(Zt),Ve(Ft),eg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Fp(Pn),Pn=null))),Pp(t,e),Dt(e),null;case 5:Zm(e);var s=ai(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)FE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Dt(e),null}if(t=ai(tr.current),Zu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zn]=e,r[El]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ba.length;s++)De(Ba[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Uy(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":By(r,i),De("invalid",r)}rp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ju(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ju(r.textContent,a,t),s=["children",""+a]):dl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":qu(r),jy(r,i,!0);break;case"textarea":qu(r),zy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zn]=e,t[El]=r,LE(t,e,!1,!1),e.stateNode=t;e:{switch(o=sp(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ba.length;s++)De(Ba[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":Uy(t,r),s=Jf(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),De("invalid",t);break;case"textarea":By(t,r),s=tp(t,r),De("invalid",t);break;default:s=r}rp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?gT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fl(t,l):typeof l=="number"&&fl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&De("scroll",t):l!=null&&Pm(t,i,l,o))}switch(n){case"input":qu(t),jy(t,r,!1);break;case"textarea":qu(t),zy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?po(t,!!r.multiple,i,!1):r.defaultValue!=null&&po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)UE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ai(Il.current),ai(tr.current),Zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zn]=e,(i=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Ju(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ju(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zn]=e,e.stateNode=r}return Dt(e),null;case 13:if(Ve(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&ln!==null&&e.mode&1&&!(e.flags&128))rE(),Ro(),e.flags|=98560,i=!1;else if(i=Zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Zn]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Pn!==null&&(Fp(Pn),Pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?dt===0&&(dt=3):dg())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return No(),Pp(t,e),t===null&&wl(e.stateNode.containerInfo),Dt(e),null;case 10:return Qm(e.type._context),Dt(e),null;case 17:return en(e.type)&&Yc(),Dt(e),null;case 19:if(Ve(qe),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ma(i,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rh(t),o!==null){for(e.flags|=128,Ma(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>Do&&(e.flags|=128,r=!0,Ma(i,!1),e.lanes=4194304)}else{if(!r)if(t=rh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ma(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Be)return Dt(e),null}else 2*rt()-i.renderingStartTime>Do&&n!==1073741824&&(e.flags|=128,r=!0,Ma(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=qe.current,Pe(qe,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return hg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function wx(t,e){switch($m(e),e.tag){case 1:return en(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Ve(Zt),Ve(Ft),eg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zm(e),null;case 13:if(Ve(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(qe),null;case 4:return No(),null;case 10:return Qm(e.type._context),null;case 22:case 23:return hg(),null;case 24:return null;default:return null}}var nc=!1,Vt=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,X=null;function lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Np(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Nv=!1;function Ex(t,e){if(pp=Hc,t=qT(),Wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mp={focusedElem:t,selectionRange:n},Hc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,I=_.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?T:xn(e.type,T),I);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Xe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return _=Nv,Nv=!1,_}function el(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Np(e,n,i)}s=s.next}while(s!==r)}}function ad(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jE(t){var e=t.alternate;e!==null&&(t.alternate=null,jE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[El],delete e[yp],delete e[sx],delete e[ix])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BE(t){return t.tag===5||t.tag===3||t.tag===4}function bv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qc));else if(r!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}var Ct=null,Rn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)zE(t,e,n),n=n.sibling}function zE(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(Zh,n)}catch{}switch(n.tag){case 5:Vt||lo(n,e);case 6:var r=Ct,s=Rn;Ct=null,Xr(t,e,n),Ct=r,Rn=s,Ct!==null&&(Rn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Rn?(t=Ct,n=n.stateNode,t.nodeType===8?wf(t.parentNode,n):t.nodeType===1&&wf(t,n),_l(t)):wf(Ct,n.stateNode));break;case 4:r=Ct,s=Rn,Ct=n.stateNode.containerInfo,Rn=!0,Xr(t,e,n),Ct=r,Rn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Np(n,e,o),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!Vt&&(lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Xr(t,e,n),Vt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function Dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tx),e.forEach(function(r){var s=Nx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Rn=!1;break e;case 3:Ct=a.stateNode.containerInfo,Rn=!0;break e;case 4:Ct=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(Ct===null)throw Error(z(160));zE(i,o,s),Ct=null,Rn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Xe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WE(e,t),e=e.sibling}function WE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Yn(t),r&4){try{el(3,t,t.return),ad(3,t)}catch(T){Xe(t,t.return,T)}try{el(5,t,t.return)}catch(T){Xe(t,t.return,T)}}break;case 1:kn(e,t),Yn(t),r&512&&n!==null&&lo(n,n.return);break;case 5:if(kn(e,t),Yn(t),r&512&&n!==null&&lo(n,n.return),t.flags&32){var s=t.stateNode;try{fl(s,"")}catch(T){Xe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hT(s,i),sp(a,o);var c=sp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?gT(s,d):h==="dangerouslySetInnerHTML"?pT(s,d):h==="children"?fl(s,d):Pm(s,h,d,c)}switch(a){case"input":Zf(s,i);break;case"textarea":dT(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?po(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?po(s,!!i.multiple,i.defaultValue,!0):po(s,!!i.multiple,i.multiple?[]:"",!1))}s[El]=i}catch(T){Xe(t,t.return,T)}}break;case 6:if(kn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Xe(t,t.return,T)}}break;case 3:if(kn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(T){Xe(t,t.return,T)}break;case 4:kn(e,t),Yn(t);break;case 13:kn(e,t),Yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ug=rt())),r&4&&Dv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(c=Vt)||h,kn(e,t),Vt=c):kn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(d=X=h;X!==null;){switch(p=X,m=p.child,p.tag){case 0:case 11:case 14:case 15:el(4,p,p.return);break;case 1:lo(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(T){Xe(r,n,T)}}break;case 5:lo(p,p.return);break;case 22:if(p.memoizedState!==null){Mv(d);continue}}m!==null?(m.return=p,X=m):Mv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mT("display",o))}catch(T){Xe(t,t.return,T)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(T){Xe(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kn(e,t),Yn(t),r&4&&Dv(t);break;case 21:break;default:kn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fl(s,""),r.flags&=-33);var i=bv(t);Op(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bv(t);Dp(t,a,o);break;default:throw Error(z(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Sx(t,e,n){X=t,qE(t)}function qE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=nc;var c=Vt;if(nc=o,(Vt=l)&&!c)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Vv(s):l!==null?(l.return=o,X=l):Vv(s);for(;i!==null;)X=i,qE(i),i=i.sibling;X=s,nc=a,Vt=c}Ov(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Ov(t)}}function Ov(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||ad(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&_l(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Vt||e.flags&512&&bp(e)}catch(p){Xe(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Mv(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Vv(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ad(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Xe(e,s,l)}}var i=e.return;try{bp(e)}catch(l){Xe(e,i,l)}break;case 5:var o=e.return;try{bp(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var Ix=Math.ceil,oh=Lr.ReactCurrentDispatcher,ag=Lr.ReactCurrentOwner,wn=Lr.ReactCurrentBatchConfig,Ee=0,Tt=null,at=null,xt=0,on=0,uo=Bs(0),dt=0,xl=null,yi=0,ld=0,lg=0,tl=null,Yt=null,ug=0,Do=1/0,pr=null,ah=!1,Mp=null,ys=null,rc=!1,cs=null,lh=0,nl=0,Vp=null,Cc=-1,Ac=0;function $t(){return Ee&6?rt():Cc!==-1?Cc:Cc=rt()}function vs(t){return t.mode&1?Ee&2&&xt!==0?xt&-xt:ax.transition!==null?(Ac===0&&(Ac=xT()),Ac):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:MT(t.type)),t):1}function Ln(t,e,n,r){if(50<nl)throw nl=0,Vp=null,Error(z(185));ru(t,n,r),(!(Ee&2)||t!==Tt)&&(t===Tt&&(!(Ee&2)&&(ld|=n),dt===4&&is(t,xt)),tn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Do=rt()+500,sd&&zs()))}function tn(t,e){var n=t.callbackNode;ak(t,e);var r=$c(t,t===Tt?xt:0);if(r===0)n!==null&&$y(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$y(n),e===1)t.tag===0?ox(Lv.bind(null,t)):eE(Lv.bind(null,t)),nx(function(){!(Ee&6)&&zs()}),n=null;else{switch(RT(r)){case 1:n=Mm;break;case 4:n=AT;break;case 16:n=qc;break;case 536870912:n=kT;break;default:n=qc}n=JE(n,$E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $E(t,e){if(Cc=-1,Ac=0,Ee&6)throw Error(z(327));var n=t.callbackNode;if(vo()&&t.callbackNode!==n)return null;var r=$c(t,t===Tt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uh(t,r);else{e=r;var s=Ee;Ee|=2;var i=GE();(Tt!==t||xt!==e)&&(pr=null,Do=rt()+500,hi(t,e));do try{kx();break}catch(a){HE(t,a)}while(!0);Km(),oh.current=i,Ee=s,at!==null?e=0:(Tt=null,xt=0,e=dt)}if(e!==0){if(e===2&&(s=up(t),s!==0&&(r=s,e=Lp(t,s))),e===1)throw n=xl,hi(t,0),is(t,r),tn(t,rt()),n;if(e===6)is(t,r);else{if(s=t.current.alternate,!(r&30)&&!Cx(s)&&(e=uh(t,r),e===2&&(i=up(t),i!==0&&(r=i,e=Lp(t,i))),e===1))throw n=xl,hi(t,0),is(t,r),tn(t,rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ni(t,Yt,pr);break;case 3:if(is(t,r),(r&130023424)===r&&(e=ug+500-rt(),10<e)){if($c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_p(ni.bind(null,t,Yt,pr),e);break}ni(t,Yt,pr);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ix(r/1960))-r,10<r){t.timeoutHandle=_p(ni.bind(null,t,Yt,pr),r);break}ni(t,Yt,pr);break;case 5:ni(t,Yt,pr);break;default:throw Error(z(329))}}}return tn(t,rt()),t.callbackNode===n?$E.bind(null,t):null}function Lp(t,e){var n=tl;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=uh(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&Fp(e)),t}function Fp(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function Cx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~lg,e&=~ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function Lv(t){if(Ee&6)throw Error(z(327));vo();var e=$c(t,0);if(!(e&1))return tn(t,rt()),null;var n=uh(t,e);if(t.tag!==0&&n===2){var r=up(t);r!==0&&(e=r,n=Lp(t,r))}if(n===1)throw n=xl,hi(t,0),is(t,e),tn(t,rt()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,Yt,pr),tn(t,rt()),null}function cg(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Do=rt()+500,sd&&zs())}}function vi(t){cs!==null&&cs.tag===0&&!(Ee&6)&&vo();var e=Ee;Ee|=1;var n=wn.transition,r=Ie;try{if(wn.transition=null,Ie=1,t)return t()}finally{Ie=r,wn.transition=n,Ee=e,!(Ee&6)&&zs()}}function hg(){on=uo.current,Ve(uo)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tx(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch($m(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yc();break;case 3:No(),Ve(Zt),Ve(Ft),eg();break;case 5:Zm(r);break;case 4:No();break;case 13:Ve(qe);break;case 19:Ve(qe);break;case 10:Qm(r.type._context);break;case 22:case 23:hg()}n=n.return}if(Tt=t,at=t=ws(t.current,null),xt=on=e,dt=0,xl=null,lg=ld=yi=0,Yt=tl=null,oi!==null){for(e=0;e<oi.length;e++)if(n=oi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}oi=null}return t}function HE(t,e){do{var n=at;try{if(Km(),Ec.current=ih,sh){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sh=!1}if(_i=0,vt=ct=He=null,Za=!1,Cl=0,ag.current=null,n===null||n.return===null){dt=1,xl=e,at=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Iv(o);if(m!==null){m.flags&=-257,Cv(m,o,a,i,e),m.mode&1&&Sv(i,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var T=new Set;T.add(l),e.updateQueue=T}else _.add(l);break e}else{if(!(e&1)){Sv(i,c,e),dg();break e}l=Error(z(426))}}else if(Be&&a.mode&1){var I=Iv(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Cv(I,o,a,i,e),Hm(bo(l,a));break e}}i=l=bo(l,a),dt!==4&&(dt=2),tl===null?tl=[i]:tl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=RE(i,l,e);_v(i,v);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ys===null||!ys.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=PE(i,a,e);_v(i,b);break e}}i=i.return}while(i!==null)}QE(n)}catch(P){e=P,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function GE(){var t=oh.current;return oh.current=ih,t===null?ih:t}function dg(){(dt===0||dt===3||dt===2)&&(dt=4),Tt===null||!(yi&268435455)&&!(ld&268435455)||is(Tt,xt)}function uh(t,e){var n=Ee;Ee|=2;var r=GE();(Tt!==t||xt!==e)&&(pr=null,hi(t,e));do try{Ax();break}catch(s){HE(t,s)}while(!0);if(Km(),Ee=n,oh.current=r,at!==null)throw Error(z(261));return Tt=null,xt=0,dt}function Ax(){for(;at!==null;)KE(at)}function kx(){for(;at!==null&&!JA();)KE(at)}function KE(t){var e=XE(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?QE(t):at=e,ag.current=null}function QE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wx(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(n=vx(n,e,on),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function ni(t,e,n){var r=Ie,s=wn.transition;try{wn.transition=null,Ie=1,xx(t,e,n,r)}finally{wn.transition=s,Ie=r}return null}function xx(t,e,n,r){do vo();while(cs!==null);if(Ee&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lk(t,i),t===Tt&&(at=Tt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rc||(rc=!0,JE(qc,function(){return vo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var o=Ie;Ie=1;var a=Ee;Ee|=4,ag.current=null,Ex(t,n),WE(n,t),Kk(mp),Hc=!!pp,mp=pp=null,t.current=n,Sx(n),ZA(),Ee=a,Ie=o,wn.transition=i}else t.current=n;if(rc&&(rc=!1,cs=t,lh=s),i=t.pendingLanes,i===0&&(ys=null),nk(n.stateNode),tn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ah)throw ah=!1,t=Mp,Mp=null,t;return lh&1&&t.tag!==0&&vo(),i=t.pendingLanes,i&1?t===Vp?nl++:(nl=0,Vp=t):nl=0,zs(),null}function vo(){if(cs!==null){var t=RT(lh),e=wn.transition,n=Ie;try{if(wn.transition=null,Ie=16>t?16:t,cs===null)var r=!1;else{if(t=cs,cs=null,lh=0,Ee&6)throw Error(z(331));var s=Ee;for(Ee|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:el(8,h,i)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var p=h.sibling,m=h.return;if(jE(h),h===c){X=null;break}if(p!==null){p.return=m,X=p;break}X=m}}}var _=i.alternate;if(_!==null){var T=_.child;if(T!==null){_.child=null;do{var I=T.sibling;T.sibling=null,T=I}while(T!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:el(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,X=v;break e}X=i.return}}var w=t.current;for(X=w;X!==null;){o=X;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,X=S;else e:for(o=w;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ad(9,a)}}catch(P){Xe(a,a.return,P)}if(a===o){X=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,X=b;break e}X=a.return}}if(Ee=s,zs(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(Zh,t)}catch{}r=!0}return r}finally{Ie=n,wn.transition=e}}return!1}function Fv(t,e,n){e=bo(n,e),e=RE(t,e,1),t=_s(t,e,1),e=$t(),t!==null&&(ru(t,1,e),tn(t,e))}function Xe(t,e,n){if(t.tag===3)Fv(t,t,n);else for(;e!==null;){if(e.tag===3){Fv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=bo(n,t),t=PE(e,t,1),e=_s(e,t,1),t=$t(),e!==null&&(ru(e,1,t),tn(e,t));break}}e=e.return}}function Rx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(xt&n)===n&&(dt===4||dt===3&&(xt&130023424)===xt&&500>rt()-ug?hi(t,0):lg|=n),tn(t,e)}function YE(t,e){e===0&&(t.mode&1?(e=Gu,Gu<<=1,!(Gu&130023424)&&(Gu=4194304)):e=1);var n=$t();t=Rr(t,e),t!==null&&(ru(t,e,n),tn(t,n))}function Px(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YE(t,n)}function Nx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),YE(t,n)}var XE;XE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,yx(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Be&&e.flags&1048576&&tE(e,Zc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ic(t,e),t=e.pendingProps;var s=xo(e,Ft.current);yo(e,n),s=ng(null,e,r,t,s,n);var i=rg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(i=!0,Xc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xm(e),s.updater=od,e.stateNode=s,s._reactInternals=e,Ip(e,r,t,n),e=kp(null,e,r,!0,i,n)):(e.tag=0,Be&&i&&qm(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ic(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Dx(r),t=xn(r,t),s){case 0:e=Ap(null,e,r,t,n);break e;case 1:e=xv(null,e,r,t,n);break e;case 11:e=Av(null,e,r,t,n);break e;case 14:e=kv(null,e,r,xn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Ap(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),xv(t,e,r,s,n);case 3:e:{if(OE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,aE(t,e),nh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bo(Error(z(423)),e),e=Rv(t,e,r,n,s);break e}else if(r!==s){s=bo(Error(z(424)),e),e=Rv(t,e,r,n,s);break e}else for(ln=gs(e.stateNode.containerInfo.firstChild),un=e,Be=!0,Pn=null,n=iE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),r===s){e=Pr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return lE(e),t===null&&Tp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gp(r,s)?o=null:i!==null&&gp(r,i)&&(e.flags|=32),DE(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&Tp(e),null;case 13:return ME(t,e,n);case 4:return Jm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Po(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Av(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(eh,r._currentValue),r._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===s.children&&!Zt.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Er(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ep(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ep(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yo(e,n),s=Sn(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=xn(r,e.pendingProps),s=xn(r.type,s),kv(t,e,r,s,n);case 15:return NE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Ic(t,e),e.tag=1,en(r)?(t=!0,Xc(e)):t=!1,yo(e,n),xE(e,r,s),Ip(e,r,s,n),kp(null,e,r,!0,t,n);case 19:return VE(t,e,n);case 22:return bE(t,e,n)}throw Error(z(156,e.tag))};function JE(t,e){return CT(t,e)}function bx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,e,n,r){return new bx(t,e,n,r)}function fg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dx(t){if(typeof t=="function")return fg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bm)return 11;if(t===Dm)return 14}return 2}function ws(t,e){var n=t.alternate;return n===null?(n=yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")fg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zi:return di(n.children,s,i,e);case Nm:o=8,s|=8;break;case Kf:return t=yn(12,n,e,s|2),t.elementType=Kf,t.lanes=i,t;case Qf:return t=yn(13,n,e,s),t.elementType=Qf,t.lanes=i,t;case Yf:return t=yn(19,n,e,s),t.elementType=Yf,t.lanes=i,t;case lT:return ud(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oT:o=10;break e;case aT:o=9;break e;case bm:o=11;break e;case Dm:o=14;break e;case ts:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=yn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function di(t,e,n,r){return t=yn(7,t,r,e),t.lanes=n,t}function ud(t,e,n,r){return t=yn(22,t,r,e),t.elementType=lT,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=yn(6,t,null,e),t.lanes=n,t}function Rf(t,e,n){return e=yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ox(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uf(0),this.expirationTimes=uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pg(t,e,n,r,s,i,o,a,l){return t=new Ox(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xm(i),t}function Mx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZE(t){if(!t)return Rs;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(en(n))return ZT(t,n,e)}return e}function e1(t,e,n,r,s,i,o,a,l){return t=pg(n,r,!0,t,s,i,o,a,l),t.context=ZE(null),n=t.current,r=$t(),s=vs(n),i=Er(r,s),i.callback=e??null,_s(n,i,s),t.current.lanes=s,ru(t,s,r),tn(t,r),t}function cd(t,e,n,r){var s=e.current,i=$t(),o=vs(s);return n=ZE(n),e.context===null?e.context=n:e.pendingContext=n,e=Er(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_s(s,e,o),t!==null&&(Ln(t,s,o,i),Tc(t,s,o)),o}function ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mg(t,e){Uv(t,e),(t=t.alternate)&&Uv(t,e)}function Vx(){return null}var t1=typeof reportError=="function"?reportError:function(t){console.error(t)};function gg(t){this._internalRoot=t}hd.prototype.render=gg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));cd(t,e,null,null)};hd.prototype.unmount=gg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vi(function(){cd(null,t,null,null)}),e[xr]=null}};function hd(t){this._internalRoot=t}hd.prototype.unstable_scheduleHydration=function(t){if(t){var e=bT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&OT(t)}};function _g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jv(){}function Lx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ch(o);i.call(c)}}var o=e1(e,r,t,0,null,!1,!1,"",jv);return t._reactRootContainer=o,t[xr]=o.current,wl(t.nodeType===8?t.parentNode:t),vi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ch(l);a.call(c)}}var l=pg(t,0,!1,null,null,!1,!1,"",jv);return t._reactRootContainer=l,t[xr]=l.current,wl(t.nodeType===8?t.parentNode:t),vi(function(){cd(e,l,n,r)}),l}function fd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ch(o);a.call(l)}}cd(e,o,t,s)}else o=Lx(n,e,t,s,r);return ch(o)}PT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ja(e.pendingLanes);n!==0&&(Vm(e,n|1),tn(e,rt()),!(Ee&6)&&(Do=rt()+500,zs()))}break;case 13:vi(function(){var r=Rr(t,1);if(r!==null){var s=$t();Ln(r,t,1,s)}}),mg(t,1)}};Lm=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var n=$t();Ln(e,t,134217728,n)}mg(t,134217728)}};NT=function(t){if(t.tag===13){var e=vs(t),n=Rr(t,e);if(n!==null){var r=$t();Ln(n,t,e,r)}mg(t,e)}};bT=function(){return Ie};DT=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};op=function(t,e,n){switch(e){case"input":if(Zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rd(r);if(!s)throw Error(z(90));cT(r),Zf(r,s)}}}break;case"textarea":dT(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};vT=cg;wT=vi;var Fx={usingClientEntryPoint:!1,Events:[iu,ro,rd,_T,yT,cg]},Va={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ux={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ST(t),t===null?null:t.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||Vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{Zh=sc.inject(Ux),er=sc}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(z(200));return Mx(t,e,null,n)};dn.createRoot=function(t,e){if(!_g(t))throw Error(z(299));var n=!1,r="",s=t1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pg(t,1,!1,null,null,n,!1,r,s),t[xr]=e.current,wl(t.nodeType===8?t.parentNode:t),new gg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=ST(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return vi(t)};dn.hydrate=function(t,e,n){if(!dd(e))throw Error(z(200));return fd(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!_g(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=t1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=e1(e,null,t,1,n??null,s,!1,i,o),t[xr]=e.current,wl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hd(e)};dn.render=function(t,e,n){if(!dd(e))throw Error(z(200));return fd(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!dd(t))throw Error(z(40));return t._reactRootContainer?(vi(function(){fd(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};dn.unstable_batchedUpdates=cg;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return fd(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function n1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n1)}catch(t){console.error(t)}}n1(),nT.exports=dn;var jx=nT.exports,Bv=jx;Hf.createRoot=Bv.createRoot,Hf.hydrateRoot=Bv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rl(){return Rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rl.apply(this,arguments)}var hs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hs||(hs={}));const zv="popstate";function Bx(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Up("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hh(s)}return Wx(e,n,null,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zx(){return Math.random().toString(36).substr(2,8)}function Wv(t,e){return{usr:t.state,key:t.key,idx:e}}function Up(t,e,n,r){return n===void 0&&(n=null),Rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xo(e):e,{state:n,key:e&&e.key||r||zx()})}function hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wx(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=hs.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Rl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=hs.Pop;let I=h(),v=I==null?null:I-c;c=I,l&&l({action:a,location:T.location,delta:v})}function p(I,v){a=hs.Push;let w=Up(T.location,I,v);c=h()+1;let S=Wv(w,c),b=T.createHref(w);try{o.pushState(S,"",b)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(b)}i&&l&&l({action:a,location:T.location,delta:1})}function m(I,v){a=hs.Replace;let w=Up(T.location,I,v);c=h();let S=Wv(w,c),b=T.createHref(w);o.replaceState(S,"",b),i&&l&&l({action:a,location:T.location,delta:0})}function _(I){let v=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof I=="string"?I:hh(I);return w=w.replace(/ $/,"%20"),st(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let T={get action(){return a},get location(){return t(s,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(zv,d),l=I,()=>{s.removeEventListener(zv,d),l=null}},createHref(I){return e(s,I)},createURL:_,encodeLocation(I){let v=_(I);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(I){return o.go(I)}};return T}var qv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qv||(qv={}));function qx(t,e,n){return n===void 0&&(n="/"),$x(t,e,n)}function $x(t,e,n,r){let s=typeof e=="string"?Xo(e):e,i=vg(s.pathname||"/",n);if(i==null)return null;let o=r1(t);Hx(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=sR(i);a=tR(o[l],c)}return a}function r1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(st(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ts([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(st(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),r1(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Zx(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of s1(i.path))s(i,o,l)}),e}function s1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=s1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Gx=/^:[\w-]+$/,Kx=3,Qx=2,Yx=1,Xx=10,Jx=-2,$v=t=>t==="*";function Zx(t,e){let n=t.split("/"),r=n.length;return n.some($v)&&(r+=Jx),e&&(r+=Qx),n.filter(s=>!$v(s)).reduce((s,i)=>s+(Gx.test(i)?Kx:i===""?Yx:Xx),r)}function eR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function tR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=nR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ts([i,d.pathname]),pathnameBase:uR(Ts([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=Ts([i,d.pathnameBase]))}return o}function nR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let T=a[d]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const _=a[d];return m&&!_?c[p]=void 0:c[p]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function rR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function sR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const iR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oR=t=>iR.test(t);function aR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xo(t):t,i;if(n)if(oR(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),yg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Hv(n.substring(1),"/"):i=Hv(n,e)}else i=e;return{pathname:i,search:cR(r),hash:hR(s)}}function Hv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wg(t,e){let n=lR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xo(t):(s=Rl({},t),st(!s.pathname||!s.pathname.includes("?"),Pf("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),Pf("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),Pf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=aR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),uR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const i1=["post","put","patch","delete"];new Set(i1);const fR=["get",...i1];new Set(fR);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pl.apply(this,arguments)}const Eg=U.createContext(null),pR=U.createContext(null),Ws=U.createContext(null),pd=U.createContext(null),Fr=U.createContext({outlet:null,matches:[],isDataRoute:!1}),o1=U.createContext(null);function mR(t,e){let{relative:n}=e===void 0?{}:e;Jo()||st(!1);let{basename:r,navigator:s}=U.useContext(Ws),{hash:i,pathname:o,search:a}=l1(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ts([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Jo(){return U.useContext(pd)!=null}function Zo(){return Jo()||st(!1),U.useContext(pd).location}function a1(t){U.useContext(Ws).static||U.useLayoutEffect(t)}function au(){let{isDataRoute:t}=U.useContext(Fr);return t?PR():gR()}function gR(){Jo()||st(!1);let t=U.useContext(Eg),{basename:e,future:n,navigator:r}=U.useContext(Ws),{matches:s}=U.useContext(Fr),{pathname:i}=Zo(),o=JSON.stringify(wg(s,n.v7_relativeSplatPath)),a=U.useRef(!1);return a1(()=>{a.current=!0}),U.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Tg(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ts([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}const _R=U.createContext(null);function yR(t){let e=U.useContext(Fr).outlet;return e&&U.createElement(_R.Provider,{value:t},e)}function l1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(Ws),{matches:s}=U.useContext(Fr),{pathname:i}=Zo(),o=JSON.stringify(wg(s,r.v7_relativeSplatPath));return U.useMemo(()=>Tg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function vR(t,e){return wR(t,e)}function wR(t,e,n,r){Jo()||st(!1);let{navigator:s}=U.useContext(Ws),{matches:i}=U.useContext(Fr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zo(),h;if(e){var d;let I=typeof e=="string"?Xo(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||st(!1),h=I}else h=c;let p=h.pathname||"/",m=p;if(l!=="/"){let I=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=qx(t,{pathname:m}),T=CR(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Ts([l,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Ts([l,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,n,r);return e&&T?U.createElement(pd.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:hs.Pop}},T):T}function TR(){let t=RR(),e=dR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:s},n):null,null)}const ER=U.createElement(TR,null);class SR extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Fr.Provider,{value:this.props.routeContext},U.createElement(o1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IR(t){let{routeContext:e,match:n,children:r}=t,s=U.useContext(Eg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Fr.Provider,{value:e},r)}function CR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||st(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=n,_=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let m,_=!1,T=null,I=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,T=d.route.errorElement||ER,l&&(c<0&&p===0?(NR("route-fallback"),_=!0,I=null):c===p&&(_=!0,I=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let S;return m?S=T:_?S=I:d.route.Component?S=U.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,U.createElement(IR,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?U.createElement(SR,{location:n.location,revalidation:n.revalidation,component:T,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var u1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(u1||{}),c1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(c1||{});function AR(t){let e=U.useContext(Eg);return e||st(!1),e}function kR(t){let e=U.useContext(pR);return e||st(!1),e}function xR(t){let e=U.useContext(Fr);return e||st(!1),e}function h1(t){let e=xR(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function RR(){var t;let e=U.useContext(o1),n=kR(),r=h1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PR(){let{router:t}=AR(u1.UseNavigateStable),e=h1(c1.UseNavigateStable),n=U.useRef(!1);return a1(()=>{n.current=!0}),U.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Pl({fromRouteId:e},i)))},[t,e])}const Gv={};function NR(t,e,n){Gv[t]||(Gv[t]=!0)}function bR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nf(t){let{to:e,replace:n,state:r,relative:s}=t;Jo()||st(!1);let{future:i,static:o}=U.useContext(Ws),{matches:a}=U.useContext(Fr),{pathname:l}=Zo(),c=au(),h=Tg(e,wg(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return U.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function DR(t){return yR(t.context)}function es(t){st(!1)}function OR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=hs.Pop,navigator:i,static:o=!1,future:a}=t;Jo()&&st(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:i,static:o,future:Pl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Xo(r));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:_="default"}=r,T=U.useMemo(()=>{let I=vg(h,l);return I==null?null:{location:{pathname:I,search:d,hash:p,state:m,key:_},navigationType:s}},[l,h,d,p,m,_,s]);return T==null?null:U.createElement(Ws.Provider,{value:c},U.createElement(pd.Provider,{children:n,value:T}))}function MR(t){let{children:e,location:n}=t;return vR(jp(e),n)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,s)=>{if(!U.isValidElement(r))return;let i=[...e,s];if(r.type===U.Fragment){n.push.apply(n,jp(r.props.children,i));return}r.type!==es&&st(!1),!r.props.index||!r.props.children||st(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function VR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function LR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FR(t,e){return t.button===0&&(!e||e==="_self")&&!LR(t)}const UR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jR="6";try{window.__reactRouterVersion=jR}catch{}const BR="startTransition",Kv=RA[BR];function zR(t){let{basename:e,children:n,future:r,window:s}=t,i=U.useRef();i.current==null&&(i.current=Bx({window:s,v5Compat:!0}));let o=i.current,[a,l]=U.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=U.useCallback(d=>{c&&Kv?Kv(()=>l(d)):l(d)},[l,c]);return U.useLayoutEffect(()=>o.listen(h),[o,h]),U.useEffect(()=>bR(r),[r]),U.createElement(OR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const WR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ic=U.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=VR(e,UR),{basename:m}=U.useContext(Ws),_,T=!1;if(typeof c=="string"&&qR.test(c)&&(_=c,WR))try{let S=new URL(window.location.href),b=c.startsWith("//")?new URL(S.protocol+c):new URL(c),P=vg(b.pathname,m);b.origin===S.origin&&P!=null?c=P+b.search+b.hash:T=!0}catch{}let I=mR(c,{relative:s}),v=$R(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function w(S){r&&r(S),S.defaultPrevented||v(S)}return U.createElement("a",Bp({},p,{href:_||I,onClick:T||i?r:w,ref:n,target:l}))});var Qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qv||(Qv={}));var Yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yv||(Yv={}));function $R(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=au(),c=Zo(),h=l1(t,{relative:o});return U.useCallback(d=>{if(FR(d,n)){d.preventDefault();let p=r!==void 0?r:hh(c)===hh(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),gt=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>U.createElement("svg",{ref:h,...HR,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${GR(t)}`,a].join(" "),...c},[...e.map(([d,p])=>U.createElement(d,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=gt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=gt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=gt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=gt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=gt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=gt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=gt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=gt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=gt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=gt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=gt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=gt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=gt("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=gt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=gt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=gt("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=gt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),cP=()=>{const{user:t}=U.useContext(zi),n=(()=>{var i;((i=t==null?void 0:t.traumas)==null?void 0:i.length)>0;const r=[...(t==null?void 0:t.positive)||[],...(t==null?void 0:t.traumas)||[]],s=[{type:"music",title:"Melancholy Lo-Fi",subtitle:"To soothe your anxiety",icon:O.jsx(bf,{}),url:"https://open.spotify.com/playlist/37i9dQZF1DX8Ueb9CidzhR"},{type:"news",title:"Understanding Attachment",subtitle:"Psychology Today",icon:O.jsx(aP,{}),url:"https://www.psychologytoday.com"},{type:"podcast",title:"The Trauma Cleanup",subtitle:"Episode 4: Healing",icon:O.jsx(Xv,{}),url:"https://open.spotify.com/show/2v8IqRTMhM5vL6z8v6m5kO"}];return(r.includes("Anxiety")||r.includes("Melancholic"))&&s.unshift({type:"music",title:"Deep Focus Ambient",subtitle:"Calm for the mind",icon:O.jsx(bf,{}),url:"https://open.spotify.com/playlist/37i9dQZF1DX4sWspn04Zq1"}),(r.includes("Creative Soul")||r.includes("Passionate"))&&s.unshift({type:"podcast",title:"Creative Pep Talk",subtitle:"Fuel your fire",icon:O.jsx(Xv,{}),url:"https://open.spotify.com/show/6pC9C7vN7Y5XqYpY9n5J2Y"}),s})();return O.jsxs("div",{className:"page-container",children:[O.jsx("h1",{style:{color:"var(--color-secondary)",fontSize:"2.2rem",marginBottom:"2rem",textAlign:"center",fontWeight:"800"},children:"Welcome Home"}),O.jsxs("section",{style:{marginBottom:"3rem"},children:[O.jsx("h3",{style:{marginBottom:"1.2rem",color:"var(--color-accent)",textTransform:"uppercase",fontSize:"0.8rem",letterSpacing:"2px",fontWeight:"bold"},children:"Daily Mood Mix"}),O.jsx("div",{style:{display:"flex",overflowX:"auto",gap:"1.2rem",paddingBottom:"1rem",scrollSnapType:"x mandatory"},children:[1,2,3].map(r=>O.jsxs("div",{style:{minWidth:"160px",height:"160px",flex:"0 0 auto",scrollSnapAlign:"start",backgroundColor:"rgba(100, 255, 218, 0.05)",borderRadius:"16px",display:"flex",flexDirection:"column",justifyContent:"flex-end",padding:"15px",border:"1px solid rgba(100, 255, 218, 0.1)",position:"relative",overflow:"hidden"},children:[O.jsx("div",{style:{position:"absolute",top:"15px",left:"15px",color:"var(--color-accent)"},children:O.jsx(bf,{size:20})}),O.jsxs("span",{style:{fontWeight:"bold",fontSize:"1rem"},children:["Vibe ",r]})]},r))})]}),O.jsxs("section",{children:[O.jsx("h3",{style:{marginBottom:"1.2rem",color:"var(--color-accent)",textTransform:"uppercase",fontSize:"0.8rem",letterSpacing:"2px",fontWeight:"bold"},children:"Curated For Your Soul"}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.2rem"},children:n.map((r,s)=>O.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"rgba(255,255,255,0.03)",padding:"1.2rem",borderRadius:"16px",display:"flex",alignItems:"center",gap:"15px",border:"1px solid rgba(255,255,255,0.05)",transition:"transform 0.2s, background 0.2s",cursor:"pointer",textDecoration:"none",color:"inherit"},onMouseOver:i=>i.currentTarget.style.backgroundColor="rgba(255,255,255,0.06)",onMouseOut:i=>i.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)",children:[O.jsx("div",{style:{width:"48px",height:"48px",minWidth:"48px",borderRadius:"12px",backgroundColor:"rgba(100,255,218,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-accent)"},children:r.icon}),O.jsxs("div",{style:{overflow:"hidden"},children:[O.jsx("div",{style:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"white"},children:r.title}),O.jsx("div",{style:{fontSize:"0.85rem",color:"var(--color-text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.subtitle})]})]},s))})]})]})},Jv=[{id:2,name:"Elena",age:23,bio:"Trying to find peace in chaos.",avatar:"https://via.placeholder.com/500/0a192f/ffd700?text=Elena",traumas:["Anxiety","Trust Issues"],positive:["Empathetic","Creative"]},{id:3,name:"Marcus",age:27,bio:"Music is my escape.",avatar:"https://via.placeholder.com/500/0a192f/ffd700?text=Marcus",traumas:["Loneliness","Burnout"],positive:["Resilient","Passionate"]},{id:4,name:"Sophia",age:25,bio:"Art heals everything.",avatar:"https://via.placeholder.com/500/0a192f/ffd700?text=Sophia",traumas:["Perfectionism","Sensitive"],positive:["Kind","Artistic"]}],hP=()=>{const{matches:t,setMatches:e,user:n}=U.useContext(zi),[r,s]=U.useState(0),i=au(),o=r<Jv.length?Jv[r]:null,a=(c,h)=>{let d=0,p=[];if(!c||!h)return{score:0,reasons:[]};if(c!=null&&c.traumas&&(h!=null&&h.traumas)){const m=c.traumas.filter(_=>h.traumas.includes(_));m.length>0&&(d+=m.length*25,p.push(...m))}if(c!=null&&c.positive&&(h!=null&&h.positive)){const m=c.positive.filter(_=>h.positive.includes(_));m.length>0&&(d+=m.length*15,p.push(...m))}return d+=Math.random()*30,{score:d,reasons:p}},l=c=>{if(!n){alert("Please log in to match.");return}if(c==="right"){const{score:h,reasons:d}=a(n,o);if(h>20){const m=d.length>0?d[0]:"Mysterious Connection";t.find(_=>_.id===o.id)||(e([...t,{...o,matchReason:m,matchScore:h}]),alert(`It's a Match! Bond Strength: ${Math.round(h)}%`))}else console.log("Score too low:",h)}s(h=>h+1)};return n?o?O.jsxs("div",{className:"page-container",style:{height:"100%",display:"flex",flexDirection:"column"},children:[O.jsx("h2",{style:{textAlign:"center",color:"var(--color-text)",marginBottom:"1rem",letterSpacing:"2px",textTransform:"uppercase",fontSize:"0.9rem"},children:"Discover Souls"}),O.jsxs("div",{style:{flex:1,width:"100%",backgroundColor:"var(--color-primary)",borderRadius:"20px",overflow:"hidden",position:"relative",boxShadow:"0 15px 35px rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column"},children:[O.jsx("img",{src:o.avatar,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover",opacity:.9}}),O.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,top:0,background:"linear-gradient(to top, rgba(2,12,27,1) 0%, rgba(2,12,27,0.6) 30%, transparent 100%)"}}),O.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"2rem 1.5rem",color:"white"},children:[O.jsxs("h3",{style:{fontSize:"2rem",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"10px",textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:[o.name,", ",o.age]}),O.jsxs("p",{style:{fontSize:"1.1rem",opacity:.9,lineHeight:1.4,marginBottom:"1rem"},children:['"',o.bio,'"']}),O.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[O.jsx("span",{style:{fontSize:"0.75rem",padding:"6px 12px",backgroundColor:"rgba(255, 215, 0, 0.15)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"20px",color:"var(--color-secondary)",fontWeight:"600",letterSpacing:"0.5px"},children:"HIDDEN DEPTHS"}),O.jsx("span",{style:{fontSize:"0.75rem",padding:"6px 12px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",backdropFilter:"blur(5px)"},children:o.positive[0]})]})]})]}),O.jsxs("div",{style:{height:"100px",display:"flex",justifyContent:"space-evenly",alignItems:"center",padding:"1rem 0"},children:[O.jsx("button",{onClick:()=>l("left"),className:"icon-btn",style:{width:"70px",height:"70px",backgroundColor:"rgba(255, 68, 68, 0.1)",border:"2px solid #ff4444",color:"#ff4444",boxShadow:"0 5px 20px rgba(255, 68, 68, 0.2)"},children:O.jsx(uP,{size:32})}),O.jsx("button",{onClick:()=>l("right"),className:"icon-btn",style:{width:"70px",height:"70px",backgroundColor:"rgba(100, 255, 218, 0.1)",border:"2px solid var(--color-accent)",color:"var(--color-accent)",boxShadow:"0 5px 20px rgba(100, 255, 218, 0.2)"},children:O.jsx(d1,{size:32})})]})]}):O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"2rem",textAlign:"center"},children:[O.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:O.jsx(KR,{size:40,color:"var(--color-text-muted)"})}),O.jsx("h2",{style:{color:"var(--color-secondary)"},children:"You've seen everyone!"}),O.jsx("p",{style:{color:"var(--color-text-muted)",marginBottom:"2rem"},children:"Check back later for more souls."}),O.jsx("button",{className:"btn btn-secondary",onClick:()=>s(0),children:"Review Again"})]}):O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"2rem",textAlign:"center"},children:[O.jsx("p",{children:"Please log in to start matching."}),O.jsx("button",{className:"btn",onClick:()=>i("/auth"),children:"Go to Login"})]})},f1="14.9.17",Zv=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),e0=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),zp=(t,e)=>({startTime:e,type:"setValue",value:t}),p1=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),m1=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),co=t=>t.type==="exponentialRampToValue",dh=t=>t.type==="linearRampToValue",rs=t=>co(t)||dh(t),Sg=t=>t.type==="setValue",mr=t=>t.type==="setValueCurve",fh=(t,e,n,r)=>{const s=t[e];return s===void 0?r:rs(s)||Sg(s)?s.value:mr(s)?s.values[s.values.length-1]:m1(n,fh(t,e-1,s.startTime,r),s)},t0=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:rs(n)?[n.endTime,n.value]:Sg(n)?[n.startTime,n.value]:mr(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,fh(t,e-1,n.startTime,s)],Wp=t=>t.type==="cancelAndHold",qp=t=>t.type==="cancelScheduledValues",Jr=t=>Wp(t)||qp(t)?t.cancelTime:co(t)||dh(t)?t.endTime:t.startTime,n0=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,r0=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),dP=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},fP=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return dP(r,s)},oc=t=>t.type==="setTarget";class pP{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Jr(e);if(Wp(e)||qp(e)){const r=this._automationEvents.findIndex(i=>qp(e)&&mr(i)?i.startTime+i.duration>=n:Jr(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Wp(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&rs(s)){if(i!==void 0&&oc(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:mr(i)?i.startTime+i.duration:Jr(i),a=i===void 0?this._defaultValue:mr(i)?i.values[i.values.length-1]:i.value,l=co(s)?n0(n,o,a,s):r0(n,o,a,s),c=co(s)?Zv(l,n,this._currenTime):e0(l,n,this._currenTime);this._automationEvents.push(c)}if(i!==void 0&&oc(i)&&this._automationEvents.push(zp(this.getValue(n),n)),i!==void 0&&mr(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,h=i.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const p=c*d%1;h[d]=i.values[d-1]*(1-p)+i.values[d]*p}this._automationEvents[this._automationEvents.length-1]=p1(h,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Jr(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&mr(s)&&Jr(s)+s.duration>n)return!1;const i=co(e)?Zv(e.value,e.endTime,this._currenTime):dh(e)?e0(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(mr(e)&&n+e.duration>Jr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Jr(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];oc(s)&&r.unshift(zp(fh(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Jr(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&oc(i)&&(r===void 0||!rs(r)||r.insertTime>e))return m1(e,fh(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Sg(i)&&(r===void 0||!rs(r)))return i.value;if(i!==void 0&&mr(i)&&(r===void 0||!rs(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?fP(e,i):i.values[i.values.length-1];if(i!==void 0&&rs(i)&&(r===void 0||!rs(r)))return i.value;if(r!==void 0&&co(r)){const[o,a]=t0(this._automationEvents,s,i,r,this._defaultValue);return n0(e,o,a,r)}if(r!==void 0&&dh(r)){const[o,a]=t0(this._automationEvents,s,i,r,this._defaultValue);return r0(e,o,a,r)}return this._defaultValue}}const mP=t=>({cancelTime:t,type:"cancelAndHold"}),gP=t=>({cancelTime:t,type:"cancelScheduledValues"}),_P=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),yP=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),vP=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),wP=()=>new DOMException("","AbortError"),TP=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},EP=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},SP=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Oo=new WeakSet,g1=new WeakMap,Ig=new WeakMap,_1=new WeakMap,Cg=new WeakMap,md=new WeakMap,y1=new WeakMap,$p=new WeakMap,Hp=new WeakMap,Gp=new WeakMap,v1={construct(){return v1}},IP=t=>{try{const e=new Proxy(t,v1);new e}catch{return!1}return!0},s0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,i0=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(s0);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(s0)}return[n.join(";"),r]},o0=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},a0=t=>{if(!IP(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},CP=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>{let m=0;return(_,T,I={credentials:"omit"})=>{const v=h.get(_);if(v!==void 0&&v.has(T))return Promise.resolve();const w=c.get(_);if(w!==void 0){const P=w.get(T);if(P!==void 0)return P}const S=i(_),b=S.audioWorklet===void 0?s(T).then(([P,D])=>{const[E,y]=i0(P,D),C=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${y}
})})(window,'_AWGS')`;return n(C)}).then(()=>{const P=p._AWGS.pop();if(P===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>P(class{},void 0,(D,E)=>{if(D.trim()==="")throw e();const y=Hp.get(S);if(y!==void 0){if(y.has(D))throw e();a0(E),o0(E.parameterDescriptors),y.set(D,E)}else a0(E),o0(E.parameterDescriptors),Hp.set(S,new Map([[D,E]]))},S.sampleRate,void 0,void 0))}):Promise.all([s(T),Promise.resolve(t(d,d))]).then(([[P,D],E])=>{const y=m+1;m=y;const[C,k]=i0(P,D),W=`${C};((AudioWorkletProcessor,registerProcessor)=>{${k}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${y}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([W],{type:"application/javascript; charset=utf-8"}),Y=URL.createObjectURL(Z);return S.audioWorklet.addModule(Y,I).then(()=>{if(a(S))return S;const J=o(S);return J.audioWorklet.addModule(Y,I).then(()=>J)}).then(J=>{if(l===null)throw new SyntaxError;try{new l(J,`__sac${y}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Y))});return w===void 0?c.set(_,new Map([[T,b]])):w.set(T,b),b.then(()=>{const P=h.get(_);P===void 0?h.set(_,new Set([T])):P.add(T)}).finally(()=>{const P=c.get(_);P!==void 0&&P.delete(T)}),b}},zn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},gd=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},w1=(t,e,n,r)=>{const s=zn(t,e),i=gd(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},lu=t=>zn(y1,t),Mo=t=>{if(Oo.has(t))throw new Error("The AudioNode is already stored.");Oo.add(t),lu(t).forEach(e=>e(!0))},T1=t=>"port"in t,uu=t=>{if(!Oo.has(t))throw new Error("The AudioNode is not stored.");Oo.delete(t),lu(t).forEach(e=>e(!1))},Kp=(t,e)=>{!T1(t)&&e.every(n=>n.size===0)&&uu(t)},AP=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>{const m=new WeakMap;return(_,T,I,v,w)=>{const{activeInputs:S,passiveInputs:b}=i(T),{outputs:P}=i(_),D=a(_),E=y=>{const C=l(T),k=l(_);if(y){const x=w1(b,_,I,v);t(S,_,x,!1),!w&&!d(_)&&n(k,C,I,v),p(T)&&Mo(T)}else{const x=r(S,_,I,v);e(b,v,x,!1),!w&&!d(_)&&s(k,C,I,v);const N=o(T);if(N===0)h(T)&&Kp(T,S);else{const R=m.get(T);R!==void 0&&clearTimeout(R),m.set(T,setTimeout(()=>{h(T)&&Kp(T,S)},N*1e3))}}};return c(P,[T,I,v],y=>y[0]===T&&y[1]===I&&y[2]===v,!0)?(D.add(E),h(_)?t(S,_,[I,v,E],!0):e(b,v,[_,I,E],!0),!0):!1}},kP=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],l=>l[0]===s&&l[1]===n,o)},xP=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},RP=t=>(e,n)=>{t(e).add(n)},PP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},NP=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...PP,...l},d=r(c,h),p=i(c)?e():null;super(a,!1,d,p),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},jt=(t,e)=>t.context===e,bP=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!jt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},ph=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ur=()=>new DOMException("","IndexSizeError"),Ag=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?ur():r}})(t.getChannelData)},DP={numberOfChannels:1},OP=(t,e,n,r,s,i,o,a)=>{let l=null;return class E1{constructor(h){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:p,sampleRate:m}={...DP,...h};l===null&&(l=new s(1,1,44100));const _=r!==null&&e(i,i)?new r({length:d,numberOfChannels:p,sampleRate:m}):l.createBuffer(p,d,m);if(_.numberOfChannels===0)throw n();return typeof _.copyFromChannel!="function"?(o(_),Ag(_)):e(ph,()=>ph(_))||a(_),t.add(_),_}static[Symbol.hasInstance](h){return h!==null&&typeof h=="object"&&Object.getPrototypeOf(h)===E1.prototype||t.has(h)}}},Xt=-34028234663852886e22,Wt=-Xt,Sr=t=>Oo.has(t),MP={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},VP=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...MP,...h},m=s(d,p),_=o(d),T=_?e():null;super(c,!1,m,T),this._audioBufferSourceNodeRenderer=T,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=m,this._onended=null,this._playbackRate=n(this,_,m.playbackRate,Wt,Xt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=h;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===h?c:d}get playbackRate(){return this._playbackRate}start(c=0,h=0,d){if(this._nativeAudioBufferSourceNode.start(c,h,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,h]:[c,h,d]),this.context.state!=="closed"){Mo(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),Sr(this)&&uu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},LP=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,h)=>{let d=n(c);const p=jt(d,h);if(!p){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(h,m),o!==null&&d.start(...o),a!==null&&d.stop(a)}return i.set(h,d),p?await t(h,c.playbackRate,d.playbackRate):await r(h,c.playbackRate,d.playbackRate),await s(c,h,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(c,h)}}},FP=t=>"playbackRate"in t,UP=t=>"frequency"in t&&"gain"in t,jP=t=>"offset"in t,BP=t=>!("frequency"in t)&&"gain"in t,zP=t=>"detune"in t&&"frequency"in t&&!("gain"in t),WP=t=>"pan"in t,qt=t=>zn(g1,t),cu=t=>zn(_1,t),Qp=(t,e)=>{const{activeInputs:n}=qt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||Qp(i,[...e,t])}));const r=FP(t)?[t.playbackRate]:T1(t)?Array.from(t.parameters.values()):UP(t)?[t.Q,t.detune,t.frequency,t.gain]:jP(t)?[t.offset]:BP(t)?[t.gain]:zP(t)?[t.detune,t.frequency]:WP(t)?[t.pan]:[];for(const s of r){const i=cu(s);i!==void 0&&i.activeInputs.forEach(([o])=>Qp(o,e))}Sr(t)&&uu(t)},S1=t=>{Qp(t.destination,[])},qP=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),$P=(t,e,n,r,s,i,o,a,l)=>class extends t{constructor(h={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(h)}catch(_){throw _.code===12&&_.message==="sampleRate is not in range"?n():_}if(d===null)throw r();if(!qP(h.latencyHint))throw new TypeError(`The provided value '${h.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(h.sampleRate!==void 0&&d.sampleRate!==h.sampleRate)throw n();super(d,2);const{latencyHint:p}=h,{sampleRate:m}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:p==="balanced"?512/m:p==="interactive"||p===void 0?256/m:p==="playback"?1024/m:Math.max(2,Math.min(128,Math.round(p*m/128)))*128/m,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const _=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",_)};d.addEventListener("statechange",_)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),S1(this)}))}createMediaElementSource(h){return new s(this,{mediaElement:h})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(h){return new o(this,{mediaStream:h})}createMediaStreamTrackSource(h){return new a(this,{mediaStreamTrack:h})}resume(){return this._state==="suspended"?new Promise((h,d)=>{const p=()=>{this._nativeAudioContext.removeEventListener("statechange",p),this._nativeAudioContext.state==="running"?h():this.resume().then(h,d)};this._nativeAudioContext.addEventListener("statechange",p)}):this._nativeAudioContext.resume().catch(h=>{throw h===void 0||h.code===15?e():h})}suspend(){return this._nativeAudioContext.suspend().catch(h=>{throw h===void 0?e():h})}},HP=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p=o(d),m=s(d,h,p),_=p?e(a):null;super(c,!1,m,_),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=m}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},GP=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},KP=(t,e,n,r,s,i,o,a)=>(l,c)=>{const h=c.listener,d=()=>{const P=new Float32Array(1),D=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(c);let y=!1,C=[0,0,-1,0,1,0],k=[0,0,0];const x=()=>{if(y)return;y=!0;const Z=r(c,256,9,0);Z.onaudioprocess=({inputBuffer:Y})=>{const J=[i(Y,P,0),i(Y,P,1),i(Y,P,2),i(Y,P,3),i(Y,P,4),i(Y,P,5)];J.some((B,q)=>B!==C[q])&&(h.setOrientation(...J),C=J);const F=[i(Y,P,6),i(Y,P,7),i(Y,P,8)];F.some((B,q)=>B!==k[q])&&(h.setPosition(...F),k=F)},D.connect(Z)},N=Z=>Y=>{Y!==C[Z]&&(C[Z]=Y,h.setOrientation(...C))},R=Z=>Y=>{Y!==k[Z]&&(k[Z]=Y,h.setPosition(...k))},W=(Z,Y,J)=>{const F=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y});F.connect(D,0,Z),F.start(),Object.defineProperty(F.offset,"defaultValue",{get(){return Y}});const B=t({context:l},E,F.offset,Wt,Xt);return a(B,"value",q=>()=>q.call(B),q=>K=>{try{q.call(B,K)}catch(se){if(se.code!==9)throw se}x(),E&&J(K)}),B.cancelAndHoldAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.cancelAndHoldAtTime),B.cancelScheduledValues=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.cancelScheduledValues),B.exponentialRampToValueAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.exponentialRampToValueAtTime),B.linearRampToValueAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.linearRampToValueAtTime),B.setTargetAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.setTargetAtTime),B.setValueAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.setValueAtTime),B.setValueCurveAtTime=(q=>E?()=>{throw s()}:(...K)=>{const se=q.apply(B,K);return x(),se})(B.setValueCurveAtTime),B};return{forwardX:W(0,0,N(0)),forwardY:W(1,0,N(1)),forwardZ:W(2,-1,N(2)),positionX:W(6,0,R(0)),positionY:W(7,0,R(1)),positionZ:W(8,0,R(2)),upX:W(3,0,N(3)),upY:W(4,1,N(4)),upZ:W(5,0,N(5))}},{forwardX:p,forwardY:m,forwardZ:_,positionX:T,positionY:I,positionZ:v,upX:w,upY:S,upZ:b}=h.forwardX===void 0?d():h;return{get forwardX(){return p},get forwardY(){return m},get forwardZ(){return _},get positionX(){return T},get positionY(){return I},get positionZ(){return v},get upX(){return w},get upY(){return S},get upZ(){return b}}},mh=t=>"context"in t,hu=t=>mh(t[0]),Oi=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},l0=(t,e,[n,r],s)=>{Oi(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},u0=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):Oi(i,[n,r],o=>o[0]===n,s)},ea=t=>"inputs"in t,gh=(t,e,n,r)=>{if(ea(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},I1=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},QP=(t,e,n)=>gd(t,r=>r[0]===e&&r[1]===n),C1=(t,e)=>{if(!lu(t).delete(e))throw new Error("Missing the expected event listener.")},A1=(t,e,n)=>{const r=zn(t,e),s=gd(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},_h=(t,e,n,r)=>{ea(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Le=t=>zn(Ig,t),Nl=t=>zn(Cg,t),wi=t=>$p.has(t),xc=t=>!Oo.has(t),c0=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,h=>h===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Df=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},yh=t=>"context"in t,YP=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=yh(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(l=>l.input!==i||l.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==s&&(l.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{yh(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},XP=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=cu(e),{outputs:o}=qt(t),a=lu(t),l=c=>{const h=Le(t),d=Nl(e);if(c){const p=A1(i,t,n);l0(s,t,p,!1),!r&&!wi(t)&&h.connect(d,n)}else{const p=QP(s,t,n);u0(i,p,!1),!r&&!wi(t)&&h.disconnect(d,n)}};return Oi(o,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),Sr(t)?l0(s,t,[n,l],!0):u0(i,[t,n,l],!0),!0):!1},JP=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=qt(e),o=I1(s[r],t,n);return o===null?[w1(i,t,n,r)[2],!1]:[o[2],!0]},ZP=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=cu(e),i=I1(r,t,n);return i===null?[A1(s,t,n)[1],!1]:[i[2],!0]},kg=(t,e,n,r,s)=>{const[i,o]=JP(t,n,r,s);if(i!==null&&(C1(t,i),o&&!e&&!wi(t)&&_h(Le(t),Le(n),r,s)),Sr(n)){const{activeInputs:a}=qt(n);Kp(n,a)}},xg=(t,e,n,r)=>{const[s,i]=ZP(t,n,r);s!==null&&(C1(t,s),i&&!e&&!wi(t)&&Le(t).disconnect(Nl(n),r))},eN=(t,e)=>{const n=qt(t),r=[];for(const s of n.outputs)hu(s)?kg(t,e,...s):xg(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},tN=(t,e,n)=>{const r=qt(t),s=[];for(const i of r.outputs)i[1]===n&&(hu(i)?kg(t,e,...i):xg(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},nN=(t,e,n,r,s)=>{const i=qt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(hu(o)?kg(t,e,...o):xg(t,e,...o),i.outputs.delete(o),o[0]))},rN=(t,e,n,r,s,i,o,a,l,c,h,d,p,m,_,T)=>class extends c{constructor(v,w,S,b){super(S),this._context=v,this._nativeAudioNode=S;const P=h(v);d(P)&&n(c0,()=>c0(P,T))!==!0&&YP(S),Ig.set(this,S),y1.set(this,new Set),v.state!=="closed"&&w&&Mo(this),t(this,b,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,w=0,S=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw s();const b=h(this._context),P=_(b);if(p(v)||m(v))throw i();if(mh(v)){const y=Le(v);try{const k=gh(this._nativeAudioNode,y,w,S),x=xc(this);(P||x)&&this._nativeAudioNode.disconnect(...k),this.context.state!=="closed"&&!x&&xc(v)&&Mo(v)}catch(k){throw k.code===12?i():k}if(e(this,v,w,S,P)){const k=l([this],v);Df(k,r(P))}return v}const D=Nl(v);if(D.name==="playbackRate"&&D.maxValue===1024)throw o();try{this._nativeAudioNode.connect(D,w),(P||xc(this))&&this._nativeAudioNode.disconnect(D,w)}catch(y){throw y.code===12?i():y}if(XP(this,v,w,P)){const y=l([this],v);Df(y,r(P))}}disconnect(v,w,S){let b;const P=h(this._context),D=_(P);if(v===void 0)b=eN(this,D);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw s();b=tN(this,D,v)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||mh(v)&&S!==void 0&&(S<0||S>=v.numberOfInputs))throw s();if(b=nN(this,D,v,w,S),b.length===0)throw i()}for(const E of b){const y=l([this],E);Df(y,a)}}},sN=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>(m,_,T,I=null,v=null)=>{const w=T.value,S=new pP(w),b=_?r(S):null,P={get defaultValue(){return w},get maxValue(){return I===null?T.maxValue:I},get minValue(){return v===null?T.minValue:v},get value(){return T.value},set value(D){T.value=D,P.setValueAtTime(D,m.context.currentTime)},cancelAndHoldAtTime(D){if(typeof T.cancelAndHoldAtTime=="function")b===null&&S.flush(m.context.currentTime),S.add(s(D)),T.cancelAndHoldAtTime(D);else{const E=Array.from(S).pop();b===null&&S.flush(m.context.currentTime),S.add(s(D));const y=Array.from(S).pop();T.cancelScheduledValues(D),E!==y&&y!==void 0&&(y.type==="exponentialRampToValue"?T.exponentialRampToValueAtTime(y.value,y.endTime):y.type==="linearRampToValue"?T.linearRampToValueAtTime(y.value,y.endTime):y.type==="setValue"?T.setValueAtTime(y.value,y.startTime):y.type==="setValueCurve"&&T.setValueCurveAtTime(y.values,y.startTime,y.duration))}return P},cancelScheduledValues(D){return b===null&&S.flush(m.context.currentTime),S.add(i(D)),T.cancelScheduledValues(D),P},exponentialRampToValueAtTime(D,E){if(D===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const y=m.context.currentTime;return b===null&&S.flush(y),Array.from(S).length===0&&(S.add(c(w,y)),T.setValueAtTime(w,y)),S.add(o(D,E)),T.exponentialRampToValueAtTime(D,E),P},linearRampToValueAtTime(D,E){const y=m.context.currentTime;return b===null&&S.flush(y),Array.from(S).length===0&&(S.add(c(w,y)),T.setValueAtTime(w,y)),S.add(a(D,E)),T.linearRampToValueAtTime(D,E),P},setTargetAtTime(D,E,y){return b===null&&S.flush(m.context.currentTime),S.add(l(D,E,y)),T.setTargetAtTime(D,E,y),P},setValueAtTime(D,E){return b===null&&S.flush(m.context.currentTime),S.add(c(D,E)),T.setValueAtTime(D,E),P},setValueCurveAtTime(D,E,y){const C=D instanceof Float32Array?D:new Float32Array(D);if(d!==null&&d.name==="webkitAudioContext"){const k=E+y,x=m.context.sampleRate,N=Math.ceil(E*x),R=Math.floor(k*x),W=R-N,Z=new Float32Array(W);for(let J=0;J<W;J+=1){const F=(C.length-1)/y*((N+J)/x-E),B=Math.floor(F),q=Math.ceil(F);Z[J]=B===q?C[B]:(1-(F-B))*C[B]+(1-(q-F))*C[q]}b===null&&S.flush(m.context.currentTime),S.add(h(Z,E,y)),T.setValueCurveAtTime(Z,E,y);const Y=R/x;Y<k&&p(P,Z[Z.length-1],Y),p(P,C[C.length-1],k)}else b===null&&S.flush(m.context.currentTime),S.add(h(C,E,y)),T.setValueCurveAtTime(C,E,y);return P}};return n.set(P,T),e.set(P,m),t(P,b),P},iN=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class k1{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const oN={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},aN=(t,e,n,r,s,i,o,a,l,c,h,d,p,m)=>class extends e{constructor(T,I,v){var w;const S=a(T),b=l(S),P=h({...oN,...v});p(P);const D=Hp.get(S),E=D==null?void 0:D.get(I),y=b||S.state!=="closed"?S:(w=o(S))!==null&&w!==void 0?w:S,C=s(y,b?null:T.baseLatency,c,I,E,P),k=b?r(I,P,E):null;super(T,!0,C,k);const x=[];C.parameters.forEach((R,W)=>{const Z=n(this,b,R);x.push([W,Z])}),this._nativeAudioWorkletNode=C,this._onprocessorerror=null,this._parameters=new k1(x),b&&t(S,this);const{activeInputs:N}=i(this);d(C,N)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(T){const I=typeof T=="function"?m(this,T):null;this._nativeAudioWorkletNode.onprocessorerror=I;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===I?T:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function vh(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const x1=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},wh=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},lN=(t,e)=>{const n=zn(Gp,t),r=Le(e);return zn(n,r)},uN=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=s.reduce((I,v)=>I+v,0),h=c===0?null:n.createBuffer(c,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=qt(t),p=await lN(n,t),m=wh(r.numberOfInputs,r.channelCount),_=wh(r.numberOfOutputs,s),T=Array.from(t.parameters.keys()).reduce((I,v)=>({...I,[v]:new Float32Array(128)}),{});for(let I=0;I<a;I+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let w=0;w<r.channelCount;w+=1)vh(e,m[v],w,w,I);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},w)=>{vh(e,T,v,l+w,I)});for(let v=0;v<r.numberOfInputs;v+=1)for(let w=0;w<s[v];w+=1)_[v][w].byteLength===0&&(_[v][w]=new Float32Array(128));try{const v=m.map((S,b)=>d.activeInputs[b].size===0?[]:S),w=o(I/n.sampleRate,n.sampleRate,()=>p.process(v,_,T));if(h!==null)for(let S=0,b=0;S<r.numberOfOutputs;S+=1){for(let P=0;P<s[S];P+=1)x1(h,_[S],P,b+P,I);b+=s[S]}if(!w)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return h},cN=(t,e,n,r,s,i,o,a,l,c,h,d,p,m,_,T)=>(I,v,w)=>{const S=new WeakMap;let b=null;const P=async(D,E)=>{let y=h(D),C=null;const k=jt(y,E),x=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){const N=x.reduce((Y,J)=>Y+J,0),R=s(E,{channelCount:Math.max(1,N),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,N)}),W=[];for(let Y=0;Y<D.numberOfOutputs;Y+=1)W.push(r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[Y]}));const Z=o(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});Z.connect=e.bind(null,W),Z.disconnect=l.bind(null,W),C=[R,W,Z]}else k||(y=new d(E,I));if(S.set(E,C===null?y:C[2]),C!==null){if(b===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=D.channelCount*D.numberOfInputs,F=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,B=J+F;b=uN(D,B===0?null:await(async()=>{const K=new p(B,Math.ceil(D.context.length/128)*128,E.sampleRate),se=[],Ze=[];for(let _e=0;_e<v.numberOfInputs;_e+=1)se.push(o(K,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Ze.push(s(K,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const xe=await Promise.all(Array.from(D.parameters.values()).map(async _e=>{const Fe=i(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_e.value});return await m(K,_e,Fe.offset),Fe})),ce=r(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+F)});for(let _e=0;_e<v.numberOfInputs;_e+=1){se[_e].connect(Ze[_e]);for(let Fe=0;Fe<v.channelCount;Fe+=1)Ze[_e].connect(ce,Fe,_e*v.channelCount+Fe)}for(const[_e,Fe]of xe.entries())Fe.connect(ce,0,J+_e),Fe.start(0);return ce.connect(K.destination),await Promise.all(se.map(_e=>_(D,K,_e))),T(K)})(),E,v,x,w,c)}const N=await b,R=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[W,Z,Y]=C;N!==null&&(R.buffer=N,R.start(0)),R.connect(W);for(let J=0,F=0;J<D.numberOfOutputs;J+=1){const B=Z[J];for(let q=0;q<x[J];q+=1)W.connect(B,F+q,q);F+=x[J]}return Y}if(k)for(const[N,R]of D.parameters.entries())await t(E,R,y.parameters.get(N));else for(const[N,R]of D.parameters.entries())await m(E,R,y.parameters.get(N));return await _(D,E,y),y};return{render(D,E){a(E,D);const y=S.get(E);return y!==void 0?Promise.resolve(y):P(D,E)}}},hN=(t,e,n,r,s,i,o,a,l,c,h,d,p,m,_,T,I,v,w,S)=>class extends _{constructor(P,D){super(P,D),this._nativeContext=P,this._audioWorklet=t===void 0?void 0:{addModule:(E,y)=>t(this,E,y)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(P,D,E){return new n({length:D,numberOfChannels:P,sampleRate:E})}createBufferSource(){return new r(this)}createChannelMerger(P=6){return new i(this,{numberOfInputs:P})}createChannelSplitter(P=6){return new o(this,{numberOfOutputs:P})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(P=1){return new h(this,{maxDelayTime:P})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(P,D){return new m(this,{feedback:D,feedforward:P})}createOscillator(){return new T(this)}createPanner(){return new I(this)}createPeriodicWave(P,D,E={disableNormalization:!1}){return new v(this,{...E,imag:D,real:P})}createStereoPanner(){return new w(this)}createWaveShaper(){return new S(this)}decodeAudioData(P,D,E){return c(this._nativeContext,P).then(y=>(typeof D=="function"&&D(y),y),y=>{throw typeof E=="function"&&E(y),y})}},dN={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},fN=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...dN,...h},m=s(d,p),_=o(d),T=_?n():null;super(c,!1,m,T),this._Q=e(this,_,m.Q,Wt,Xt),this._detune=e(this,_,m.detune,1200*Math.log2(Wt),-1200*Math.log2(Wt)),this._frequency=e(this,_,m.frequency,c.sampleRate/2,0),this._gain=e(this,_,m.gain,40*Math.log10(Wt),Xt),this._nativeBiquadFilterNode=m,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,h,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,h,d)}catch(p){throw p.code===11?r():p}if(c.length!==h.length||h.length!==d.length)throw r()}},pN=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=jt(c,l);if(!h){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return i.set(l,c),h?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},mN=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},gN={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_N=(t,e,n,r,s)=>class extends t{constructor(o,a){const l=r(o),c={...gN,...a},h=n(l,c),d=s(l)?e():null;super(o,!1,h,d)}},yN=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!jt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},vN={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},wN=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h=i({...vN,...l}),d=n(c,h),p=s(c)?e():null;super(a,!1,d,p)}},TN=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!jt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},EN=t=>(e,n,r)=>t(n,e,r),SN=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return yh(n)?i.connect(n,0,s):i.connect(n,0)},IN=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},CN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},AN=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...CN,...c},p=r(h,d),m=i(h),_=m?n():null;super(l,!1,p,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=p,this._offset=e(this,m,p.offset,Wt,Xt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const h=this._nativeConstantSourceNode.onended;this._onended=h!==null&&h===c?l:h}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Mo(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Sr(this)&&uu(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},kN=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,h)=>{let d=n(c);const p=jt(d,h);if(!p){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(h,m),o!==null&&d.start(o),a!==null&&d.stop(a)}return i.set(h,d),p?await t(h,c.offset,d.offset):await r(h,c.offset,d.offset),await s(c,h,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(c,h)}}},xN=t=>e=>(t[0]=e,t[0]),RN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},PN=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h={...RN,...l},d=n(c,h),m=s(c)?e():null;super(a,!1,d,m),this._isBufferNullified=!1,this._nativeConvolverNode=d,h.buffer!==null&&i(this,h.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},NN=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!jt(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,c)}return r.set(o,a),ea(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},bN=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},DN=()=>new DOMException("","DataCloneError"),h0=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},ON=(t,e,n,r,s,i,o,a,l,c,h)=>(d,p)=>{const m=o(d)?d:i(d);if(s.has(p)){const _=n();return Promise.reject(_)}try{s.add(p)}catch{}return e(l,()=>l(m))?m.decodeAudioData(p).then(_=>(h0(p).catch(()=>{}),e(a,()=>a(_))||h(_),t.add(_),_)):new Promise((_,T)=>{const I=async()=>{try{await h0(p)}catch{}},v=w=>{T(w),I()};try{m.decodeAudioData(p,w=>{typeof w.copyFromChannel!="function"&&(c(w),Ag(w)),t.add(w),I().then(()=>_(w))},w=>{v(w===null?r():w)})}catch(w){v(w)}})},MN=(t,e,n,r,s,i,o,a)=>(l,c)=>{const h=e.get(l);if(h===void 0)throw new Error("Missing the expected cycle count.");const d=i(l.context),p=a(d);if(h===c){if(e.delete(l),!p&&o(l)){const m=r(l),{outputs:_}=n(l);for(const T of _)if(hu(T)){const I=r(T[0]);t(m,I,T[1],T[2])}else{const I=s(T[0]);m.connect(I,T[1])}}}else e.set(l,h-c)},VN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},LN=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...VN,...c},p=r(h,d),m=i(h),_=m?n(d.maxDelayTime):null;super(l,!1,p,_),this._delayTime=e(this,m,p.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},FN=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(l,c)=>{let h=n(l);const d=jt(h,c);if(!d){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:i};h=e(c,p)}return o.set(c,h),d?await t(c,l.delayTime,h.delayTime):await r(c,l.delayTime,h.delayTime),await s(l,c,h),h};return{render(l,c){const h=o.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},UN=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),jN=t=>(e,n)=>{t(e).delete(n)},BN=t=>"delayTime"in t,zN=(t,e,n)=>function r(s,i){const o=mh(i)?i:n(t,i);if(BN(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...s,o],l[0])).reduce((l,c)=>l.concat(c),[])},ac=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},WN=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?ac(t,e,n).disconnect():yh(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?ac(t,e,r).disconnect(n,0):ac(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):ac(t,e,r).disconnect(n,0),qN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},$N=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...qN,...h},m=r(d,p),_=o(d),T=_?n():null;super(c,!1,m,T),this._attack=e(this,_,m.attack),this._knee=e(this,_,m.knee),this._nativeDynamicsCompressorNode=m,this._ratio=e(this,_,m.ratio),this._release=e(this,_,m.release),this._threshold=e(this,_,m.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const h=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=h,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const h=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=h,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},HN=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=jt(c,l);if(!h){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return i.set(l,c),h?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},GN=()=>new DOMException("","EncodingError"),KN=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(h,d,p,m,_)=>{if(d===a||d===t.location.href&&p===1&&m===1)return c(),r(_),!1;if(l!==null)return l(h,d,p,m,_)},i.onerror=()=>{c(),r(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",s.appendChild(i)}}),QN=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},YN=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},XN=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},JN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},ZN=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...JN,...l},d=r(c,h),p=i(c),m=p?n():null;super(a,!1,d,m),this._gain=e(this,p,d.gain,Wt,Xt)}get gain(){return this._gain}},eb=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=jt(c,l);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return i.set(l,c),h?await t(l,a.gain,c.gain):await r(l,a.gain,c.gain),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},tb=(t,e)=>n=>e(t,n),nb=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},rb=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},sb=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},ib=t=>e=>t.get(e),Et=()=>new DOMException("","InvalidStateError"),ob=t=>e=>{const n=t.get(e);if(n===void 0)throw Et();return n},ab=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},lb=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},_d=()=>new DOMException("","InvalidAccessError"),ub=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw _d();return e.call(t,n,r,s)})(t.getFrequencyResponse)},cb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},hb=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h=s(c),d={...cb,...l},p=e(c,h?null:a.baseLatency,d),m=h?n(d.feedback,d.feedforward):null;super(a,!1,p,m),ub(p),this._nativeIIRFilterNode=p,i(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},R1=(t,e,n,r,s,i,o,a,l,c,h)=>{const d=c.length;let p=a;for(let m=0;m<d;m+=1){let _=n[0]*c[m];for(let T=1;T<s;T+=1){const I=p-T&l-1;_+=n[T]*i[I],_-=t[T]*o[I]}for(let T=s;T<r;T+=1)_+=n[T]*i[p-T&l-1];for(let T=s;T<e;T+=1)_-=t[T]*o[p-T&l-1];i[p]=c[m],o[p]=_,p=p+1&l-1,h[m]=_}return p},db=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,l=Math.min(o,a);if(s[0]!==1){for(let _=0;_<o;_+=1)i[_]/=s[0];for(let _=1;_<a;_+=1)s[_]/=s[0]}const c=32,h=new Float32Array(c),d=new Float32Array(c),p=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),m=t.numberOfChannels;for(let _=0;_<m;_+=1){const T=t.getChannelData(_),I=p.getChannelData(_);h.fill(0),d.fill(0),R1(s,o,i,a,l,h,d,0,c,T,I)}return p},fb=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(h,d)=>{let p=null,m=e(h);const _=jt(m,d);if(d.createIIRFilter===void 0?p=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):_||(m=d.createIIRFilter(o,i)),a.set(d,p===null?m:p),p!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new n(h.context.destination.channelCount,h.context.length,d.sampleRate);l=(async()=>{await r(h,I,I.destination);const v=await s(I);return db(v,d,i,o)})()}const T=await l;return p.buffer=T,p.start(0),p}return await r(h,d,m),m};return{render(h,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):c(h,d)}}},pb=(t,e,n,r,s,i)=>o=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!o&&i(a)){const h=r(a),{outputs:d}=n(a);for(const p of d)if(hu(p)){const m=r(p[0]);e(h,m,p[1],p[2])}else{const m=s(p[0]);h.disconnect(m,p[1])}}t.set(a,l)}else t.set(a,c+l)},mb=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},gb=(t,e)=>n=>t.has(n)||e(n),_b=(t,e)=>n=>t.has(n)||e(n),yb=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},vb=t=>e=>t!==null&&e instanceof t,wb=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,Tb=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,Eb=(t,e)=>n=>t(n)||e(n),Sb=t=>e=>t!==null&&e instanceof t,Ib=t=>t!==null&&t.isSecureContext,Cb=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Ab={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},kb=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l={...Ab,...o},c=e(a,l);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},xb=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Rb=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},Pb=(t,e,n,r,s,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,md.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},bl=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},Nb=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,l=0,c=0)=>{const h=i.size===0;if(e(a))return o.call(n,a,l,c),t(i,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),h&&r(),a;o.call(n,a,l),t(i,[a,l],d=>d[0]===a&&d[1]===l,!0),h&&r()})(n.connect),n.disconnect=(o=>(a,l,c)=>{const h=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const p of i)p[1]===a&&i.delete(p)}else{e(a)?o.call(n,a,l,c):o.call(n,a,l);for(const p of i)p[0]===a&&(l===void 0||p[1]===l)&&(c===void 0||p[2]===c)&&i.delete(p)}const d=i.size===0;h&&d&&s()})(n.disconnect),n},je=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},pt=(t,e)=>{je(t,e,"channelCount"),je(t,e,"channelCountMode"),je(t,e,"channelInterpretation")},d0=t=>typeof t.getFloatTimeDomainData=="function",bb=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},Db=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(pt(s,r),!(r.maxDecibels>r.minDecibels))throw e();return je(s,r,"fftSize"),je(s,r,"maxDecibels"),je(s,r,"minDecibels"),je(s,r,"smoothingTimeConstant"),t(d0,()=>d0(s))||bb(s),s},Ob=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Je=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},Mb=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw Et();e.call(t,r,s,i),n=!0}})(t.start)},Rg=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Pg=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},Vb=(t,e,n,r,s,i,o,a,l,c,h)=>(d,p)=>{const m=d.createBufferSource();return pt(m,p),Je(m,p,"playbackRate"),je(m,p,"buffer"),je(m,p,"loop"),je(m,p,"loopEnd"),je(m,p,"loopStart"),e(n,()=>n(d))||Mb(m),e(r,()=>r(d))||l(m),e(s,()=>s(d))||c(m,d),e(i,()=>i(d))||Rg(m),e(o,()=>o(d))||h(m,d),e(a,()=>a(d))||Pg(m),t(d,m),m},Lb=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Fb=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(c){if(l>i.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Ub=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,jb=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},Bb=(t,e,n,r,s)=>(i,o,a,l,c,h)=>{if(a!==null)try{const d=new a(i,l,h),p=new Map;let m=null;if(Object.defineProperties(d,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>m,set:_=>{typeof m=="function"&&d.removeEventListener("processorerror",m),m=typeof _=="function"?_:null,typeof m=="function"&&d.addEventListener("processorerror",m)}}}),d.addEventListener=(_=>(...T)=>{if(T[0]==="processorerror"){const I=typeof T[1]=="function"?T[1]:typeof T[1]=="object"&&T[1]!==null&&typeof T[1].handleEvent=="function"?T[1].handleEvent:null;if(I!==null){const v=p.get(T[1]);v!==void 0?T[1]=v:(T[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),I(w)):I(new ErrorEvent(T[0],{...w}))},p.set(I,T[1]))}}return _.call(d,"error",T[1],T[2]),_.call(d,...T)})(d.addEventListener),d.removeEventListener=(_=>(...T)=>{if(T[0]==="processorerror"){const I=p.get(T[1]);I!==void 0&&(p.delete(T[1]),T[1]=I)}return _.call(d,"error",T[1],T[2]),_.call(d,T[0],T[1],T[2])})(d.removeEventListener),h.numberOfOutputs!==0){const _=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(_).connect(i.destination),s(d,()=>_.disconnect(),()=>_.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(c===void 0)throw r();return jb(h),e(i,o,c,h)},P1=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),zb=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),Wb=async(t,e)=>{const n=await zb(e);return new t(n)},qb=(t,e,n,r)=>{let s=Gp.get(t);s===void 0&&(s=new WeakMap,Gp.set(t,s));const i=Wb(n,r);return s.set(e,i),i},$b=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>(m,_,T,I)=>{if(I.numberOfInputs===0&&I.numberOfOutputs===0)throw l();const v=Array.isArray(I.outputChannelCount)?I.outputChannelCount:Array.from(I.outputChannelCount);if(v.some(G=>G<1))throw l();if(v.length!==I.numberOfOutputs)throw e();if(I.channelCountMode!=="explicit")throw l();const w=I.channelCount*I.numberOfInputs,S=v.reduce((G,re)=>G+re,0),b=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length;if(w+b>6||S>6)throw l();const P=new MessageChannel,D=[],E=[];for(let G=0;G<I.numberOfInputs;G+=1)D.push(o(m,{channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1})),E.push(s(m,{channelCount:I.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:I.channelCount}));const y=[];if(T.parameterDescriptors!==void 0)for(const{defaultValue:G,maxValue:re,minValue:We,name:Re}of T.parameterDescriptors){const ae=i(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I.parameterData[Re]!==void 0?I.parameterData[Re]:G===void 0?0:G});Object.defineProperties(ae.offset,{defaultValue:{get:()=>G===void 0?0:G},maxValue:{get:()=>re===void 0?Wt:re},minValue:{get:()=>We===void 0?Xt:We}}),y.push(ae)}const C=r(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+b)}),k=P1(_,m.sampleRate),x=a(m,k,w+b,Math.max(1,S)),N=s(m,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),R=[];for(let G=0;G<I.numberOfOutputs;G+=1)R.push(r(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[G]}));for(let G=0;G<I.numberOfInputs;G+=1){D[G].connect(E[G]);for(let re=0;re<I.channelCount;re+=1)E[G].connect(C,re,G*I.channelCount+re)}const W=new k1(T.parameterDescriptors===void 0?[]:T.parameterDescriptors.map(({name:G},re)=>{const We=y[re];return We.connect(C,0,w+re),We.start(0),[G,We.offset]}));C.connect(x);let Z=I.channelInterpretation,Y=null;const J=I.numberOfOutputs===0?[x]:R,F={get bufferSize(){return k},get channelCount(){return I.channelCount},set channelCount(G){throw n()},get channelCountMode(){return I.channelCountMode},set channelCountMode(G){throw n()},get channelInterpretation(){return Z},set channelInterpretation(G){for(const re of D)re.channelInterpretation=G;Z=G},get context(){return x.context},get inputs(){return D},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get onprocessorerror(){return Y},set onprocessorerror(G){typeof Y=="function"&&F.removeEventListener("processorerror",Y),Y=typeof G=="function"?G:null,typeof Y=="function"&&F.addEventListener("processorerror",Y)},get parameters(){return W},get port(){return P.port2},addEventListener(...G){return x.addEventListener(G[0],G[1],G[2])},connect:t.bind(null,J),disconnect:c.bind(null,J),dispatchEvent(...G){return x.dispatchEvent(G[0])},removeEventListener(...G){return x.removeEventListener(G[0],G[1],G[2])}},B=new Map;P.port1.addEventListener=(G=>(...re)=>{if(re[0]==="message"){const We=typeof re[1]=="function"?re[1]:typeof re[1]=="object"&&re[1]!==null&&typeof re[1].handleEvent=="function"?re[1].handleEvent:null;if(We!==null){const Re=B.get(re[1]);Re!==void 0?re[1]=Re:(re[1]=ae=>{h(m.currentTime,m.sampleRate,()=>We(ae))},B.set(We,re[1]))}}return G.call(P.port1,re[0],re[1],re[2])})(P.port1.addEventListener),P.port1.removeEventListener=(G=>(...re)=>{if(re[0]==="message"){const We=B.get(re[1]);We!==void 0&&(B.delete(re[1]),re[1]=We)}return G.call(P.port1,re[0],re[1],re[2])})(P.port1.removeEventListener);let q=null;Object.defineProperty(P.port1,"onmessage",{get:()=>q,set:G=>{typeof q=="function"&&P.port1.removeEventListener("message",q),q=typeof G=="function"?G:null,typeof q=="function"&&(P.port1.addEventListener("message",q),P.port1.start())}}),T.prototype.port=P.port1;let K=null;qb(m,F,T,I).then(G=>K=G);const Ze=wh(I.numberOfInputs,I.channelCount),xe=wh(I.numberOfOutputs,v),ce=T.parameterDescriptors===void 0?[]:T.parameterDescriptors.reduce((G,{name:re})=>({...G,[re]:new Float32Array(128)}),{});let _e=!0;const Fe=()=>{I.numberOfOutputs>0&&x.disconnect(N);for(let G=0,re=0;G<I.numberOfOutputs;G+=1){const We=R[G];for(let Re=0;Re<v[G];Re+=1)N.disconnect(We,re+Re,Re);re+=v[G]}},ee=new Map;x.onaudioprocess=({inputBuffer:G,outputBuffer:re})=>{if(K!==null){const We=d(F);for(let Re=0;Re<k;Re+=128){for(let ae=0;ae<I.numberOfInputs;ae+=1)for(let me=0;me<I.channelCount;me+=1)vh(G,Ze[ae],me,me,Re);T.parameterDescriptors!==void 0&&T.parameterDescriptors.forEach(({name:ae},me)=>{vh(G,ce,ae,w+me,Re)});for(let ae=0;ae<I.numberOfInputs;ae+=1)for(let me=0;me<v[ae];me+=1)xe[ae][me].byteLength===0&&(xe[ae][me]=new Float32Array(128));try{const ae=Ze.map((It,Gn)=>{if(We[Gn].size>0)return ee.set(Gn,k/128),It;const fa=ee.get(Gn);return fa===void 0?[]:(It.every(Qs=>Qs.every(Pu=>Pu===0))&&(fa===1?ee.delete(Gn):ee.set(Gn,fa-1)),It)});_e=h(m.currentTime+Re/m.sampleRate,m.sampleRate,()=>K.process(ae,xe,ce));for(let It=0,Gn=0;It<I.numberOfOutputs;It+=1){for(let qr=0;qr<v[It];qr+=1)x1(re,xe[It],qr,Gn+qr,Re);Gn+=v[It]}}catch(ae){_e=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:ae.colno,filename:ae.filename,lineno:ae.lineno,message:ae.message}))}if(!_e){for(let ae=0;ae<I.numberOfInputs;ae+=1){D[ae].disconnect(E[ae]);for(let me=0;me<I.channelCount;me+=1)E[Re].disconnect(C,me,ae*I.channelCount+me)}if(T.parameterDescriptors!==void 0){const ae=T.parameterDescriptors.length;for(let me=0;me<ae;me+=1){const It=y[me];It.disconnect(C,0,w+me),It.stop()}}C.disconnect(x),x.onaudioprocess=null,Hn?Fe():fr();break}}}};let Hn=!1;const dr=o(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Wr=()=>x.connect(dr).connect(m.destination),fr=()=>{x.disconnect(dr),dr.disconnect()},da=()=>{if(_e){fr(),I.numberOfOutputs>0&&x.connect(N);for(let G=0,re=0;G<I.numberOfOutputs;G+=1){const We=R[G];for(let Re=0;Re<v[G];Re+=1)N.connect(We,re+Re,Re);re+=v[G]}}Hn=!0},Ru=()=>{_e&&(Wr(),Fe()),Hn=!1};return Wr(),p(F,da,Ru)},N1=(t,e)=>{const n=t.createBiquadFilter();return pt(n,e),Je(n,e,"Q"),Je(n,e,"detune"),Je(n,e,"frequency"),Je(n,e,"gain"),je(n,e,"type"),n},Hb=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),pt(s,r),s},Gb=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Et()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Et()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Et()}})},du=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return pt(n,e),Gb(n),n},Kb=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return pt(a,o),Je(a,o,"offset"),e(r,()=>r(i))||Rg(a),e(s,()=>s(i))||Pg(a),t(i,a),a},ta=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Qb=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),l=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(s,{...o,gain:i}),h=a.getChannelData(0);h[0]=1,h[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(_){c.channelCount=_},get channelCountMode(){return c.channelCountMode},set channelCountMode(_){c.channelCountMode=_},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(_){c.channelInterpretation=_},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(_){l.onended=_},addEventListener(..._){return l.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return l.dispatchEvent(_[0])},removeEventListener(..._){return l.removeEventListener(_[0],_[1],_[2])},start(_=0){l.start.call(l,_)},stop(_=0){l.stop.call(l,_)}},p=()=>l.connect(c),m=()=>l.disconnect(c);return t(s,l),r(ta(d,c),p,m)},Yb=(t,e)=>(n,r)=>{const s=n.createConvolver();if(pt(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),je(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},b1=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return pt(n,e),Je(n,e,"delayTime"),n},Xb=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(pt(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Je(r,n,"attack"),Je(r,n,"knee"),Je(r,n,"ratio"),Je(r,n,"release"),Je(r,n,"threshold"),r},rn=(t,e)=>{const n=t.createGain();return pt(n,e),Je(n,e,"gain"),n},Jb=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return pt(s,r),s};function Zb(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function e2(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function f0(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=e2(n,e),n[0]+=t[r];return n}const t2=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:h})=>{const d=P1(i,s.sampleRate),p=c instanceof Float64Array?c:new Float64Array(c),m=h instanceof Float64Array?h:new Float64Array(h),_=p.length,T=m.length,I=Math.min(_,T);if(_===0||_>20)throw r();if(p[0]===0)throw e();if(T===0||T>20)throw r();if(m[0]===0)throw e();if(p[0]!==1){for(let y=0;y<T;y+=1)m[y]/=p[0];for(let y=1;y<_;y+=1)p[y]/=p[0]}const v=n(s,d,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=l;const w=32,S=[],b=[],P=[];for(let y=0;y<o;y+=1){S.push(0);const C=new Float32Array(w),k=new Float32Array(w);C.fill(0),k.fill(0),b.push(C),P.push(k)}v.onaudioprocess=y=>{const C=y.inputBuffer,k=y.outputBuffer,x=C.numberOfChannels;for(let N=0;N<x;N+=1){const R=C.getChannelData(N),W=k.getChannelData(N);S[N]=R1(p,_,m,T,I,b[N],P[N],S[N],w,R,W)}};const D=s.sampleRate/2;return ta({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(y){v.channelCount=y},get channelCountMode(){return v.channelCountMode},set channelCountMode(y){v.channelCountMode=y},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(y){v.channelInterpretation=y},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...y){return v.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return v.dispatchEvent(y[0])},getFrequencyResponse(y,C,k){if(y.length!==C.length||C.length!==k.length)throw t();const x=y.length;for(let N=0;N<x;N+=1){const R=-Math.PI*(y[N]/D),W=[Math.cos(R),Math.sin(R)],Z=f0(m,W),Y=f0(p,W),J=Zb(Z,Y);C[N]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),k[N]=Math.atan2(J[1],J[0])}},removeEventListener(...y){return v.removeEventListener(y[0],y[1],y[2])}},v)},n2=(t,e)=>t.createMediaElementSource(e.mediaElement),r2=(t,e)=>{const n=t.createMediaStreamDestination();return pt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},s2=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},i2=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},o2=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,a2=(t,e,n,r,s,i)=>(o,a)=>{const l=o.createOscillator();return pt(l,a),Je(l,a,"detune"),Je(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):je(l,a,"type"),e(n,()=>n(o))||Rg(l),e(r,()=>r(o))||i(l,o),e(s,()=>s(o))||Pg(l),t(o,l),l},l2=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(pt(r,n),Je(r,n,"orientationX"),Je(r,n,"orientationY"),Je(r,n,"orientationZ"),Je(r,n,"positionX"),Je(r,n,"positionY"),Je(r,n,"positionZ"),je(r,n,"coneInnerAngle"),je(r,n,"coneOuterAngle"),je(r,n,"coneOuterGain"),je(r,n,"distanceModel"),je(r,n,"maxDistance"),je(r,n,"panningModel"),je(r,n,"refDistance"),je(r,n,"rolloffFactor"),r)},u2=(t,e,n,r,s,i,o,a,l,c)=>(h,{coneInnerAngle:d,coneOuterAngle:p,coneOuterGain:m,distanceModel:_,maxDistance:T,orientationX:I,orientationY:v,orientationZ:w,panningModel:S,positionX:b,positionY:P,positionZ:D,refDistance:E,rolloffFactor:y,...C})=>{const k=h.createPanner();if(C.channelCount>2||C.channelCountMode==="max")throw o();pt(k,C);const x={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=n(h,{...x,channelInterpretation:"speakers",numberOfInputs:6}),R=r(h,{...C,gain:1}),W=r(h,{...x,gain:1}),Z=r(h,{...x,gain:0}),Y=r(h,{...x,gain:0}),J=r(h,{...x,gain:0}),F=r(h,{...x,gain:0}),B=r(h,{...x,gain:0}),q=s(h,256,6,1),K=i(h,{...x,curve:new Float32Array([1,1]),oversample:"none"});let se=[I,v,w],Ze=[b,P,D];const xe=new Float32Array(1);q.onaudioprocess=({inputBuffer:ee})=>{const Hn=[l(ee,xe,0),l(ee,xe,1),l(ee,xe,2)];Hn.some((Wr,fr)=>Wr!==se[fr])&&(k.setOrientation(...Hn),se=Hn);const dr=[l(ee,xe,3),l(ee,xe,4),l(ee,xe,5)];dr.some((Wr,fr)=>Wr!==Ze[fr])&&(k.setPosition(...dr),Ze=dr)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0});const ce={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(ee){if(ee>2)throw o();R.channelCount=ee,k.channelCount=ee},get channelCountMode(){return k.channelCountMode},set channelCountMode(ee){if(ee==="max")throw o();R.channelCountMode=ee,k.channelCountMode=ee},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(ee){R.channelInterpretation=ee,k.channelInterpretation=ee},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(ee){k.coneInnerAngle=ee},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(ee){k.coneOuterAngle=ee},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(ee){if(ee<0||ee>1)throw e();k.coneOuterGain=ee},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(ee){k.distanceModel=ee},get inputs(){return[R]},get maxDistance(){return k.maxDistance},set maxDistance(ee){if(ee<0)throw new RangeError;k.maxDistance=ee},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return W.gain},get orientationY(){return Z.gain},get orientationZ(){return Y.gain},get panningModel(){return k.panningModel},set panningModel(ee){k.panningModel=ee},get positionX(){return J.gain},get positionY(){return F.gain},get positionZ(){return B.gain},get refDistance(){return k.refDistance},set refDistance(ee){if(ee<0)throw new RangeError;k.refDistance=ee},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(ee){if(ee<0)throw new RangeError;k.rolloffFactor=ee},addEventListener(...ee){return R.addEventListener(ee[0],ee[1],ee[2])},dispatchEvent(...ee){return R.dispatchEvent(ee[0])},removeEventListener(...ee){return R.removeEventListener(ee[0],ee[1],ee[2])}};d!==ce.coneInnerAngle&&(ce.coneInnerAngle=d),p!==ce.coneOuterAngle&&(ce.coneOuterAngle=p),m!==ce.coneOuterGain&&(ce.coneOuterGain=m),_!==ce.distanceModel&&(ce.distanceModel=_),T!==ce.maxDistance&&(ce.maxDistance=T),I!==ce.orientationX.value&&(ce.orientationX.value=I),v!==ce.orientationY.value&&(ce.orientationY.value=v),w!==ce.orientationZ.value&&(ce.orientationZ.value=w),S!==ce.panningModel&&(ce.panningModel=S),b!==ce.positionX.value&&(ce.positionX.value=b),P!==ce.positionY.value&&(ce.positionY.value=P),D!==ce.positionZ.value&&(ce.positionZ.value=D),E!==ce.refDistance&&(ce.refDistance=E),y!==ce.rolloffFactor&&(ce.rolloffFactor=y),(se[0]!==1||se[1]!==0||se[2]!==0)&&k.setOrientation(...se),(Ze[0]!==0||Ze[1]!==0||Ze[2]!==0)&&k.setPosition(...Ze);const _e=()=>{R.connect(k),t(R,K,0,0),K.connect(W).connect(N,0,0),K.connect(Z).connect(N,0,1),K.connect(Y).connect(N,0,2),K.connect(J).connect(N,0,3),K.connect(F).connect(N,0,4),K.connect(B).connect(N,0,5),N.connect(q).connect(h.destination)},Fe=()=>{R.disconnect(k),a(R,K,0,0),K.disconnect(W),W.disconnect(N),K.disconnect(Z),Z.disconnect(N),K.disconnect(Y),Y.disconnect(N),K.disconnect(J),J.disconnect(N),K.disconnect(F),F.disconnect(N),K.disconnect(B),B.disconnect(N),N.disconnect(q),q.disconnect(h.destination)};return c(ta(ce,k),_e,Fe)},c2=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},fu=(t,e,n,r)=>t.createScriptProcessor(e,n,r),h2=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return pt(i,r),Je(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},d2=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h={...c,oversample:"none"},d=(_,T,I,v)=>{const w=new Float32Array(16385),S=new Float32Array(16385);for(let C=0;C<16385;C+=1){const k=C/16384*l;w[C]=Math.cos(k),S[C]=Math.sin(k)}const b=n(_,{...c,gain:0}),P=r(_,{...h,curve:w}),D=r(_,{...h,curve:a}),E=n(_,{...c,gain:0}),y=r(_,{...h,curve:S});return{connectGraph(){T.connect(b),T.connect(D.inputs===void 0?D:D.inputs[0]),T.connect(E),D.connect(I),I.connect(P.inputs===void 0?P:P.inputs[0]),I.connect(y.inputs===void 0?y:y.inputs[0]),P.connect(b.gain),y.connect(E.gain),b.connect(v,0,0),E.connect(v,0,1)},disconnectGraph(){T.disconnect(b),T.disconnect(D.inputs===void 0?D:D.inputs[0]),T.disconnect(E),D.disconnect(I),I.disconnect(P.inputs===void 0?P:P.inputs[0]),I.disconnect(y.inputs===void 0?y:y.inputs[0]),P.disconnect(b.gain),y.disconnect(E.gain),b.disconnect(v,0,0),E.disconnect(v,0,1)}}},p=(_,T,I,v)=>{const w=new Float32Array(16385),S=new Float32Array(16385),b=new Float32Array(16385),P=new Float32Array(16385),D=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>D){const F=(J-D)/(16384-D)*l;w[J]=Math.cos(F),S[J]=Math.sin(F),b[J]=0,P[J]=1}else{const F=J/(16384-D)*l;w[J]=1,S[J]=0,b[J]=Math.cos(F),P[J]=Math.sin(F)}const E=e(_,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(_,{...c,gain:0}),C=r(_,{...h,curve:w}),k=n(_,{...c,gain:0}),x=r(_,{...h,curve:S}),N=r(_,{...h,curve:a}),R=n(_,{...c,gain:0}),W=r(_,{...h,curve:b}),Z=n(_,{...c,gain:0}),Y=r(_,{...h,curve:P});return{connectGraph(){T.connect(E),T.connect(N.inputs===void 0?N:N.inputs[0]),E.connect(y,0),E.connect(k,0),E.connect(R,1),E.connect(Z,1),N.connect(I),I.connect(C.inputs===void 0?C:C.inputs[0]),I.connect(x.inputs===void 0?x:x.inputs[0]),I.connect(W.inputs===void 0?W:W.inputs[0]),I.connect(Y.inputs===void 0?Y:Y.inputs[0]),C.connect(y.gain),x.connect(k.gain),W.connect(R.gain),Y.connect(Z.gain),y.connect(v,0,0),R.connect(v,0,0),k.connect(v,0,1),Z.connect(v,0,1)},disconnectGraph(){T.disconnect(E),T.disconnect(N.inputs===void 0?N:N.inputs[0]),E.disconnect(y,0),E.disconnect(k,0),E.disconnect(R,1),E.disconnect(Z,1),N.disconnect(I),I.disconnect(C.inputs===void 0?C:C.inputs[0]),I.disconnect(x.inputs===void 0?x:x.inputs[0]),I.disconnect(W.inputs===void 0?W:W.inputs[0]),I.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),C.disconnect(y.gain),x.disconnect(k.gain),W.disconnect(R.gain),Y.disconnect(Z.gain),y.disconnect(v,0,0),R.disconnect(v,0,0),k.disconnect(v,0,1),Z.disconnect(v,0,1)}}},m=(_,T,I,v,w)=>{if(T===1)return d(_,I,v,w);if(T===2)return p(_,I,v,w);throw s()};return(_,{channelCount:T,channelCountMode:I,pan:v,...w})=>{if(I==="max")throw s();const S=t(_,{...w,channelCount:1,channelCountMode:I,numberOfInputs:2}),b=n(_,{...w,channelCount:T,channelCountMode:I,gain:1}),P=n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:D,disconnectGraph:E}=m(_,T,b,P,S);Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"maxValue",{get:()=>1}),Object.defineProperty(P.gain,"minValue",{get:()=>-1});const y={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(N){b.channelCount!==N&&(C&&E(),{connectGraph:D,disconnectGraph:E}=m(_,N,b,P,S),C&&D()),b.channelCount=N},get channelCountMode(){return b.channelCountMode},set channelCountMode(N){if(N==="clamped-max"||N==="max")throw s();b.channelCountMode=N},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(N){b.channelInterpretation=N},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return P.gain},addEventListener(...N){return b.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return b.dispatchEvent(N[0])},removeEventListener(...N){return b.removeEventListener(N[0],N[1],N[2])}};let C=!1;const k=()=>{D(),C=!0},x=()=>{E(),C=!1};return i(ta(y,S),k,x)}},f2=(t,e,n,r,s,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);pt(c,l);const h=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(h!==null&&h.length<2)throw e();je(c,{curve:h},"curve"),je(c,l,"oversample");let d=null,p=!1;return o(c,"curve",T=>()=>T.call(c),T=>I=>(T.call(c,I),p&&(r(I)&&d===null?d=t(a,c):!r(I)&&d!==null&&(d(),d=null)),I)),s(c,()=>{p=!0,r(c.curve)&&(d=t(a,c))},()=>{p=!1,d!==null&&(d(),d=null)})},p2=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...l})=>{const c=i.createWaveShaper(),h=i.createWaveShaper();pt(c,l),pt(h,l);const d=n(i,{...l,gain:1}),p=n(i,{...l,gain:-1}),m=n(i,{...l,gain:1}),_=n(i,{...l,gain:-1});let T=null,I=!1,v=null;const w={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(P){d.channelCount=P,p.channelCount=P,c.channelCount=P,m.channelCount=P,h.channelCount=P,_.channelCount=P},get channelCountMode(){return c.channelCountMode},set channelCountMode(P){d.channelCountMode=P,p.channelCountMode=P,c.channelCountMode=P,m.channelCountMode=P,h.channelCountMode=P,_.channelCountMode=P},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(P){d.channelInterpretation=P,p.channelInterpretation=P,c.channelInterpretation=P,m.channelInterpretation=P,h.channelInterpretation=P,_.channelInterpretation=P},get context(){return c.context},get curve(){return v},set curve(P){if(P!==null&&P.length<2)throw e();if(P===null)c.curve=P,h.curve=P;else{const D=P.length,E=new Float32Array(D+2-D%2),y=new Float32Array(D+2-D%2);E[0]=P[0],y[0]=-P[D-1];const C=Math.ceil((D+1)/2),k=(D+1)/2-1;for(let x=1;x<C;x+=1){const N=x/C*k,R=Math.floor(N),W=Math.ceil(N);E[x]=R===W?P[R]:(1-(N-R))*P[R]+(1-(W-N))*P[W],y[x]=R===W?-P[D-1-R]:-((1-(N-R))*P[D-1-R])-(1-(W-N))*P[D-1-W]}E[C]=D%2===1?P[C-1]:(P[C-2]+P[C-1])/2,c.curve=E,h.curve=y}v=P,I&&(r(v)&&T===null?T=t(i,d):T!==null&&(T(),T=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(P){c.oversample=P,h.oversample=P},addEventListener(...P){return d.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return d.dispatchEvent(P[0])},removeEventListener(...P){return d.removeEventListener(P[0],P[1],P[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const S=()=>{d.connect(c).connect(m),d.connect(p).connect(h).connect(_).connect(m),I=!0,r(v)&&(T=t(i,d))},b=()=>{d.disconnect(c),c.disconnect(m),d.disconnect(p),p.disconnect(h),h.disconnect(_),_.disconnect(m),I=!1,T!==null&&(T(),T=null)};return s(ta(w,m),S,b)},Kt=()=>new DOMException("","NotSupportedError"),m2={numberOfChannels:1},g2=(t,e,n,r,s)=>class extends t{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:h,numberOfChannels:d,sampleRate:p}={...m2,...c},m=r(d,h,p);e(bl,()=>bl(m))||m.addEventListener("statechange",(()=>{let _=0;const T=I=>{this._state==="running"&&(_>0?(m.removeEventListener("statechange",T),I.stopImmediatePropagation(),this._waitForThePromiseToSettle(I)):_+=1)};return T})()),super(m,d),this._length=h,this._nativeOfflineAudioContext=m,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,S1(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},_2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},y2=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={..._2,...c},p=n(h,d),m=i(h),_=m?r():null,T=l.sampleRate/2;super(l,!1,p,_),this._detune=e(this,m,p.detune,153600,-153600),this._frequency=e(this,m,p.frequency,T,-T),this._nativeOscillatorNode=p,this._onended=null,this._oscillatorNodeRenderer=_,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const h=this._nativeOscillatorNode.onended;this._onended=h!==null&&h===c?l:h}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Mo(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Sr(this)&&uu(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},v2=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const c=async(h,d)=>{let p=n(h);const m=jt(p,d);if(!m){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:o===null?void 0:o,type:p.type};p=e(d,_),a!==null&&p.start(a),l!==null&&p.stop(l)}return i.set(d,p),m?(await t(d,h.detune,p.detune),await t(d,h.frequency,p.frequency)):(await r(d,h.detune,p.detune),await r(d,h.frequency,p.frequency)),await s(h,d,p),p};return{set periodicWave(h){o=h},set start(h){a=h},set stop(h){l=h},render(h,d){const p=i.get(d);return p!==void 0?Promise.resolve(p):c(h,d)}}},w2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},T2=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...w2,...c},p=n(h,d),m=i(h),_=m?r():null;super(l,!1,p,_),this._nativePannerNode=p,this._orientationX=e(this,m,p.orientationX,Wt,Xt),this._orientationY=e(this,m,p.orientationY,Wt,Xt),this._orientationZ=e(this,m,p.orientationZ,Wt,Xt),this._positionX=e(this,m,p.positionX,Wt,Xt),this._positionY=e(this,m,p.positionY,Wt,Xt),this._positionZ=e(this,m,p.positionZ,Wt,Xt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},E2=(t,e,n,r,s,i,o,a,l,c)=>()=>{const h=new WeakMap;let d=null;const p=async(m,_)=>{let T=null,I=i(m);const v={channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation},w={...v,coneInnerAngle:I.coneInnerAngle,coneOuterAngle:I.coneOuterAngle,coneOuterGain:I.coneOuterGain,distanceModel:I.distanceModel,maxDistance:I.maxDistance,panningModel:I.panningModel,refDistance:I.refDistance,rolloffFactor:I.rolloffFactor},S=jt(I,_);if("bufferSize"in I)T=r(_,{...v,gain:1});else if(!S){const b={...w,orientationX:I.orientationX.value,orientationY:I.orientationY.value,orientationZ:I.orientationZ.value,positionX:I.positionX.value,positionY:I.positionY.value,positionZ:I.positionZ.value};I=s(_,b)}if(h.set(_,T===null?I:T),T!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new o(6,m.context.length,_.sampleRate),N=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});N.connect(x.destination),d=(async()=>{const R=await Promise.all([m.orientationX,m.orientationY,m.orientationZ,m.positionX,m.positionY,m.positionZ].map(async(W,Z)=>{const Y=n(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await a(x,W,Y.offset),Y}));for(let W=0;W<6;W+=1)R[W].connect(N,0,W),R[W].start(0);return c(x)})()}const b=await d,P=r(_,{...v,gain:1});await l(m,_,P);const D=[];for(let x=0;x<b.numberOfChannels;x+=1)D.push(b.getChannelData(x));let E=[D[0][0],D[1][0],D[2][0]],y=[D[3][0],D[4][0],D[5][0]],C=r(_,{...v,gain:1}),k=s(_,{...w,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:y[0],positionY:y[1],positionZ:y[2]});P.connect(C).connect(k.inputs[0]),k.connect(T);for(let x=128;x<b.length;x+=128){const N=[D[0][x],D[1][x],D[2][x]],R=[D[3][x],D[4][x],D[5][x]];if(N.some((W,Z)=>W!==E[Z])||R.some((W,Z)=>W!==y[Z])){E=N,y=R;const W=x/_.sampleRate;C.gain.setValueAtTime(0,W),C=r(_,{...v,gain:0}),k=s(_,{...w,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),C.gain.setValueAtTime(1,W),P.connect(C).connect(k.inputs[0]),k.connect(T)}}return T}return S?(await t(_,m.orientationX,I.orientationX),await t(_,m.orientationY,I.orientationY),await t(_,m.orientationZ,I.orientationZ),await t(_,m.positionX,I.positionX),await t(_,m.positionY,I.positionY),await t(_,m.positionZ,I.positionZ)):(await a(_,m.orientationX,I.orientationX),await a(_,m.orientationY,I.orientationY),await a(_,m.orientationZ,I.orientationZ),await a(_,m.positionX,I.positionX),await a(_,m.positionY,I.positionY),await a(_,m.positionZ,I.positionZ)),ea(I)?await l(m,_,I.inputs[0]):await l(m,_,I),I};return{render(m,_){const T=h.get(_);return T!==void 0?Promise.resolve(T):p(m,_)}}},S2={disableNormalization:!1},I2=(t,e,n,r)=>class D1{constructor(i,o){const a=e(i),l=r({...S2,...o}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===D1.prototype||n.has(i)}},C2=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),A2=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,h])=>{const p=await e(c).render(c,s),m=r.context.destination;!n(c)&&(r!==m||!n(r))&&p.connect(i,h,l)})).reduce((a,l)=>[...a,...l],[]))},k2=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const h=await t(a).render(a,s);n(a)||h.connect(i,l)}))},x2=(t,e,n,r)=>s=>t(bl,()=>bl(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),R2=t=>(e,n)=>{t.set(e,n)},P2=t=>(e,n)=>t.set(e,n),N2=(t,e,n,r,s,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(h=>n(h).render(h,c)))).then(()=>s(c)).then(h=>(typeof h.copyFromChannel!="function"?(o(h),Ag(h)):e(i,()=>i(h))||a(h),t.add(h),h)),b2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},D2=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...b2,...l},d=n(c,h),p=i(c),m=p?r():null;super(a,!1,d,m),this._pan=e(this,p,d.pan)}get pan(){return this._pan}},O2=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=jt(c,l);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return i.set(l,c),h?await t(l,a.pan,c.pan):await r(l,a.pan,c.pan),ea(c)?await s(a,l,c.inputs[0]):await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},M2=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},V2=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},L2=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},F2=()=>new DOMException("","UnknownError"),U2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},j2=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...U2,...c},p=n(h,d),_=i(h)?r():null;super(l,!0,p,_),this._isCurveNullified=!1,this._nativeWaveShaperNode=p,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},B2=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!jt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,c)}return r.set(o,a),ea(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},z2=()=>typeof window>"u"?null:window,W2=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=r.length;for(let d=o<0?-o:0;d+o<l&&d<h;d+=1)r[d]=c[d+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=r.length;for(let d=o<0?-o:0;d+o<l&&d<h;d+=1)c[d+o]=r[d]}},q2=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},$2=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},H2=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)s.connect(r,0,l)},()=>s.disconnect(r))},O1=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),M1=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},pu=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},G2=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),K2=t=>({...t,channelCount:t.numberOfOutputs}),Q2=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},V1=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;V1(t,e,n+1e-7)}},Y2=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},X2=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},J2=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ng=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},L1=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},bg=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Z2=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},eD=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},F1=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),ta(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},na=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},tD=TP(Oi),nD=kP(Oi),rD=UN(gd),U1=new WeakMap,sD=rb(U1),Wn=mN(new Map,new WeakMap),or=z2(),j1=Db(Wn,ur),Dg=nb(qt),Nt=A2(qt,Dg,wi),iD=bP(j1,Le,Nt),Ne=ob(md),Ur=o2(or),Ae=Sb(Ur),B1=new WeakMap,z1=QN(na),mu=Lb(or),Og=vb(mu),Mg=wb(or),W1=Tb(or),Dl=Ub(or),it=rN(EP(g1),AP(tD,nD,gh,rD,_h,qt,sD,lu,Le,Oi,Sr,wi,xc),Wn,pb($p,_h,qt,Le,Nl,Sr),ur,_d,Kt,MN(gh,$p,qt,Le,Nl,Ne,Sr,Ae),zN(B1,qt,zn),z1,Ne,Og,Mg,W1,Ae,Dl),oD=NP(it,iD,ur,j1,Ne,Ae),Vg=new WeakSet,p0=Ob(or),q1=xN(new Uint32Array(1)),Lg=W2(q1,ur),Fg=q2(q1),$1=OP(Vg,Wn,Kt,p0,Ur,M2(p0),Lg,Fg),yd=xP(rn),H1=k2(Dg,cu,wi),cr=EN(H1),ra=Vb(yd,Wn,Y2,X2,J2,Ng,L1,bg,eD,$2(pu),F1),hr=C2(sb(cu),H1),aD=LP(cr,ra,Le,hr,Nt),qn=sN(SP(_1),B1,Cg,iN,mP,gP,_P,yP,vP,zp,p1,mu,V1),lD=VP(it,aD,qn,Et,ra,Ne,Ae,na),uD=HP(it,GP,ur,Et,Fb(rn,pu),Ne,Ae,Nt),cD=pN(cr,N1,Le,hr,Nt),Mi=P2(U1),hD=fN(it,qn,cD,_d,N1,Ne,Ae,Mi),qs=Nb(Oi,Mg),dD=H2(Et,qs),$s=Hb(mu,dD),fD=yN($s,Le,Nt),pD=_N(it,fD,$s,Ne,Ae),mD=TN(du,Le,Nt),gD=wN(it,mD,du,Ne,Ae,K2),_D=Qb(yd,ra,rn,qs),sa=Kb(yd,Wn,_D,Ng,bg),yD=kN(cr,sa,Le,hr,Nt),vD=AN(it,qn,yD,sa,Ne,Ae,na),G1=Yb(Kt,pu),wD=NN(G1,Le,Nt),TD=PN(it,wD,G1,Ne,Ae,Mi),ED=FN(cr,b1,Le,hr,Nt),SD=LN(it,qn,ED,b1,Ne,Ae,Mi),K1=Xb(Kt),ID=HN(cr,K1,Le,hr,Nt),CD=$N(it,qn,ID,K1,Kt,Ne,Ae,Mi),AD=eb(cr,rn,Le,hr,Nt),kD=ZN(it,qn,AD,rn,Ne,Ae),xD=t2(_d,Et,fu,Kt),vd=x2(Wn,rn,fu,L2(rn,Ur)),RD=fb(ra,Le,Ur,Nt,vd),PD=Jb(xD),ND=hb(it,PD,RD,Ne,Ae,Mi),bD=KP(qn,$s,sa,fu,Kt,O1,Ae,pu),Q1=new WeakMap,DD=Pb(uD,bD,z1,Ae,Q1,na),Y1=a2(yd,Wn,Ng,L1,bg,F1),OD=v2(cr,Y1,Le,hr,Nt),MD=y2(it,qn,Y1,OD,Ne,Ae,na),X1=IN(ra),VD=p2(X1,Et,rn,M1,qs),wd=f2(X1,Et,VD,M1,qs,mu,pu),LD=u2(gh,Et,$s,rn,fu,wd,Kt,_h,O1,qs),J1=l2(LD),FD=E2(cr,$s,sa,rn,J1,Le,Ur,hr,Nt,vd),UD=T2(it,qn,J1,FD,Ne,Ae,Mi),jD=c2(ur),BD=I2(jD,Ne,new WeakSet,Q2),zD=d2($s,du,rn,wd,Kt,qs),Z1=h2(zD,Kt),WD=O2(cr,Z1,Le,hr,Nt),qD=D2(it,qn,Z1,WD,Ne,Ae),$D=B2(wd,Le,Nt),HD=j2(it,Et,wd,$D,Ne,Ae,Mi),eS=Ib(or),Ug=YN(or),tS=new WeakMap,GD=ab(tS,Ur),KD=eS?CP(Wn,Kt,KN(or),Ug,XN(wP),Ne,GD,Ae,Dl,new WeakMap,new WeakMap,V2(Dl,Ur),or):void 0,QD=Eb(Og,Ae),YD=ON(Vg,Wn,DN,GN,new WeakSet,Ne,QD,ph,bl,Lg,Fg),nS=hN(KD,oD,$1,lD,hD,pD,gD,vD,TD,YD,SD,CD,kD,ND,DD,MD,UD,BD,qD,HD),XD=Cb(it,n2,Ne,Ae),JD=kb(it,r2,Ne,Ae),ZD=xb(it,s2,Ne,Ae),eO=i2(Et,Ae),tO=Rb(it,eO,Ne),nO=$P(nS,Et,Kt,F2,XD,JD,ZD,tO,mu),jg=lb(Q1),rO=RP(jg),rS=SN(ur),sO=jN(jg),sS=WN(ur),iS=new WeakMap,iO=tb(iS,zn),oO=$b(rS,ur,Et,$s,du,sa,rn,fu,Kt,sS,Ug,iO,qs),aO=Bb(Et,oO,rn,Kt,qs),lO=cN(cr,rS,ra,$s,du,sa,rn,sO,sS,Ug,Le,Dl,Ur,hr,Nt,vd),uO=ib(tS),cO=R2(iS),m0=eS?aN(rO,it,qn,lO,aO,qt,uO,Ne,Ae,Dl,G2,cO,Z2,na):void 0,hO=bN(Kt,Ur),dO=N2(Vg,Wn,Dg,jg,vd,ph,Lg,Fg),fO=g2(nS,Wn,Et,hO,dO),pO=mb(md,Og),mO=gb(Ig,Mg),gO=_b(Cg,W1),_O=yb(md,Ae);function Tn(t){return t===void 0}function pe(t){return t!==void 0}function yO(t){return typeof t=="function"}function Ps(t){return typeof t=="number"}function fi(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function vO(t){return typeof t=="boolean"}function Fn(t){return Array.isArray(t)}function Nr(t){return typeof t=="string"}function lc(t){return Nr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function le(t,e){if(!t)throw new Error(e)}function Ns(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function oS(t){!t.isOffline&&t.state!=="running"&&Bg('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let aS=!1,g0=!1;function _0(t){aS=t}function wO(t){Tn(t)&&aS&&!g0&&(g0=!0,Bg("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let lS=console;function TO(...t){lS.log(...t)}function Bg(...t){lS.warn(...t)}function EO(t){return new nO(t)}function SO(t,e,n){return new fO(t,e,n)}const Ir=typeof self=="object"?self:null,IO=Ir&&(Ir.hasOwnProperty("AudioContext")||Ir.hasOwnProperty("webkitAudioContext"));function CO(t,e,n){return le(pe(m0),"This node only works in a secure context (https or localhost)"),new m0(t,e,n)}function $n(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ze(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}class AO{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ti(t){return gO(t)}function Es(t){return mO(t)}function Rc(t){return _O(t)}function Gi(t){return pO(t)}function kO(t){return t instanceof $1}function xO(t,e){return t==="value"||Ti(e)||Es(e)||kO(e)}function wo(t,...e){if(!e.length)return t;const n=e.shift();if(fi(t)&&fi(n))for(const r in n)xO(r,n[r])?t[r]=n[r]:fi(n[r])?(t[r]||Object.assign(t,{[r]:{}}),wo(t[r],n[r])):Object.assign(t,{[r]:n[r]});return wo(t,...e)}function RO(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function H(t,e,n=[],r){const s={},i=Array.from(e);if(fi(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(wo(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&fi(i[0]))wo(s,i[0]);else for(let o=0;o<n.length;o++)pe(i[o])&&(s[n[o]]=i[o]);return wo(t,s)}function PO(t){return t.constructor.getDefaults()}function To(t,e){return Tn(t)?e:t}function y0(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class jr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Ir&&this.toString()===Ir.TONE_DEBUG_CLASS)&&TO(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}jr.version=f1;const zg=1e-6;function Vo(t,e){return t>e+zg}function Yp(t,e){return Vo(t,e)||Nn(t,e)}function Th(t,e){return t+zg<e}function Nn(t,e){return Math.abs(t-e)<zg}function NO(t,e,n){return Math.max(Math.min(t,n),e)}class En extends jr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=H(En.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(le(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];le(Yp(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Nn(this._timeline[n].time,e)){for(let r=n;r>=0&&Nn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Yp(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if(Nn(a[n],e)){for(let c=o;c<this._timeline.length;c++){const h=this._timeline[c];if(Nn(h[n],e))o=c;else break}return o}else{if(Th(a[n],e)&&Vo(l[n],e))return o;Vo(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&Nn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&Nn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const uS=[];function Td(t){uS.push(t)}function bO(t){uS.forEach(e=>e(t))}const cS=[];function Ed(t){cS.push(t)}function DO(t){cS.forEach(e=>e(t))}class gu extends jr{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{Tn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(Tn(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(Tn(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(gu.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class hS extends gu{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class _u extends hS{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new En,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=H(_u.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=EO({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new AO(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(bO(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return le(Gi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return le(Gi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return le(Gi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){le(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){le(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){le(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){le(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return CO(this.rawContext,e,n)}addAudioWorkletModule(e){return ze(this,void 0,void 0,function*(){le(pe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ze(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Gi(this._context)?this._context.resume():Promise.resolve()}close(){return ze(this,void 0,void 0,function*(){Gi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&DO(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class OO extends hS{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ze(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ke(t,e){Fn(e)?e.forEach(n=>Ke(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function dS(t,e){Fn(e)?e.forEach(n=>dS(t,n)):Object.defineProperty(t,e,{writable:!0})}const Ce=()=>{};class Oe extends jr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ce;const e=H(Oe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Nr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ce,onload:Ce,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:bn().sampleRate}set(e){return e instanceof Oe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ze(this,void 0,void 0,function*(){const n=Oe.load(e).then(r=>{this.set(r),this.onload(this)});Oe.downloads.push(n);try{yield n}finally{const r=Oe.downloads.indexOf(n);Oe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Fn(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=bn(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Ps(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(Ps(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){le(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);le(r<s,"The start time must be less than the end time");const i=s-r,o=bn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new Oe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Oe().fromArray(e)}static fromUrl(e){return ze(this,void 0,void 0,function*(){return yield new Oe().load(e)})}static load(e){return ze(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const l=n[1].split("|");let c=l[0];for(const h of l)if(Oe.supportsType(h)){c=h;break}e=e.replace(n[0],c)}const r=Oe.baseUrl===""||Oe.baseUrl.endsWith("/")?Oe.baseUrl:Oe.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield bn().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ze(this,void 0,void 0,function*(){for(yield Promise.resolve();Oe.downloads.length;)yield Oe.downloads[0]})}}Oe.baseUrl="";Oe.downloads=[];class Wg extends _u{constructor(){super({clockSource:"offline",context:Rc(arguments[0])?arguments[0]:SO(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Rc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Rc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ze(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(e=!0){return ze(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Oe(n)})}close(){return Promise.resolve()}}const fS=new OO;let li=fS;function bn(){return li===fS&&IO&&MO(new _u),li}function MO(t,e=!1){e&&li.dispose(),Gi(t)?li=new _u(t):Rc(t)?li=new Wg(t):li=t}function VO(){return li.resume()}if(Ir&&!Ir.TONE_SILENCE_LOGGING){const e=` * Tone.js v${f1} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function LO(t){return Math.pow(10,t/20)}function FO(t){return 20*(Math.log(t)/Math.LN10)}function pS(t){return Math.pow(2,t/12)}let Sd=440;function UO(){return Sd}function jO(t){Sd=t}function Xp(t){return Math.round(mS(t))}function mS(t){return 69+12*Math.log2(t/Sd)}function BO(t){return Sd*Math.pow(2,(t-69)/12)}class qg extends jr{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof qg&&this.fromType(this._val),Tn(this._val))return this._noArg();if(Nr(this._val)&&Tn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(fi(this._val)){let e=0;for(const n in this._val)if(pe(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(pe(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Nr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Dn extends qg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Dn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new Dn(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Dn(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Xp(this.toFrequency())}_now(){return this.context.now()}}class vn extends Dn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return UO()}static set A4(e){jO(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:vn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=zO[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:vn.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new vn(this.context,this.valueOf()*pS(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Xp(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/vn.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),WO[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return BO(e)}static ftom(e){return Xp(e)}}const zO={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},WO=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class rl extends Dn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class nn extends jr{constructor(){super();const e=H(nn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:bn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return wO(e),new Dn(this.context,e).toSeconds()}toFrequency(e){return new vn(this.context,e).toFrequency()}toTicks(e){return new rl(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{Tn(e[r])&&delete n[r]}),n}get(){const e=PO(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];pe(r)&&pe(r.value)&&pe(r.setValueAtTime)?e[n]=r.value:r instanceof nn?e[n]=r._getPartialProperties(e[n]):Fn(r)||Ps(r)||Nr(r)||vO(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&pe(this[n])&&(this[n]&&pe(this[n].value)&&pe(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof nn?this[n].set(e[n]):this[n]=e[n])}),this}}class $g extends En{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return Ns(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Ue extends nn{constructor(){super(H(Ue.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=H(Ue.getDefaults(),arguments,["param","units","convert"]);for(le(pe(e.param)&&(Ti(e.param)||e.param instanceof Ue),"param must be an AudioParam");!Ti(e.param);)e.param=e.param._param;this._swappable=pe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new En(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,pe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(nn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return pe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return pe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return pe(this.maxValue)&&pe(this.minValue)&&Ns(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?LO(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?FO(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return le(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return le(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=Nn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return le(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);le(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),le(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return le(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));le(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&Nn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){le(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class de extends nn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return pe(this.input)?Ti(this.input)||this.input instanceof Ue?1:this.input.numberOfInputs:0}get numberOfOutputs(){return pe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return pe(e)&&(e instanceof de||Es(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();le(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Vi(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Bg("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return qO(this,e,n,r),this}chain(...e){return Jp(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),pe(this.input)&&(this.input instanceof de?this.input.dispose():Es(this.input)&&this.input.disconnect()),pe(this.output)&&(this.output instanceof de?this.output.dispose():Es(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Jp(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof de?n.connect(r):Es(n)&&Vi(n,r),r),e)}function Vi(t,e,n=0,r=0){for(le(pe(t),"Cannot connect from undefined node"),le(pe(e),"Cannot connect to undefined node"),(e instanceof de||Es(e))&&le(e.numberOfInputs>0,"Cannot connect to node with no inputs"),le(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof de||e instanceof Ue;)pe(e.input)&&(e=e.input);for(;t instanceof de;)pe(t.output)&&(t=t.output);Ti(e)?t.connect(e,n):t.connect(e,n,r)}function qO(t,e,n=0,r=0){if(pe(e))for(;e instanceof de;)e=e.input;for(;!Es(t);)pe(t.output)&&(t=t.output);Ti(e)?t.disconnect(e,n):Es(e)?t.disconnect(e,n,r):t.disconnect()}class St extends de{constructor(){super(H(St.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=H(St.getDefaults(),arguments,["gain","units"]);this.gain=new Ue({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ke(this,"gain")}static getDefaults(){return Object.assign(de.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Lo extends de{constructor(e){super(e),this.onended=Ce,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new St({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(de.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ce})}_startGain(e,n=1){le(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){le(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ce&&(this.onended(this),this.onended=Ce,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),le(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ce,this}}class Eh extends Lo{constructor(){super(H(Eh.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=H(Eh.getDefaults(),arguments,["offset"]);Vi(this._source,this._gainNode),this.offset=new Ue({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Lo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class mt extends de{constructor(){super(H(mt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=H(mt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Eh({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(de.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return Hg(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Hg(t,e,n,r){(e instanceof Ue||Ti(e)||e instanceof mt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof mt&&(e.overridden=!0)),Vi(t,e,n,r)}class Sh extends Ue{constructor(){super(H(Sh.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new En(1/0),this._multiplier=1;const e=H(Sh.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+n,c=this._exponentialApproach(i.time,i.value,s,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const l=o*a+s.time,c=this._exponentialInterpolate(s.time,s.value,n,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Tn(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),l=(-s+a)/o,c=(-s-a)/o;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Ih extends mt{constructor(){super(H(Ih.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=H(Ih.getDefaults(),arguments,["value"]);this.input=this._param=new Sh({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(mt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ch extends nn{constructor(){super(H(Ch.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new $g,this._tickOffset=new En,this._ticksAtTime=new En,this._secondsAtTime=new En;const e=H(Ch.getDefaults(),arguments,["frequency"]);this.frequency=new Ih({context:this.context,units:e.units,value:e.frequency}),Ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},nn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),pe(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,c=>{let h=o.time;const d=this._tickOffset.get(c.time);d&&d.time>=o.time&&(a=d.ticks,h=d.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(h),c.time!==i.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let c=i.time;const h=this._tickOffset.get(l.time);h&&h.time>=i.time&&(o=h.seconds,c=h.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!==r.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),c=a-l;let h=Math.ceil(c)-c;h=Nn(h,1)?0:h;let d=this.frequency.getTimeOfTick(a+h);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(p){i=p;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ol extends nn{constructor(){super(H(Ol.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ce,this._lastUpdate=0,this._state=new $g("stopped"),this._boundLoop=this._loop.bind(this);const e=H(Ol.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ch({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(nn.getDefaults(),{callback:Ce,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){oS(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}gu.mixin(Ol);class Gg extends jr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=H(Gg.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ce,onload:Ce,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return le(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=Ce,s=Ce){return Nr(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Oe(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new Oe(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ho extends rl{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class $O extends nn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new En,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Td(t=>{t.draw=new $O({context:t})});Ed(t=>{t.draw.dispose()});class HO extends jr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){le(pe(e.time),"Events must have a time property"),le(pe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new GO(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class GO{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class bs extends de{constructor(){super(H(bs.getDefaults(),arguments,["volume"])),this.name="Volume";const e=H(bs.getDefaults(),arguments,["volume"]);this.input=this.output=new St({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ke(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(de.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ah extends de{constructor(){super(H(Ah.getDefaults(),arguments)),this.name="Destination",this.input=new bs({context:this.context}),this.output=new St({context:this.context}),this.volume=this.input.volume;const e=H(Ah.getDefaults(),arguments);Jp(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(de.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Jp(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Td(t=>{t.destination=new Ah({context:t})});Ed(t=>{t.destination.dispose()});class KO extends jr{constructor(e){super(),this.name="TimelineValue",this._timeline=new En({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Fo extends de{constructor(){super(Object.assign(H(Fo.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return Hg(this,e,n,r),this}}class Uo extends Fo{constructor(){super(Object.assign(H(Uo.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=H(Uo.getDefaults(),arguments,["mapping","length"]);Fn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):yO(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(mt.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));le(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kh extends Fo{constructor(){super(Object.assign(H(kh.getDefaults(),arguments,["value"]))),this.name="Pow";const e=H(kh.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Uo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Fo.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ds{constructor(e,n){this.id=Ds._eventId++,this._remainderTime=0;const r=Object.assign(Ds.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:Ce,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ds._eventId=0;class Kg extends Ds{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Kg.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ds.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Th(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ho(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Th(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ho(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Vo(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ml extends nn{constructor(){super(H(Ml.getDefaults(),arguments)),this.name="Transport",this._loop=new KO(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new En,this._repeatedEvents=new HO,this._syncedSignals=[],this._swingAmount=0;const e=H(Ml.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Ol({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ke(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(nn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new ho(this.context,this._swingTicks*2/3).toSeconds()*s}_0(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),_0(!1)}schedule(e,n){const r=new Ds(this,{callback:e,time:new rl(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new Kg(this,{callback:e,duration:new Dn(this.context,s).toTicks(),interval:new Dn(this.context,n).toTicks(),time:new rl(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new Ds(this,{callback:e,once:!0,time:new rl(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new ho(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return pe(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Fn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Dn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Dn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ho(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new ho(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,c=new St(l),h=new kh(-1),d=new St(l);s.chain(c,h,d),s=d,i=1/i,o=[c,h,d]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const a=new St(n);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),dS(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}gu.mixin(Ml);Td(t=>{t.transport=new Ml({context:t})});Ed(t=>{t.transport.dispose()});class hn extends de{constructor(e){super(e),this.input=void 0,this._state=new $g("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ce,this._syncedStop=Ce,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new bs({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ke(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(de.getDefaults(),{mute:!1,onstop:Ce,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=Tn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")le(Vo(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(To(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else oS(this.context),this._start(s,n,r);return this}stop(e){let n=Tn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||pe(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Vo(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ce,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vl extends Lo{constructor(){super(H(Vl.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=H(Vl.getDefaults(),arguments,["url","onload"]);Vi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ue({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Oe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Lo.getDefaults(),{url:new Oe,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){le(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=To(n,this.loopStart):n=To(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;Yp(o,a)&&(o=(o-l)%c+l),Nn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Th(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),pe(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class fo extends de{constructor(){super(H(fo.getDefaults(),arguments,["volume"])),this.name="UserMedia";const e=H(fo.getDefaults(),arguments,["volume"]);this._volume=this.output=new bs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ke(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(de.getDefaults(),{mute:!1,volume:0})}open(e){return ze(this,void 0,void 0,function*(){le(fo.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const n=yield fo.enumerateDevices();Ps(e)?this._device=n[e]:(this._device=n.find(i=>i.label===e||i.deviceId===e),!this._device&&n.length>0&&(this._device=n[0]),le(pe(this._device),`No matching device ${e}`));const r={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(r.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(r);if(!this._stream){this._stream=s;const i=this.context.createMediaStreamSource(s);Vi(i,this.output),this._mediaStream=i}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return ze(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return pe(navigator.mediaDevices)&&pe(navigator.mediaDevices.getUserMedia)}}function Li(t,e){return ze(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new Wg(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class xh extends Lo{constructor(){super(H(xh.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=H(xh.getDefaults(),arguments,["frequency","type"]);Vi(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ue({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ue({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(Lo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class nt extends hn{constructor(){super(H(nt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=H(nt.getDefaults(),arguments,["frequency","type"]);this.frequency=new mt({context:this.context,units:"frequency",value:e.frequency}),Ke(this,"frequency"),this.detune=new mt({context:this.context,units:"cents",value:e.detune}),Ke(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(hn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new xh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return nt._periodicWaveCache.find(n=>n.phase===this._phase&&RO(n.partials,this._partials));{const e=nt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(pe(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),nt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),nt._periodicWaveCache.length>100&&nt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ns(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let l=1;l<s;++l){const c=2/(l*Math.PI);let h;switch(e){case"sine":h=l<=a?1:0,this._partials[l-1]=h;break;case"square":h=l&1?2*c:0,this._partials[l-1]=h;break;case"sawtooth":h=c*(l&1?1:-1),this._partials[l-1]=h;break;case"triangle":l&1?h=2*(c*c)*(l-1>>1&1?-1:1):h=0,this._partials[l-1]=h;break;case"custom":h=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}h!==0?(i[l]=-h*Math.sin(n*l),o[l]=h*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return NO(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}nt._periodicWaveCache=[];class QO extends Fo{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Uo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ei extends mt{constructor(){super(Object.assign(H(Ei.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=H(Ei.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new St({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ll extends hn{constructor(){super(H(Ll.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new QO({context:this.context}),this._modulationNode=new St({context:this.context});const e=H(Ll.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new nt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ei({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ke(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(nt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Fl extends hn{constructor(){super(H(Fl.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new St({context:this.context,gain:0});const e=H(Fl.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new nt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new mt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new nt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ei({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ei({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ke(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(nt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class jo extends hn{constructor(){super(H(jo.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new St({context:this.context,gain:0}),this._thresh=new Uo({context:this.context,mapping:n=>n<=0?-1:1});const e=H(jo.getDefaults(),arguments,["frequency","width"]);this.width=new mt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ke(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(hn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ul extends hn{constructor(){super(H(Ul.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=H(Ul.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new mt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new mt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(nt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(Ns(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new nt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Ce});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class jl extends hn{constructor(){super(H(jl.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ei({context:this.context,value:2});const e=H(jl.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new jo({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new nt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ke(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(hn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const v0={am:Ll,fat:Ul,fm:Fl,oscillator:nt,pulse:jo,pwm:jl};class Bl extends hn{constructor(){super(H(Bl.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=H(Bl.getDefaults(),arguments,["frequency","type"]);this.frequency=new mt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new mt({context:this.context,units:"cents",value:e.detune}),Ke(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(nt.getDefaults(),Fl.getDefaults(),Ll.getDefaults(),Ul.getDefaults(),jo.getDefaults(),jl.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=v0[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof v0[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ps(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ps(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Nr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return ze(this,void 0,void 0,function*(){return Li(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function gS(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Ns(i,t,e),n.set(this,i)}})}}function Br(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Ns(this.toSeconds(i),t,e),n.set(this,i)}})}}class Bo extends hn{constructor(){super(H(Bo.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=H(Bo.getDefaults(),arguments,["url","onload"]);this._buffer=new Oe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(hn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1,reverse:!1})}load(e){return ze(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ce){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=To(n,this._loopStart):n=To(n,0);const s=this.toSeconds(n),i=r;r=To(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Vl({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Tn(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ns(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ns(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$n([Br(0)],Bo.prototype,"fadeIn",void 0);$n([Br(0)],Bo.prototype,"fadeOut",void 0);class br extends de{constructor(){super(H(br.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new mt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=H(br.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(de.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Nr(e))return e;{let r;for(r in uc)if(uc[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Nr(r)&&Reflect.has(uc,r)){const s=uc[r];fi(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(Fn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+s;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(le(Fn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return Hg(this,e,n,r),this}asArray(e=1024){return ze(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,r=new Wg(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$n([Br(0)],br.prototype,"attack",void 0);$n([Br(0)],br.prototype,"decay",void 0);$n([gS(0,1)],br.prototype,"sustain",void 0);$n([Br(0)],br.prototype,"release",void 0);const uc=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const p=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=p/10+n*.83}s[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const p=Math.pow(n,3)*4+.2,m=Math.cos(p*Math.PI*2*n);c[e]=Math.abs(m*(1-n))}function h(p){const m=new Array(p.length);for(let _=0;_<p.length;_++)m[_]=1-p[_];return m}function d(p){return p.slice(0).reverse()}return{bounce:{In:h(c),Out:c},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:h(s)},sine:{In:l,Out:h(l)},step:{In:o,Out:h(o)}}})();class Si extends de{constructor(){super(H(Si.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n);const e=H(Si.getDefaults(),arguments);this._volume=this.output=new bs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ke(this,"volume")}static getDefaults(){return Object.assign(de.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ii extends Si{constructor(){super(H(Ii.getDefaults(),arguments));const e=H(Ii.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Si.getDefaults(),{detune:0,onsilence:Ce,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof vn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}$n([Br(0)],Ii.prototype,"portamento",void 0);class Qg extends br{constructor(){super(H(Qg.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new St({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class zl extends Ii{constructor(){super(H(zl.getDefaults(),arguments)),this.name="Synth";const e=H(zl.getDefaults(),arguments);this.oscillator=new Bl(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Qg(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ke(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ii.getDefaults(),{envelope:Object.assign(y0(br.getDefaults(),Object.keys(de.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(y0(Bl.getDefaults(),[...Object.keys(hn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Wl extends zl{constructor(){super(H(Wl.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=H(Wl.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ke(this,["oscillator","envelope"])}static getDefaults(){return wo(Ii.getDefaults(),zl.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof vn?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$n([gS(0)],Wl.prototype,"octaves",void 0);$n([Br(0)],Wl.prototype,"pitchDecay",void 0);const _S=new Set;function Yg(t){_S.add(t)}function yS(t,e){const n=`registerProcessor("${t}", ${e})`;_S.add(n)}const YO=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Yg(YO);const XO=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Yg(XO);const JO=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Yg(JO);const ZO="feedback-comb-filter",eM=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;yS(ZO,eM);class ql extends Si{constructor(){super(H(ql.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=H(ql.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(le(lc(r)||Ps(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),lc(r)){const i=new vn(this.context,r).toMidi();n[i]=e.urls[r]}else Ps(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new Gg({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Si.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ce,onerror:Ce,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=mS(new vn(this.context,s).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),c=o-l,h=this._buffers.get(c),d=pS(l+a),p=new Vl({url:h,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);p.start(n,0,h.duration/d,r),Fn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(p),p.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const m=this._activeSources.get(o),_=m.indexOf(p);_!==-1&&m.splice(_,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new vn(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),Fn(n)?(le(Fn(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(le(lc(e)||isFinite(e),`note must be a pitch or midi: ${e}`),lc(e)){const s=new vn(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}$n([Br(0)],ql.prototype,"attack",void 0);$n([Br(0)],ql.prototype,"release",void 0);class Rh extends de{constructor(){super(Object.assign(H(Rh.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=H(Rh.getDefaults(),arguments,["pan"]);this.pan=new Ue({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ke(this,"pan")}static getDefaults(){return Object.assign(de.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const tM="bit-crusher",nM=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;yS(tM,nM);class et extends de{constructor(){super(H(et.getDefaults(),arguments,["solo"])),this.name="Solo";const e=H(et.getDefaults(),arguments,["solo"]);this.input=this.output=new St({context:this.context}),et._allSolos.has(this.context)||et._allSolos.set(this.context,new Set),et._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(de.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),et._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){et._soloed.has(this.context)||et._soloed.set(this.context,new Set),et._soloed.get(this.context).add(this)}_removeSolo(){et._soloed.has(this.context)&&et._soloed.get(this.context).delete(this)}_isSoloed(){return et._soloed.has(this.context)&&et._soloed.get(this.context).has(this)}_noSolos(){return!et._soloed.has(this.context)||et._soloed.has(this.context)&&et._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),et._allSolos.get(this.context).delete(this),this._removeSolo(),this}}et._allSolos=new Map;et._soloed=new Map;class Ph extends de{constructor(){super(H(Ph.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=H(Ph.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Rh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new bs({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ke(this,["pan","volume"])}static getDefaults(){return Object.assign(de.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class si extends de{constructor(){super(H(si.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=H(si.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new et({solo:e.solo,context:this.context}),this._panVol=this.output=new Ph({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ke(this,["pan","volume"])}static getDefaults(){return Object.assign(de.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return si.buses.has(e)||si.buses.set(e,new St({context:this.context})),si.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new St({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}si.buses=new Map;class rM extends de{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ue({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ue({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ue({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ue({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ue({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ue({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ue({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ue({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ue({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(de.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Td(t=>{t.listener=new rM({context:t})});Ed(t=>{t.listener.dispose()});class sl extends de{constructor(){super(H(sl.getDefaults(),arguments)),this.name="Recorder";const e=H(sl.getDefaults(),arguments);this.input=new St({context:this.context}),le(sl.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return de.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return Ir!==null&&Reflect.has(Ir,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return ze(this,void 0,void 0,function*(){le(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const r=()=>{this._recorder.removeEventListener("start",r,!1),n()};this._recorder.addEventListener("start",r,!1)});return this._recorder.start(),yield e})}stop(){return ze(this,void 0,void 0,function*(){le(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const r=s=>{this._recorder.removeEventListener("dataavailable",r,!1),n(s.data)};this._recorder.addEventListener("dataavailable",r,!1)});return this._recorder.stop(),yield e})}pause(){return le(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}bn().transport;bn().destination;bn().destination;bn().listener;bn().draw;bn();const sM=()=>{const{matches:t}=U.useContext(zi),[e,n]=U.useState(null),[r,s]=U.useState([]),[i,o]=U.useState(!1),[a,l]=U.useState(null),[c,h]=U.useState("");U.useEffect(()=>(e&&(async()=>{if(e&&!a){const T=new sl,I=new fo;try{await I.open(),I.connect(T),l(T),console.log("Audio initialized")}catch(v){console.error("Mic access denied or error:",v)}}})(),()=>{}),[e]);const d=async()=>{if(a)if(!i)await VO(),a.start(),o(!0);else{const _=await a.stop(),T=URL.createObjectURL(_);s(I=>[...I,{audio:T,sender:"me"}]),o(!1)}},p=()=>{c.trim()&&(s(_=>[..._,{text:c,sender:"me"}]),h(""),setTimeout(()=>{s(_=>[..._,{text:"That's interesting...",sender:"them"}])},1500))},m=_=>{const T=new Bo(_).toDestination();T.autostart=!0};return e?O.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[O.jsx("div",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--color-primary)",zIndex:10},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[O.jsx("button",{onClick:()=>n(null),className:"icon-btn",children:O.jsx(YR,{color:"white"})}),O.jsx("img",{src:e.avatar,alt:e.name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),O.jsx("span",{style:{fontWeight:"bold"},children:e.name})]})}),O.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem",WebkitOverflowScrolling:"touch"},children:r.map((_,T)=>O.jsxs("div",{style:{alignSelf:_.sender==="me"?"flex-end":"flex-start",backgroundColor:_.sender==="me"?"var(--color-secondary)":"rgba(255,255,255,0.1)",color:_.sender==="me"?"var(--color-primary)":"white",padding:"10px 15px",borderRadius:"15px",maxWidth:"70%",borderBottomRightRadius:_.sender==="me"?"2px":"15px",borderBottomLeftRadius:_.sender==="me"?"15px":"2px"},children:[_.text&&O.jsx("p",{children:_.text}),_.audio&&O.jsxs("button",{onClick:()=>m(_.audio),style:{display:"flex",alignItems:"center",gap:"5px"},children:[O.jsx(rP,{size:16,fill:"currentColor"})," Audio Note"]})]},T))}),O.jsxs("div",{style:{padding:"10px",display:"flex",gap:"10px",alignItems:"center",background:"var(--color-primary)",borderTop:"1px solid rgba(255,255,255,0.1)",paddingBottom:"20px"},children:[O.jsx("button",{onClick:d,className:"icon-btn",style:{width:"45px",height:"45px",backgroundColor:i?"#ff4444":"rgba(255,255,255,0.05)",color:"white",border:i?"none":"1px solid rgba(255,255,255,0.1)"},children:O.jsx(nP,{size:20,className:i?"animate-pulse":""})}),O.jsx("input",{type:"text",value:c,onChange:_=>h(_.target.value),placeholder:"Type a message...",style:{flex:1,margin:0,borderRadius:"20px"}}),O.jsx("button",{onClick:p,className:"icon-btn",style:{color:"var(--color-secondary)"},children:O.jsx(sP,{size:24})})]})]}):O.jsxs("div",{className:"page-container",children:[O.jsx("h2",{style:{color:"var(--color-secondary)",marginBottom:"1.5rem",fontSize:"1.8rem",fontWeight:"800"},children:"Matches"}),t.length===0?O.jsx("p",{style:{color:"var(--color-text-muted)",textAlign:"center",marginTop:"3rem"},children:"No matches yet. Go swipe!"}):O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.map(_=>O.jsxs("div",{onClick:()=>n(_),style:{display:"flex",alignItems:"center",gap:"15px",padding:"1rem",backgroundColor:"rgba(255,255,255,0.03)",borderRadius:"16px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.05)",transition:"background 0.2s"},onMouseOver:T=>T.currentTarget.style.backgroundColor="rgba(255,255,255,0.06)",onMouseOut:T=>T.currentTarget.style.backgroundColor="rgba(255,255,255,0.03)",children:[O.jsx("img",{src:_.avatar,alt:_.name,style:{width:"56px",height:"56px",borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255,215,0,0.2)"}}),O.jsxs("div",{children:[O.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:_.name}),O.jsx("div",{style:{fontSize:"0.85rem",color:"var(--color-text-muted)"},children:"Click to chat"})]})]},_.id))})]})},iM=()=>{const{user:t,setUser:e}=U.useContext(zi),[n,r]=U.useState((t==null?void 0:t.bio)||"I love gazing at the stars and thinking about the void."),[s,i]=U.useState(!0),o=U.useRef(null),[a,l]=U.useState((t==null?void 0:t.positive)||[]),[c,h]=U.useState((t==null?void 0:t.traumas)||[]),[d,p]=U.useState(""),[m,_]=U.useState("positive"),T=()=>{d.trim()&&(m==="positive"?l([...a,d.trim()]):h([...c,d.trim()]),p(""))},I=(S,b)=>{b==="positive"?l(a.filter(P=>P!==S)):h(c.filter(P=>P!==S))},v=()=>{t?(e({...t,bio:n,positive:a,traumas:c}),alert("Profile & Emotional Data saved!")):alert("Error: No user logged in.")},w=S=>{const b=S.target.files[0];if(b){const P=new FileReader;P.onloadend=()=>{e({...t,avatar:P.result})},P.readAsDataURL(b)}};return t?O.jsxs("div",{className:"page-container",children:[O.jsx("h2",{style:{color:"var(--color-secondary)",textAlign:"center",marginBottom:"2rem"},children:"Edit Profile"}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"2rem"},children:[O.jsxs("div",{style:{position:"relative",width:"120px",height:"120px",marginBottom:"1rem"},children:[O.jsx("img",{src:(t==null?void 0:t.avatar)||"https://via.placeholder.com/150",alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover",border:"3px solid var(--color-secondary)"}}),O.jsx("input",{type:"file",ref:o,onChange:w,style:{display:"none"},accept:"image/*"}),O.jsx("button",{onClick:()=>o.current.click(),style:{position:"absolute",bottom:"0",right:"0",backgroundColor:"var(--color-primary)",border:"1px solid var(--color-secondary)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-secondary)"},children:O.jsx(QR,{size:18})})]}),O.jsx("h3",{style:{fontSize:"1.5rem"},children:t==null?void 0:t.name})]}),O.jsxs("div",{style:{marginBottom:"1.5rem"},children:[O.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--color-text-muted)"},children:"Bio"}),O.jsx("textarea",{value:n,onChange:S=>r(S.target.value),rows:3,style:{resize:"none"}})]}),O.jsxs("div",{style:{marginBottom:"2rem"},children:[O.jsx("label",{style:{display:"block",marginBottom:"1rem",color:"var(--color-text-muted)",textAlign:"center"},children:"Emotional Aspects"}),O.jsxs("div",{style:{display:"flex",marginBottom:"1rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[O.jsx("button",{onClick:()=>_("positive"),style:{flex:1,padding:"10px",borderBottom:m==="positive"?"2px solid var(--color-secondary)":"none",color:m==="positive"?"var(--color-secondary)":"var(--color-text-muted)",background:"transparent"},children:"Positive"}),O.jsx("button",{onClick:()=>_("negative"),style:{flex:1,padding:"10px",borderBottom:m==="negative"?"2px solid #ff4444":"none",color:m==="negative"?"#ff4444":"var(--color-text-muted)",background:"transparent"},children:"Traumas / Deep"})]}),O.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"1rem"},children:[O.jsx("input",{type:"text",value:d,onChange:S=>p(S.target.value),placeholder:`Add ${m} trait...`,style:{margin:0}}),O.jsx("button",{onClick:T,className:"btn",style:{padding:"0 20px",minWidth:"50px"},children:"+"})]}),O.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[(m==="positive"?a:c).map((S,b)=>O.jsxs("span",{style:{backgroundColor:m==="positive"?"rgba(255,215,0,0.15)":"rgba(255,68,68,0.15)",color:m==="positive"?"var(--color-secondary)":"#ff4444",padding:"6px 12px",borderRadius:"20px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"8px",border:"1px solid currentColor"},children:[S,O.jsx("button",{onClick:()=>I(S,m),className:"icon-btn",style:{padding:0,color:"inherit"},children:""})]},b)),(m==="positive"?a:c).length===0&&O.jsx("span",{style:{color:"var(--color-text-muted)",fontStyle:"italic",fontSize:"0.8rem",width:"100%",textAlign:"center"},children:"No traits added yet. Add some to improve matching!"})]})]}),O.jsxs("div",{style:{marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"rgba(255,255,255,0.05)",padding:"1rem",borderRadius:"8px"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[O.jsx(eP,{size:20,color:"var(--color-secondary)"}),O.jsxs("div",{children:[O.jsx("div",{style:{fontWeight:"bold"},children:"Location"}),O.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-muted)"},children:"New York, USA"})]})]}),O.jsxs("button",{onClick:()=>i(!s),className:"icon-btn",style:{color:s?"var(--color-accent)":"var(--color-text-muted)",gap:"5px",borderRadius:"8px"},children:[s?O.jsx(ZR,{size:16}):O.jsx(XR,{size:16}),O.jsx("span",{style:{fontSize:"0.8rem"},children:s?"Private":"Public"})]})]}),O.jsx("button",{className:"btn",style:{width:"100%"},onClick:v,children:"Save Changes"})]}):O.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Please log in."})},oM=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new lM;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uM=function(t){const e=vS(t);return wS.encodeByteArray(e,!0)},Nh=function(t){return uM(t).replace(/\./g,"")},TS=function(t){try{return wS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=()=>cM().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof w0>"u")return;const t=w0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TS(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return oM()||hM()||dM()||fM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ES=t=>{var e,n;return(n=(e=Id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},pM=t=>{const e=ES(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},SS=()=>{var t;return(t=Id())==null?void 0:t.config},IS=t=>{var e;return(e=Id())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nh(JSON.stringify(n)),Nh(JSON.stringify(o)),""].join(".")}const il={};function _M(){const t={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?t.emulator.push(e):t.prod.push(e);return t}function yM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let T0=!1;function AS(t,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||il[t]===e||il[t]||T0)return;il[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=_M().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{T0=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=yM(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),T=n("learnmore"),I=document.getElementById(T)||document.createElement("a"),v=n("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;a(S),h(I,T);const b=c();l(w,v),S.append(w,_,I,b),document.body.appendChild(S)}i?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function wM(){var e;const t=(e=Id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IM(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CM(){return!wM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AM(){try{return typeof indexedDB=="object"}catch{return!1}}function kM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xM,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?RM(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new zr(s,a,r)}}function RM(t,e){return t.replace(PM,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PM=/\{\$([^}]+)}/g;function NM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(E0(i)&&E0(o)){if(!Ci(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function E0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function za(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bM(t,e){const n=new DM(t,e);return n.subscribe.bind(n)}class DM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Of),s.error===void 0&&(s.error=Of),s.complete===void 0&&(s.complete=Of);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){return t&&t._delegate?t._delegate:t}class Ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LM(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VM(t){return t===ri?void 0:t}function LM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const UM={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},jM=ye.INFO,BM={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},zM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BM[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=jM,this._logHandler=zM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const WM=(t,e)=>e.some(n=>t instanceof n);let S0,I0;function qM(){return S0||(S0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $M(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kS=new WeakMap,Zp=new WeakMap,xS=new WeakMap,Mf=new WeakMap,Jg=new WeakMap;function HM(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kS.set(n,t)}).catch(()=>{}),Jg.set(e,t),e}function GM(t){if(Zp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zp.set(t,e)}let em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KM(t){em=t(em)}function QM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vf(this),e,...n);return xS.set(r,e.sort?e.sort():[e]),Ss(r)}:$M().includes(t)?function(...e){return t.apply(Vf(this),e),Ss(kS.get(this))}:function(...e){return Ss(t.apply(Vf(this),e))}}function YM(t){return typeof t=="function"?QM(t):(t instanceof IDBTransaction&&GM(t),WM(t,qM())?new Proxy(t,em):t)}function Ss(t){if(t instanceof IDBRequest)return HM(t);if(Mf.has(t))return Mf.get(t);const e=YM(t);return e!==t&&(Mf.set(t,e),Jg.set(e,t)),e}const Vf=t=>Jg.get(t);function XM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ss(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ss(o.result),l.oldVersion,l.newVersion,Ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const JM=["get","getKey","getAll","getAllKeys","count"],ZM=["put","add","delete","clear"],Lf=new Map;function C0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lf.get(e))return Lf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JM.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Lf.set(e,i),i}KM(t=>({...t,get:(e,n,r)=>C0(e,n)||t.get(e,n,r),has:(e,n)=>!!C0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",A0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Xg("@firebase/app"),nV="@firebase/app-compat",rV="@firebase/analytics-compat",sV="@firebase/analytics",iV="@firebase/app-check-compat",oV="@firebase/app-check",aV="@firebase/auth",lV="@firebase/auth-compat",uV="@firebase/database",cV="@firebase/data-connect",hV="@firebase/database-compat",dV="@firebase/functions",fV="@firebase/functions-compat",pV="@firebase/installations",mV="@firebase/installations-compat",gV="@firebase/messaging",_V="@firebase/messaging-compat",yV="@firebase/performance",vV="@firebase/performance-compat",wV="@firebase/remote-config",TV="@firebase/remote-config-compat",EV="@firebase/storage",SV="@firebase/storage-compat",IV="@firebase/firestore",CV="@firebase/ai",AV="@firebase/firestore-compat",kV="firebase",xV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",RV={[tm]:"fire-core",[nV]:"fire-core-compat",[sV]:"fire-analytics",[rV]:"fire-analytics-compat",[oV]:"fire-app-check",[iV]:"fire-app-check-compat",[aV]:"fire-auth",[lV]:"fire-auth-compat",[uV]:"fire-rtdb",[cV]:"fire-data-connect",[hV]:"fire-rtdb-compat",[dV]:"fire-fn",[fV]:"fire-fn-compat",[pV]:"fire-iid",[mV]:"fire-iid-compat",[gV]:"fire-fcm",[_V]:"fire-fcm-compat",[yV]:"fire-perf",[vV]:"fire-perf-compat",[wV]:"fire-rc",[TV]:"fire-rc-compat",[EV]:"fire-gcs",[SV]:"fire-gcs-compat",[IV]:"fire-fst",[AV]:"fire-fst-compat",[CV]:"fire-vertex","fire-js":"fire-js",[kV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,PV=new Map,rm=new Map;function k0(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zo(t){const e=t.name;if(rm.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,t);for(const n of bh.values())k0(n,t);for(const n of PV.values())k0(n,t);return!0}function Zg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new yu("app","Firebase",NV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=xV;function RS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Is.create("bad-app-name",{appName:String(s)});if(n||(n=SS()),!n)throw Is.create("no-options");const i=bh.get(s);if(i){if(Ci(n,i.options)&&Ci(r,i.config))return i;throw Is.create("duplicate-app",{appName:s})}const o=new FM(s);for(const l of rm.values())o.addComponent(l);const a=new bV(n,r,o);return bh.set(s,a),a}function PS(t=nm){const e=bh.get(t);if(!e&&t===nm&&SS())return RS();if(!e)throw Is.create("no-app",{appName:t});return e}function Cs(t,e,n){let r=RV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(o.join(" "));return}zo(new Ai(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="firebase-heartbeat-database",OV=1,$l="firebase-heartbeat-store";let Ff=null;function NS(){return Ff||(Ff=XM(DV,OV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),Ff}async function MV(t){try{const n=(await NS()).transaction($l),r=await n.objectStore($l).get(bS(t));return await n.done,r}catch(e){if(e instanceof zr)Dr.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function x0(t,e){try{const r=(await NS()).transaction($l,"readwrite");await r.objectStore($l).put(e,bS(t)),await r.done}catch(n){if(n instanceof zr)Dr.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(r.message)}}}function bS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=1024,LV=30;class FV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>LV){const o=BV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R0(),{heartbeatsToSend:r,unsentEntries:s}=UV(this._heartbeatsCache.heartbeats),i=Nh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dr.warn(n),""}}}function R0(){return new Date().toISOString().substring(0,10)}function UV(t,e=VV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AM()?kM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function P0(t){return Nh(JSON.stringify({version:2,heartbeats:t})).length}function BV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){zo(new Ai("platform-logger",e=>new eV(e),"PRIVATE")),zo(new Ai("heartbeat",e=>new FV(e),"PRIVATE")),Cs(tm,A0,t),Cs(tm,A0,"esm2020"),Cs("fire-js","")}zV("");var WV="firebase",qV="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(WV,qV,"app");function DS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $V=DS,OS=new yu("auth","Firebase",DS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Xg("@firebase/auth");function HV(t,...e){Dh.logLevel<=ye.WARN&&Dh.warn(`Auth (${oa}): ${t}`,...e)}function Pc(t,...e){Dh.logLevel<=ye.ERROR&&Dh.error(`Auth (${oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw t_(t,...e)}function Un(t,...e){return t_(t,...e)}function e_(t,e,n){const r={...$V(),[e]:n};return new yu("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return e_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),e_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function t_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OS.create(t,...e)}function ie(t,e,...n){if(!t)throw t_(e,...n)}function wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function Or(t,e){t||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function KV(){return N0()==="http:"||N0()==="https:"}function N0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KV()||EM()||"connection"in navigator)?navigator.onLine:!0}function YV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=vM()||SM()}get(){return QV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){Or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZV=new wu(3e4,6e4);function Hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gs(t,e,n,r,s={}){return VS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=vu({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return TM()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ia(t.emulatorConfig.host)&&(c.credentials="include"),MS.fetch()(await LS(t,t.config.apiHost,n,a),c)})}async function VS(t,e,n){t._canInitEmulator=!1;const r={...XV,...e};try{const s=new tL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw cc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw e_(t,h,c);An(t,h)}}catch(s){if(s instanceof zr)throw s;An(t,"network-request-failed",{message:String(s)})}}async function Tu(t,e,n,r,s={}){const i=await Gs(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function LS(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?n_(t.config,s):`${t.config.apiScheme}://${s}`;return JV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function eL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),ZV.get())})}}function cc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Un(t,e,r);return s.customData._tokenResponse=n,s}function b0(t){return t!==void 0&&t.enterprise!==void 0}class nL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rL(t,e){return Gs(t,"GET","/v2/recaptchaConfig",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function Oh(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iL(t,e=!1){const n=Cn(t),r=await n.getIdToken(e),s=r_(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ol(Uf(s.auth_time)),issuedAtTime:ol(Uf(s.iat)),expirationTime:ol(Uf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uf(t){return Number(t)*1e3}function r_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const s=TS(n);return s?JSON.parse(s):(Pc("Failed to decode base64 JWT payload"),null)}catch(s){return Pc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function D0(t){const e=r_(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&oL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Hl(t,Oh(e,{idToken:n}));ie(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?FS(s.providerUserInfo):[],o=uL(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new im(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function lL(t){const e=Cn(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e){const n=await VS(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await LS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ia(t.emulatorConfig.host)&&(l.credentials="include"),MS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hL(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=D0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Eo;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new aL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new im(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iL(this,e)}reload(){return lL(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Hl(this,sL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:_,stsTokenManager:T}=n;ie(d&&T,e,"internal-error");const I=Eo.fromJSON(this.name,T);ie(typeof d=="string",e,"internal-error"),Zr(r,e.name),Zr(s,e.name),ie(typeof p=="boolean",e,"internal-error"),ie(typeof m=="boolean",e,"internal-error"),Zr(i,e.name),Zr(o,e.name),Zr(a,e.name),Zr(l,e.name),Zr(c,e.name),Zr(h,e.name);const v=new On({uid:d,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:I,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(v.providerData=_.map(w=>({...w}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Eo;s.updateFromServerResponse(n);const i=new On({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?FS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Eo;a.updateFromIdToken(r);const l=new On({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new im(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function Tr(t){Or(t instanceof Function,"Expected a class definition");let e=O0.get(t);return e?(Or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}US.type="NONE";const M0=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t,e,n){return`firebase:${t}:${e}:${n}`}class So{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Nc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Nc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?On._fromGetAccountInfoResponse(this.auth,n,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new So(Tr(M0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Tr(M0);const o=Nc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await Oh(e,{idToken:h}).catch(()=>{});if(!p)break;d=await On._fromGetAccountInfoResponse(e,p,h)}else d=On._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new So(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new So(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($S(e))return"Blackberry";if(HS(e))return"Webos";if(BS(e))return"Safari";if((e.includes("chrome/")||zS(e))&&!e.includes("edge/"))return"Chrome";if(qS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jS(t=Ut()){return/firefox\//i.test(t)}function BS(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zS(t=Ut()){return/crios\//i.test(t)}function WS(t=Ut()){return/iemobile/i.test(t)}function qS(t=Ut()){return/android/i.test(t)}function $S(t=Ut()){return/blackberry/i.test(t)}function HS(t=Ut()){return/webos/i.test(t)}function s_(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dL(t=Ut()){var e;return s_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function fL(){return IM()&&document.documentMode===10}function GS(t=Ut()){return s_(t)||qS(t)||HS(t)||$S(t)||/windows phone/i.test(t)||WS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e=[]){let n;switch(t){case"Browser":n=V0(Ut());break;case"Worker":n=`${V0(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",Hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=6;class _L{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L0(this),this.idTokenSubscription=new L0(this),this.beforeStateQueue=new pL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await So.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),r=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Cr(this));const n=e?Cn(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mL(this),n=new _L(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&HV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ks(t){return Cn(t)}class L0{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vL(t){Cd=t}function QS(t){return Cd.loadJS(t)}function wL(){return Cd.recaptchaEnterpriseScript}function TL(){return Cd.gapiScript}function EL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SL{constructor(){this.enterprise=new IL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const CL="recaptcha-enterprise",YS="NO_RECAPTCHA";class AL{constructor(e){this.type=CL,this.auth=Ks(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{rL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new nL(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;b0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(YS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&b0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wL();l.length!==0&&(l+=a),QS(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function F0(t,e,n,r=!1,s=!1){const i=new AL(t);let o;if(s)o=YS;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function om(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await F0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e){const n=Zg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ci(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function xL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RL(t,e,n){const r=Ks(t);ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=XS(e),{host:o,port:a}=PL(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ie(Ci(c,r.config.emulator)&&Ci(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ia(o)?(CS(`${i}//${o}${l}`),AS("Auth",!0)):NL()}function XS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PL(t){const e=XS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:U0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:U0(o)}}}function U0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,n){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}async function bL(t,e){return Gs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e){return Tu(t,"POST","/v1/accounts:signInWithPassword",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}async function ML(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends i_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,n,"signInWithPassword",DL);case"emailLink":return OL(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,r,"signUpPassword",bL);case"emailLink":return ML(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e){return Tu(t,"POST","/v1/accounts:signInWithIdp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="http://localhost";class ki extends i_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ki(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Io(e,n)}buildRequest(){const e={requestUri:VL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FL(t){const e=za(Wa(t)).link,n=e?za(Wa(e)).deep_link_id:null,r=za(Wa(t)).deep_link_id;return(r?za(Wa(r)).link:null)||r||n||e||t}class o_{constructor(e){const n=za(Wa(e)),r=n.apiKey??null,s=n.oobCode??null,i=LL(n.mode??null);ie(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=FL(e);try{return new o_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,n){return Gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=o_.parseLink(n);return ie(r,"argument-error"),Gl._fromEmailAndCode(e,r.code,r.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends a_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Eu{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Eu{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Eu{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e){return Tu(t,"POST","/v1/accounts:signUp",Hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await On._fromIdTokenResponse(e,r,s),o=j0(r);return new xi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=j0(r);return new xi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function j0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends zr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vh(e,n,r,s)}}function JS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,i,e,r):i})}async function jL(t,e,n=!1){const r=await Hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await Hl(t,JS(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=r_(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),xi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e,n=!1){if(an(t.app))return Promise.reject(Cr(t));const r="signIn",s=await JS(t,r,e),i=await xi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function zL(t,e){return ZS(Ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(t){const e=Ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WL(t,e,n){if(an(t.app))return Promise.reject(Cr(t));const r=Ks(t),o=await om(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&eI(t),l}),a=await xi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function qL(t,e,n){return an(t.app)?Promise.reject(Cr(t)):zL(Cn(t),aa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eI(t),r})}function $L(t,e,n,r){return Cn(t).onIdTokenChanged(e,n,r)}function HL(t,e,n){return Cn(t).beforeAuthStateChanged(e,n)}function GL(t,e,n,r){return Cn(t).onAuthStateChanged(e,n,r)}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,QL=10;class nI extends tI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);fL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nI.type="LOCAL";const YL=nI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends tI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rI.type="SESSION";const sI=rI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ad(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await XL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=l_("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(){return window}function ZL(t){nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof nr().WorkerGlobalScope<"u"&&typeof nr().importScripts=="function"}async function e4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function n4(){return iI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firebaseLocalStorageDb",r4=1,Fh="firebaseLocalStorage",aI="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kd(t,e){return t.transaction([Fh],e?"readwrite":"readonly").objectStore(Fh)}function s4(){const t=indexedDB.deleteDatabase(oI);return new Su(t).toPromise()}function am(){const t=indexedDB.open(oI,r4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fh,{keyPath:aI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fh)?e(r):(r.close(),await s4(),e(await am()))})})}async function B0(t,e,n){const r=kd(t,!0).put({[aI]:e,value:n});return new Su(r).toPromise()}async function i4(t,e){const n=kd(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function z0(t,e){const n=kd(t,!0).delete(e);return new Su(n).toPromise()}const o4=800,a4=3;class lI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>a4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(n4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await e4(),!this.activeServiceWorker)return;this.sender=new JL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await B0(e,Lh,"1"),await z0(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>B0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>i4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=kd(s,!1).getAll();return new Su(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lI.type="LOCAL";const l4=lI;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e){return e?Tr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends i_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function u4(t){return ZS(t.auth,new u_(t),t.bypassAuthState)}function c4(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),BL(n,new u_(t),t.bypassAuthState)}async function h4(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),jL(n,new u_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u4;case"linkViaPopup":case"linkViaRedirect":return h4;case"reauthViaPopup":case"reauthViaRedirect":return c4;default:An(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new wu(2e3,1e4);async function f4(t,e,n){if(an(t.app))return Promise.reject(Un(t,"operation-not-supported-in-this-environment"));const r=Ks(t);GV(t,e,a_);const s=uI(r,n);return new ui(r,"signInViaPopup",e,s).executeNotNull()}class ui extends cI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ui.currentPopupAction&&ui.currentPopupAction.cancel(),ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=l_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d4.get())};e()}}ui.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="pendingRedirect",bc=new Map;class m4 extends cI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bc.get(this.auth._key());if(!e){try{const r=await g4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bc.set(this.auth._key(),e)}return this.bypassAuthState||bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g4(t,e){const n=v4(e),r=y4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _4(t,e){bc.set(t._key(),e)}function y4(t){return Tr(t._redirectPersistence)}function v4(t){return Nc(p4,t.config.apiKey,t.name)}async function w4(t,e,n=!1){if(an(t.app))return Promise.reject(Cr(t));const r=Ks(t),s=uI(r,e),o=await new m4(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=10*60*1e3;class E4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T4&&this.cachedEventUids.clear(),this.cachedEventUids.has(W0(e))}saveEventToCache(e){this.cachedEventUids.add(W0(e)),this.lastProcessedEventTime=Date.now()}}function W0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e={}){return Gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A4=/^https?/;async function k4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await I4(t);for(const n of e)try{if(x4(n))return}catch{}An(t,"unauthorized-domain")}function x4(t){const e=sm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!A4.test(n))return!1;if(C4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new wu(3e4,6e4);function q0(){const t=nr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P4(t){return new Promise((e,n)=>{var s,i,o;function r(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),n(Un(t,"network-request-failed"))},timeout:R4.get()})}if((i=(s=nr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=nr().gapi)!=null&&o.load)r();else{const a=EL("iframefcb");return nr()[a]=()=>{gapi.load?r():n(Un(t,"network-request-failed"))},QS(`${TL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function N4(t){return Dc=Dc||P4(t),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new wu(5e3,15e3),D4="__/auth/iframe",O4="emulator/auth/iframe",M4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L4(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?n_(e,O4):`https://${t.config.authDomain}/${D4}`,r={apiKey:e.apiKey,appName:t.name,v:oa},s=V4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${vu(r).slice(1)}`}async function F4(t){const e=await N4(t),n=nr().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:L4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),a=nr().setTimeout(()=>{i(o)},b4.get());function l(){nr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j4=500,B4=600,z4="_blank",W4="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q4(t,e,n,r=j4,s=B4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...U4,width:r.toString(),height:s.toString(),top:i,left:o},c=Ut().toLowerCase();n&&(a=zS(c)?z4:n),jS(c)&&(e=e||W4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(dL(c)&&a!=="_self")return $4(e||"",a),new $0(null);const d=window.open(e||"",a,h);ie(d,t,"popup-blocked");try{d.focus()}catch{}return new $0(d)}function $4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="__/auth/handler",G4="emulator/auth/handler",K4=encodeURIComponent("fac");async function H0(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oa,eventId:s};if(e instanceof a_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Eu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${K4}=${encodeURIComponent(l)}`:"";return`${Q4(t)}?${vu(a).slice(1)}${c}`}function Q4({config:t}){return t.emulator?n_(t,G4):`https://${t.authDomain}/${H4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="webStorageSupport";class Y4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sI,this._completeRedirectFn=w4,this._overrideRedirectResult=_4}async _openPopup(e,n,r,s){var o;Or((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await H0(e,n,r,sm(),s);return q4(e,i,l_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await H0(e,n,r,sm(),s);return ZL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Or(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await F4(e),r=new E4(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jf,{type:jf},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[jf];i!==void 0&&n(!!i),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GS()||BS()||s_()}}const X4=Y4;var G0="@firebase/auth",K0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eF(t){zo(new Ai("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(t)},c=new yL(r,s,i,l);return xL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zo(new Ai("auth-internal",e=>{const n=Ks(e.getProvider("auth").getImmediate());return(r=>new J4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(G0,K0,Z4(t)),Cs(G0,K0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=5*60,nF=IS("authIdTokenMaxAge")||tF;let Q0=null;const rF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nF)return;const s=n==null?void 0:n.token;Q0!==s&&(Q0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sF(t=PS()){const e=Zg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kL(t,{popupRedirectResolver:X4,persistence:[l4,YL,sI]}),r=IS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=rF(i.toString());HL(n,o,()=>o(n.currentUser)),$L(n,a=>o(a))}}const s=ES("auth");return s&&RL(n,`http://${s}`),n}function iF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",iF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eF("Browser");var Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var As,dI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function C(){}C.prototype=y.prototype,E.F=y.prototype,E.prototype=new C,E.prototype.constructor=E,E.D=function(k,x,N){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return y.prototype[x].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,C){C||(C=0);const k=Array(16);if(typeof y=="string")for(var x=0;x<16;++x)k[x]=y.charCodeAt(C++)|y.charCodeAt(C++)<<8|y.charCodeAt(C++)<<16|y.charCodeAt(C++)<<24;else for(x=0;x<16;++x)k[x]=y[C++]|y[C++]<<8|y[C++]<<16|y[C++]<<24;y=E.g[0],C=E.g[1],x=E.g[2];let N=E.g[3],R;R=y+(N^C&(x^N))+k[0]+3614090360&4294967295,y=C+(R<<7&4294967295|R>>>25),R=N+(x^y&(C^x))+k[1]+3905402710&4294967295,N=y+(R<<12&4294967295|R>>>20),R=x+(C^N&(y^C))+k[2]+606105819&4294967295,x=N+(R<<17&4294967295|R>>>15),R=C+(y^x&(N^y))+k[3]+3250441966&4294967295,C=x+(R<<22&4294967295|R>>>10),R=y+(N^C&(x^N))+k[4]+4118548399&4294967295,y=C+(R<<7&4294967295|R>>>25),R=N+(x^y&(C^x))+k[5]+1200080426&4294967295,N=y+(R<<12&4294967295|R>>>20),R=x+(C^N&(y^C))+k[6]+2821735955&4294967295,x=N+(R<<17&4294967295|R>>>15),R=C+(y^x&(N^y))+k[7]+4249261313&4294967295,C=x+(R<<22&4294967295|R>>>10),R=y+(N^C&(x^N))+k[8]+1770035416&4294967295,y=C+(R<<7&4294967295|R>>>25),R=N+(x^y&(C^x))+k[9]+2336552879&4294967295,N=y+(R<<12&4294967295|R>>>20),R=x+(C^N&(y^C))+k[10]+4294925233&4294967295,x=N+(R<<17&4294967295|R>>>15),R=C+(y^x&(N^y))+k[11]+2304563134&4294967295,C=x+(R<<22&4294967295|R>>>10),R=y+(N^C&(x^N))+k[12]+1804603682&4294967295,y=C+(R<<7&4294967295|R>>>25),R=N+(x^y&(C^x))+k[13]+4254626195&4294967295,N=y+(R<<12&4294967295|R>>>20),R=x+(C^N&(y^C))+k[14]+2792965006&4294967295,x=N+(R<<17&4294967295|R>>>15),R=C+(y^x&(N^y))+k[15]+1236535329&4294967295,C=x+(R<<22&4294967295|R>>>10),R=y+(x^N&(C^x))+k[1]+4129170786&4294967295,y=C+(R<<5&4294967295|R>>>27),R=N+(C^x&(y^C))+k[6]+3225465664&4294967295,N=y+(R<<9&4294967295|R>>>23),R=x+(y^C&(N^y))+k[11]+643717713&4294967295,x=N+(R<<14&4294967295|R>>>18),R=C+(N^y&(x^N))+k[0]+3921069994&4294967295,C=x+(R<<20&4294967295|R>>>12),R=y+(x^N&(C^x))+k[5]+3593408605&4294967295,y=C+(R<<5&4294967295|R>>>27),R=N+(C^x&(y^C))+k[10]+38016083&4294967295,N=y+(R<<9&4294967295|R>>>23),R=x+(y^C&(N^y))+k[15]+3634488961&4294967295,x=N+(R<<14&4294967295|R>>>18),R=C+(N^y&(x^N))+k[4]+3889429448&4294967295,C=x+(R<<20&4294967295|R>>>12),R=y+(x^N&(C^x))+k[9]+568446438&4294967295,y=C+(R<<5&4294967295|R>>>27),R=N+(C^x&(y^C))+k[14]+3275163606&4294967295,N=y+(R<<9&4294967295|R>>>23),R=x+(y^C&(N^y))+k[3]+4107603335&4294967295,x=N+(R<<14&4294967295|R>>>18),R=C+(N^y&(x^N))+k[8]+1163531501&4294967295,C=x+(R<<20&4294967295|R>>>12),R=y+(x^N&(C^x))+k[13]+2850285829&4294967295,y=C+(R<<5&4294967295|R>>>27),R=N+(C^x&(y^C))+k[2]+4243563512&4294967295,N=y+(R<<9&4294967295|R>>>23),R=x+(y^C&(N^y))+k[7]+1735328473&4294967295,x=N+(R<<14&4294967295|R>>>18),R=C+(N^y&(x^N))+k[12]+2368359562&4294967295,C=x+(R<<20&4294967295|R>>>12),R=y+(C^x^N)+k[5]+4294588738&4294967295,y=C+(R<<4&4294967295|R>>>28),R=N+(y^C^x)+k[8]+2272392833&4294967295,N=y+(R<<11&4294967295|R>>>21),R=x+(N^y^C)+k[11]+1839030562&4294967295,x=N+(R<<16&4294967295|R>>>16),R=C+(x^N^y)+k[14]+4259657740&4294967295,C=x+(R<<23&4294967295|R>>>9),R=y+(C^x^N)+k[1]+2763975236&4294967295,y=C+(R<<4&4294967295|R>>>28),R=N+(y^C^x)+k[4]+1272893353&4294967295,N=y+(R<<11&4294967295|R>>>21),R=x+(N^y^C)+k[7]+4139469664&4294967295,x=N+(R<<16&4294967295|R>>>16),R=C+(x^N^y)+k[10]+3200236656&4294967295,C=x+(R<<23&4294967295|R>>>9),R=y+(C^x^N)+k[13]+681279174&4294967295,y=C+(R<<4&4294967295|R>>>28),R=N+(y^C^x)+k[0]+3936430074&4294967295,N=y+(R<<11&4294967295|R>>>21),R=x+(N^y^C)+k[3]+3572445317&4294967295,x=N+(R<<16&4294967295|R>>>16),R=C+(x^N^y)+k[6]+76029189&4294967295,C=x+(R<<23&4294967295|R>>>9),R=y+(C^x^N)+k[9]+3654602809&4294967295,y=C+(R<<4&4294967295|R>>>28),R=N+(y^C^x)+k[12]+3873151461&4294967295,N=y+(R<<11&4294967295|R>>>21),R=x+(N^y^C)+k[15]+530742520&4294967295,x=N+(R<<16&4294967295|R>>>16),R=C+(x^N^y)+k[2]+3299628645&4294967295,C=x+(R<<23&4294967295|R>>>9),R=y+(x^(C|~N))+k[0]+4096336452&4294967295,y=C+(R<<6&4294967295|R>>>26),R=N+(C^(y|~x))+k[7]+1126891415&4294967295,N=y+(R<<10&4294967295|R>>>22),R=x+(y^(N|~C))+k[14]+2878612391&4294967295,x=N+(R<<15&4294967295|R>>>17),R=C+(N^(x|~y))+k[5]+4237533241&4294967295,C=x+(R<<21&4294967295|R>>>11),R=y+(x^(C|~N))+k[12]+1700485571&4294967295,y=C+(R<<6&4294967295|R>>>26),R=N+(C^(y|~x))+k[3]+2399980690&4294967295,N=y+(R<<10&4294967295|R>>>22),R=x+(y^(N|~C))+k[10]+4293915773&4294967295,x=N+(R<<15&4294967295|R>>>17),R=C+(N^(x|~y))+k[1]+2240044497&4294967295,C=x+(R<<21&4294967295|R>>>11),R=y+(x^(C|~N))+k[8]+1873313359&4294967295,y=C+(R<<6&4294967295|R>>>26),R=N+(C^(y|~x))+k[15]+4264355552&4294967295,N=y+(R<<10&4294967295|R>>>22),R=x+(y^(N|~C))+k[6]+2734768916&4294967295,x=N+(R<<15&4294967295|R>>>17),R=C+(N^(x|~y))+k[13]+1309151649&4294967295,C=x+(R<<21&4294967295|R>>>11),R=y+(x^(C|~N))+k[4]+4149444226&4294967295,y=C+(R<<6&4294967295|R>>>26),R=N+(C^(y|~x))+k[11]+3174756917&4294967295,N=y+(R<<10&4294967295|R>>>22),R=x+(y^(N|~C))+k[2]+718787259&4294967295,x=N+(R<<15&4294967295|R>>>17),R=C+(N^(x|~y))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const C=y-this.blockSize,k=this.C;let x=this.h,N=0;for(;N<y;){if(x==0)for(;N<=C;)s(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<y;)if(k[x++]=E.charCodeAt(N++),x==this.blockSize){s(this,k),x=0;break}}else for(;N<y;)if(k[x++]=E[N++],x==this.blockSize){s(this,k),x=0;break}}this.h=x,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var C=E.length-8;C<E.length;++C)E[C]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)E[y++]=this.g[C]>>>k&255;return E};function i(E,y){var C=a;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=y(E)}function o(E,y){this.h=y;const C=[];let k=!0;for(let x=E.length-1;x>=0;x--){const N=E[x]|0;k&&N==y||(C[x]=N,k=!1)}this.g=C}var a={};function l(E){return-128<=E&&E<128?i(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(E<0)return I(c(-E));const y=[];let C=1;for(let k=0;E>=C;k++)y[k]=E/C|0,C*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return I(h(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=c(Math.pow(y,8));let k=d;for(let N=0;N<E.length;N+=8){var x=Math.min(8,E.length-N);const R=parseInt(E.substring(N,N+x),y);x<8?(x=c(Math.pow(y,x)),k=k.j(x).add(c(R))):(k=k.j(C),k=k.add(c(R)))}return k}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-I(this).m();let E=0,y=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);E+=(k>=0?k:4294967296+k)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(T(this))return"-"+I(this).toString(E);const y=c(Math.pow(E,6));var C=this;let k="";for(;;){const x=b(C,y).g;C=v(C,x.j(y));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(E);if(C=x,_(C))return N+k;for(;N.length<6;)N="0"+N;k=N+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function T(E){return E.h==-1}t.l=function(E){return E=v(this,E),T(E)?-1:_(E)?0:1};function I(E){const y=E.g.length,C=[];for(let k=0;k<y;k++)C[k]=~E.g[k];return new o(C,~E.h).add(p)}t.abs=function(){return T(this)?I(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),C=[];let k=0;for(let x=0;x<=y;x++){let N=k+(this.i(x)&65535)+(E.i(x)&65535),R=(N>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);k=R>>>16,N&=65535,R&=65535,C[x]=R<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(E,y){return E.add(I(y))}t.j=function(E){if(_(this)||_(E))return d;if(T(this))return T(E)?I(this).j(I(E)):I(I(this).j(E));if(T(E))return I(this.j(I(E)));if(this.l(m)<0&&E.l(m)<0)return c(this.m()*E.m());const y=this.g.length+E.g.length,C=[];for(var k=0;k<2*y;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let x=0;x<E.g.length;x++){const N=this.i(k)>>>16,R=this.i(k)&65535,W=E.i(x)>>>16,Z=E.i(x)&65535;C[2*k+2*x]+=R*Z,w(C,2*k+2*x),C[2*k+2*x+1]+=N*Z,w(C,2*k+2*x+1),C[2*k+2*x+1]+=R*W,w(C,2*k+2*x+1),C[2*k+2*x+2]+=N*W,w(C,2*k+2*x+2)}for(E=0;E<y;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=y;E<2*y;E++)C[E]=0;return new o(C,0)};function w(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function S(E,y){this.g=E,this.h=y}function b(E,y){if(_(y))throw Error("division by zero");if(_(E))return new S(d,d);if(T(E))return y=b(I(E),y),new S(I(y.g),I(y.h));if(T(y))return y=b(E,I(y)),new S(I(y.g),y.h);if(E.g.length>30){if(T(E)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=y;k.l(E)<=0;)C=P(C),k=P(k);var x=D(C,1),N=D(k,1);for(k=D(k,2),C=D(C,2);!_(k);){var R=N.add(k);R.l(E)<=0&&(x=x.add(C),N=R),k=D(k,1),C=D(C,1)}return y=v(E,x.j(y)),new S(x,y)}for(x=d;E.l(y)>=0;){for(C=Math.max(1,Math.floor(E.m()/y.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),N=c(C),R=N.j(y);T(R)||R.l(E)>0;)C-=k,N=c(C),R=N.j(y);_(N)&&(N=p),x=x.add(N),E=v(E,R)}return new S(x,E)}t.B=function(E){return b(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<y;k++)C[k]=this.i(k)&E.i(k);return new o(C,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<y;k++)C[k]=this.i(k)|E.i(k);return new o(C,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),C=[];for(let k=0;k<y;k++)C[k]=this.i(k)^E.i(k);return new o(C,this.h^E.h)};function P(E){const y=E.g.length+1,C=[];for(let k=0;k<y;k++)C[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(C,E.h)}function D(E,y){const C=y>>5;y%=32;const k=E.g.length-C,x=[];for(let N=0;N<k;N++)x[N]=y>0?E.i(N+C)>>>y|E.i(N+C+1)<<32-y:E.i(N+C);return new o(x,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,As=o}).apply(typeof Y0<"u"?Y0:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fI,qa,pI,Oc,lm,mI,gI,_I;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var g=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var M=u[A];if(!(M in g))break e;g=g[M]}u=u[u.length-1],A=g[u],f=f(A),f!=A&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(f){var g=[],A;for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&g.push([A,f[A]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function l(u,f,g){return u.call.apply(u.bind,arguments)}function c(u,f,g){return c=l,c.apply(null,arguments)}function h(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var A=g.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function d(u,f){function g(){}g.prototype=f.prototype,u.Z=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(A,M,V){for(var $=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)$[fe-2]=arguments[fe];return f.prototype[M].apply(A,$)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const f=u.length;if(f>0){const g=Array(f);for(let A=0;A<f;A++)g[A]=u[A];return g}return[]}function _(u,f){for(let A=1;A<arguments.length;A++){const M=arguments[A];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const V=M.length||0;u.length=g+V;for(let $=0;$<V;$++)u[g+$]=M[$]}else u.push(M)}}class T{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function I(u){o.setTimeout(()=>{throw u},0)}function v(){var u=E;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class w{constructor(){this.h=this.g=null}add(f,g){const A=S.get();A.set(f,g),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new T(()=>new b,u=>u.reset());class b{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let P,D=!1,E=new w,y=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(C)}};function C(){for(var u;u=v();){try{u.h.call(u.g)}catch(g){I(g)}var f=S;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}D=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function W(u,f){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}d(W,x),W.prototype.init=function(u,f){const g=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),Y=0;function J(u,f,g,A,M){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!A,this.ha=M,this.key=++Y,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function B(u,f,g){for(const A in u)f.call(g,u[A],A,u)}function q(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function K(u){const f={};for(const g in u)f[g]=u[g];return f}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(u,f){let g,A;for(let M=1;M<arguments.length;M++){A=arguments[M];for(g in A)u[g]=A[g];for(let V=0;V<se.length;V++)g=se[V],Object.prototype.hasOwnProperty.call(A,g)&&(u[g]=A[g])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,f,g,A,M){const V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);const $=_e(u,f,A,M);return $>-1?(f=u[$],g||(f.fa=!1)):(f=new J(f,this.src,V,!!A,M),f.fa=g,u.push(f)),f};function ce(u,f){const g=f.type;if(g in u.g){var A=u.g[g],M=Array.prototype.indexOf.call(A,f,void 0),V;(V=M>=0)&&Array.prototype.splice.call(A,M,1),V&&(F(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function _e(u,f,g,A){for(let M=0;M<u.length;++M){const V=u[M];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==A)return M}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),ee={};function Hn(u,f,g,A,M){if(Array.isArray(f)){for(let V=0;V<f.length;V++)Hn(u,f[V],g,A,M);return null}return g=Re(g),u&&u[Z]?u.J(f,g,a(A)?!!A.capture:!1,M):dr(u,f,g,!1,A,M)}function dr(u,f,g,A,M,V){if(!f)throw Error("Invalid event type");const $=a(M)?!!M.capture:!!M;let fe=re(u);if(fe||(u[Fe]=fe=new xe(u)),g=fe.add(f,g,A,$,V),g.proxy)return g;if(A=Wr(),g.proxy=A,A.src=u,A.listener=g,u.addEventListener)N||(M=$),M===void 0&&(M=!1),u.addEventListener(f.toString(),A,M);else if(u.attachEvent)u.attachEvent(Ru(f.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Wr(){function u(g){return f.call(u.src,u.listener,g)}const f=G;return u}function fr(u,f,g,A,M){if(Array.isArray(f))for(var V=0;V<f.length;V++)fr(u,f[V],g,A,M);else A=a(A)?!!A.capture:!!A,g=Re(g),u&&u[Z]?(u=u.i,V=String(f).toString(),V in u.g&&(f=u.g[V],g=_e(f,g,A,M),g>-1&&(F(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete u.g[V],u.h--)))):u&&(u=re(u))&&(f=u.g[f.toString()],u=-1,f&&(u=_e(f,g,A,M)),(g=u>-1?f[u]:null)&&da(g))}function da(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Z])ce(f.i,u);else{var g=u.type,A=u.proxy;f.removeEventListener?f.removeEventListener(g,A,u.capture):f.detachEvent?f.detachEvent(Ru(g),A):f.addListener&&f.removeListener&&f.removeListener(A),(g=re(f))?(ce(g,u),g.h==0&&(g.src=null,f[Fe]=null)):F(u)}}}function Ru(u){return u in ee?ee[u]:ee[u]="on"+u}function G(u,f){if(u.da)u=!0;else{f=new W(f,this);const g=u.listener,A=u.ha||u.src;u.fa&&da(u),u=g.call(A,f)}return u}function re(u){return u=u[Fe],u instanceof xe?u:null}var We="__closure_events_fn_"+(Math.random()*1e9>>>0);function Re(u){return typeof u=="function"?u:(u[We]||(u[We]=function(f){return u.handleEvent(f)}),u[We])}function ae(){k.call(this),this.i=new xe(this),this.M=this,this.G=null}d(ae,k),ae.prototype[Z]=!0,ae.prototype.removeEventListener=function(u,f,g,A){fr(this,u,f,g,A)};function me(u,f){var g,A=u.G;if(A)for(g=[];A;A=A.G)g.push(A);if(u=u.M,A=f.type||f,typeof f=="string")f=new x(f,u);else if(f instanceof x)f.target=f.target||u;else{var M=f;f=new x(A,u),Ze(f,M)}M=!0;let V,$;if(g)for($=g.length-1;$>=0;$--)V=f.g=g[$],M=It(V,A,!0,f)&&M;if(V=f.g=u,M=It(V,A,!0,f)&&M,M=It(V,A,!1,f)&&M,g)for($=0;$<g.length;$++)V=f.g=g[$],M=It(V,A,!1,f)&&M}ae.prototype.N=function(){if(ae.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const g=u.g[f];for(let A=0;A<g.length;A++)F(g[A]);delete u.g[f],u.h--}}this.G=null},ae.prototype.J=function(u,f,g,A){return this.i.add(String(u),f,!1,g,A)},ae.prototype.K=function(u,f,g,A){return this.i.add(String(u),f,!0,g,A)};function It(u,f,g,A){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let M=!0;for(let V=0;V<f.length;++V){const $=f[V];if($&&!$.da&&$.capture==g){const fe=$.listener,ut=$.ha||$.src;$.fa&&ce(u.i,$),M=fe.call(ut,A)!==!1&&M}}return M&&!A.defaultPrevented}function Gn(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(u,f||0)}function qr(u){u.g=Gn(()=>{u.g=null,u.i&&(u.i=!1,qr(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class fa extends k{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(u){k.call(this),this.h=u,this.g={}}d(Qs,k);var Pu=[];function B_(u){B(u.g,function(f,g){this.g.hasOwnProperty(g)&&da(f)},u),u.g={}}Qs.prototype.N=function(){Qs.Z.N.call(this),B_(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jd=o.JSON.stringify,zC=o.JSON.parse,WC=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function z_(){}function W_(){}var pa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bd(){x.call(this,"d")}d(Bd,x);function zd(){x.call(this,"c")}d(zd,x);var Ys={},q_=null;function Nu(){return q_=q_||new ae}Ys.Ia="serverreachability";function $_(u){x.call(this,Ys.Ia,u)}d($_,x);function ma(u){const f=Nu();me(f,new $_(f))}Ys.STAT_EVENT="statevent";function H_(u,f){x.call(this,Ys.STAT_EVENT,u),this.stat=f}d(H_,x);function Bt(u){const f=Nu();me(f,new H_(f,u))}Ys.Ja="timingevent";function G_(u,f){x.call(this,Ys.Ja,u),this.size=f}d(G_,x);function ga(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},f)}function _a(){this.g=!0}_a.prototype.ua=function(){this.g=!1};function qC(u,f,g,A,M,V){u.info(function(){if(u.g)if(V){var $="",fe=V.split("&");for(let ke=0;ke<fe.length;ke++){var ut=fe[ke].split("=");if(ut.length>1){const _t=ut[0];ut=ut[1];const Qn=_t.split("_");$=Qn.length>=2&&Qn[1]=="type"?$+(_t+"="+ut+"&"):$+(_t+"=redacted&")}}}else $=null;else $=V;return"XMLHTTP REQ ("+A+") [attempt "+M+"]: "+f+`
`+g+`
`+$})}function $C(u,f,g,A,M,V,$){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+M+"]: "+f+`
`+g+`
`+V+" "+$})}function Wi(u,f,g,A){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+GC(u,g)+(A?" "+A:"")})}function HC(u,f){u.info(function(){return"TIMEOUT: "+f})}_a.prototype.info=function(){};function GC(u,f){if(!u.g)return f;if(!f)return null;try{const V=JSON.parse(f);if(V){for(u=0;u<V.length;u++)if(Array.isArray(V[u])){var g=V[u];if(!(g.length<2)){var A=g[1];if(Array.isArray(A)&&!(A.length<1)){var M=A[0];if(M!="noop"&&M!="stop"&&M!="close")for(let $=1;$<A.length;$++)A[$]=""}}}}return jd(V)}catch{return f}}var bu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},K_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Q_;function Wd(){}d(Wd,z_),Wd.prototype.g=function(){return new XMLHttpRequest},Q_=new Wd;function ya(u){return encodeURIComponent(String(u))}function KC(u){var f=1;u=u.split(":");const g=[];for(;f>0&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function $r(u,f,g,A){this.j=u,this.i=f,this.l=g,this.S=A||1,this.V=new Qs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Y_}function Y_(){this.i=null,this.g="",this.h=!1}var X_={},qd={};function $d(u,f,g){u.M=1,u.A=Ou(Kn(f)),u.u=g,u.R=!0,J_(u,null)}function J_(u,f){u.F=Date.now(),Du(u),u.B=Kn(u.A);var g=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),hy(g.i,"t",A),u.C=0,g=u.j.L,u.h=new Y_,u.g=Ry(u.j,g?f:null,!u.u),u.P>0&&(u.O=new fa(c(u.Y,u,u.g),u.P)),f=u.V,g=u.g,A=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Pu[0]=M.toString()),M=Pu);for(let V=0;V<M.length;V++){const $=Hn(g,M[V],A||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=u.J?K(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),ma(),qC(u.i,u.v,u.B,u.l,u.S,u.u)}$r.prototype.ba=function(u){u=u.target;const f=this.O;f&&Kr(u)==3?f.j():this.Y(u)},$r.prototype.Y=function(u){try{if(u==this.g)e:{const fe=Kr(this.g),ut=this.g.ya(),ke=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||yy(this.g)))){this.K||fe!=4||ut==7||(ut==8||ke<=0?ma(3):ma(2)),Hd(this);var f=this.g.ca();this.X=f;var g=QC(this);if(this.o=f==200,$C(this.i,this.v,this.B,this.l,this.S,fe,f),this.o){if(this.U&&!this.L){t:{if(this.g){var A,M=this.g;if((A=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var V=A;break t}}V=null}if(u=V)Wi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gd(this,u);else{this.o=!1,this.m=3,Bt(12),Xs(this),va(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<g.length;)if(_t=YC(this,g),_t==qd){fe==4&&(this.m=4,Bt(14),u=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==X_){this.m=4,Bt(15),Wi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Wi(this.i,this.l,_t,null),Gd(this,_t);if(Z_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||g.length!=0||this.h.h||(this.m=1,Bt(16),u=!1),this.o=this.o&&u,!u)Wi(this.i,this.l,g,"[Invalid Chunked Response]"),Xs(this),va(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),tf($),$.P=!0,Bt(11))}}else Wi(this.i,this.l,g,null),Gd(this,g);fe==4&&Xs(this),this.o&&!this.K&&(fe==4?Cy(this.j,this):(this.o=!1,Du(this)))}else cA(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Xs(this),va(this)}}}catch{}finally{}};function QC(u){if(!Z_(u))return u.g.la();const f=yy(u.g);if(f==="")return"";let g="";const A=f.length,M=Kr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xs(u),va(u),"";u.h.i=new o.TextDecoder}for(let V=0;V<A;V++)u.h.h=!0,g+=u.h.i.decode(f[V],{stream:!(M&&V==A-1)});return f.length=0,u.h.g+=g,u.C=0,u.h.g}function Z_(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function YC(u,f){var g=u.C,A=f.indexOf(`
`,g);return A==-1?qd:(g=Number(f.substring(g,A)),isNaN(g)?X_:(A+=1,A+g>f.length?qd:(f=f.slice(A,A+g),u.C=A+g,f)))}$r.prototype.cancel=function(){this.K=!0,Xs(this)};function Du(u){u.T=Date.now()+u.H,ey(u,u.H)}function ey(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ga(c(u.aa,u),f)}function Hd(u){u.D&&(o.clearTimeout(u.D),u.D=null)}$r.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(HC(this.i,this.B),this.M!=2&&(ma(),Bt(17)),Xs(this),this.m=2,va(this)):ey(this,this.T-u)};function va(u){u.j.I==0||u.K||Cy(u.j,u)}function Xs(u){Hd(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,B_(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function Gd(u,f){try{var g=u.j;if(g.I!=0&&(g.g==u||Kd(g.h,u))){if(!u.L&&Kd(g.h,u)&&g.I==3){try{var A=g.Ba.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var M=A;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Uu(g),Lu(g);else break e;ef(g),Bt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ga(c(g.Va,g),6e3));ry(g.h)<=1&&g.ta&&(g.ta=void 0)}else Zs(g,11)}else if((u.L||g.g==u)&&Uu(g),!R(f))for(M=g.Ba.g.parse(f),f=0;f<M.length;f++){let ke=M[f];const _t=ke[0];if(!(_t<=g.K))if(g.K=_t,ke=ke[1],g.I==2)if(ke[0]=="c"){g.M=ke[1],g.ba=ke[2];const Qn=ke[3];Qn!=null&&(g.ka=Qn,g.j.info("VER="+g.ka));const ei=ke[4];ei!=null&&(g.za=ei,g.j.info("SVER="+g.za));const Qr=ke[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(A=1.5*Qr,g.O=A,g.j.info("backChannelRequestTimeoutMs_="+A)),A=g;const Yr=u.g;if(Yr){const Bu=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var V=A.h;V.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Qd(V,V.h),V.h=null))}if(A.G){const nf=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(A.wa=nf,be(A.J,A.G,nf))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),A=g;var $=u;if(A.na=xy(A,A.L?A.ba:null,A.W),$.L){sy(A.h,$);var fe=$,ut=A.O;ut&&(fe.H=ut),fe.D&&(Hd(fe),Du(fe)),A.g=$}else Sy(A);g.i.length>0&&Fu(g)}else ke[0]!="stop"&&ke[0]!="close"||Zs(g,7);else g.I==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Zs(g,7):Zd(g):ke[0]!="noop"&&g.l&&g.l.qa(ke),g.A=0)}}ma(4)}catch{}}var XC=class{constructor(u,f){this.g=u,this.map=f}};function ty(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ny(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ry(u){return u.h?1:u.g?u.g.size:0}function Kd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Qd(u,f){u.g?u.g.add(f):u.h=f}function sy(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}ty.prototype.cancel=function(){if(this.i=iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function iy(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.G);return f}return m(u.i)}var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JC(u,f){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const A=u[g].indexOf("=");let M,V=null;A>=0?(M=u[g].substring(0,A),V=u[g].substring(A+1)):M=u[g],f(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Hr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof Hr?(this.l=u.l,wa(this,u.j),this.o=u.o,this.g=u.g,Ta(this,u.u),this.h=u.h,Yd(this,dy(u.i)),this.m=u.m):u&&(f=String(u).match(oy))?(this.l=!1,wa(this,f[1]||"",!0),this.o=Ea(f[2]||""),this.g=Ea(f[3]||"",!0),Ta(this,f[4]),this.h=Ea(f[5]||"",!0),Yd(this,f[6]||"",!0),this.m=Ea(f[7]||"")):(this.l=!1,this.i=new Ia(null,this.l))}Hr.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(Sa(f,ay,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Sa(f,ay,!0),"@"),u.push(ya(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Sa(g,g.charAt(0)=="/"?tA:eA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Sa(g,rA)),u.join("")},Hr.prototype.resolve=function(u){const f=Kn(this);let g=!!u.j;g?wa(f,u.j):g=!!u.o,g?f.o=u.o:g=!!u.g,g?f.g=u.g:g=u.u!=null;var A=u.h;if(g)Ta(f,u.u);else if(g=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var M=f.h.lastIndexOf("/");M!=-1&&(A=f.h.slice(0,M+1)+A)}if(M=A,M==".."||M==".")A="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){A=M.lastIndexOf("/",0)==0,M=M.split("/");const V=[];for(let $=0;$<M.length;){const fe=M[$++];fe=="."?A&&$==M.length&&V.push(""):fe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),A&&$==M.length&&V.push("")):(V.push(fe),A=!0)}A=V.join("/")}else A=M}return g?f.h=A:g=u.i.toString()!=="",g?Yd(f,dy(u.i)):g=!!u.m,g&&(f.m=u.m),f};function Kn(u){return new Hr(u)}function wa(u,f,g){u.j=g?Ea(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ta(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Yd(u,f,g){f instanceof Ia?(u.i=f,sA(u.i,u.l)):(g||(f=Sa(f,nA)),u.i=new Ia(f,u.l))}function be(u,f,g){u.i.set(f,g)}function Ou(u){return be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ea(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sa(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,ZC),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ZC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ay=/[#\/\?@]/g,eA=/[#\?:]/g,tA=/[#\?]/g,nA=/[#\?@]/g,rA=/#/g;function Ia(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Js(u){u.g||(u.g=new Map,u.h=0,u.i&&JC(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Ia.prototype,t.add=function(u,f){Js(this),this.i=null,u=qi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function ly(u,f){Js(u),f=qi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function uy(u,f){return Js(u),f=qi(u,f),u.g.has(f)}t.forEach=function(u,f){Js(this),this.g.forEach(function(g,A){g.forEach(function(M){u.call(f,M,A,this)},this)},this)};function cy(u,f){Js(u);let g=[];if(typeof f=="string")uy(u,f)&&(g=g.concat(u.g.get(qi(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)g=g.concat(u[f]);return g}t.set=function(u,f){return Js(this),this.i=null,u=qi(this,u),uy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=cy(this,u),u.length>0?String(u[0]):f):f};function hy(u,f,g){ly(u,f),g.length>0&&(u.i=null,u.g.set(qi(u,f),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let A=0;A<f.length;A++){var g=f[A];const M=ya(g);g=cy(this,g);for(let V=0;V<g.length;V++){let $=M;g[V]!==""&&($+="="+ya(g[V])),u.push($)}}return this.i=u.join("&")};function dy(u){const f=new Ia;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function qi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function sA(u,f){f&&!u.j&&(Js(u),u.i=null,u.g.forEach(function(g,A){const M=A.toLowerCase();A!=M&&(ly(this,A),hy(this,M,g))},u)),u.j=f}function iA(u,f){const g=new _a;if(o.Image){const A=new Image;A.onload=h(Gr,g,"TestLoadImage: loaded",!0,f,A),A.onerror=h(Gr,g,"TestLoadImage: error",!1,f,A),A.onabort=h(Gr,g,"TestLoadImage: abort",!1,f,A),A.ontimeout=h(Gr,g,"TestLoadImage: timeout",!1,f,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else f(!1)}function oA(u,f){const g=new _a,A=new AbortController,M=setTimeout(()=>{A.abort(),Gr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:A.signal}).then(V=>{clearTimeout(M),V.ok?Gr(g,"TestPingServer: ok",!0,f):Gr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Gr(g,"TestPingServer: error",!1,f)})}function Gr(u,f,g,A,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),A(g)}catch{}}function aA(){this.g=new WC}function Xd(u){this.i=u.Sb||null,this.h=u.ab||!1}d(Xd,z_),Xd.prototype.g=function(){return new Mu(this.i,this.h)};function Mu(u,f){ae.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Mu,ae),t=Mu.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,Aa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fy(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function fy(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ca(this):Aa(this),this.readyState==3&&fy(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Ca(this))},t.Na=function(u){this.g&&(this.response=u,Ca(this))},t.ga=function(){this.g&&Ca(this)};function Ca(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Aa(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Aa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function py(u){let f="";return B(u,function(g,A){f+=A,f+=":",f+=g,f+=`\r
`}),f}function Jd(u,f,g){e:{for(A in g){var A=!1;break e}A=!0}A||(g=py(g),typeof u=="string"?g!=null&&ya(g):be(u,f,g))}function Ye(u){ae.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ye,ae);var lA=/^https?$/i,uA=["POST","PUT"];t=Ye.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,g,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Q_.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){my(this,V);return}if(u=g||"",g=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var M in A)g.set(M,A[M]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const V of A.keys())g.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(uA,f,void 0)>=0)||A||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of g)this.g.setRequestHeader(V,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(V){my(this,V)}};function my(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,gy(u),Vu(u)}function gy(u){u.A||(u.A=!0,me(u,"complete"),me(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,me(this,"complete"),me(this,"abort"),Vu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vu(this,!0)),Ye.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?_y(this):this.Xa())},t.Xa=function(){_y(this)};function _y(u){if(u.h&&typeof i<"u"){if(u.v&&Kr(u)==4)setTimeout(u.Ca.bind(u),0);else if(me(u,"readystatechange"),Kr(u)==4){u.h=!1;try{const V=u.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var A;if(A=V===0){let $=String(u.D).match(oy)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),A=!lA.test($?$.toLowerCase():"")}g=A}if(g)me(u,"complete"),me(u,"success");else{u.o=6;try{var M=Kr(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",gy(u)}}finally{Vu(u)}}}}function Vu(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,f||me(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),zC(f)}};function yy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cA(u){const f={};u=(u.g&&Kr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(R(u[A]))continue;var g=KC(u[A]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[M]||[];f[M]=V,V.push(g)}q(f,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function vy(u){this.za=0,this.i=[],this.j=new _a,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ka("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ka("baseRetryDelayMs",5e3,u),this.Za=ka("retryDelaySeedMs",1e4,u),this.Ta=ka("forwardChannelMaxRetries",2,u),this.va=ka("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ty(u&&u.concurrentRequestLimit),this.Ba=new aA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vy.prototype,t.ka=8,t.I=1,t.connect=function(u,f,g,A){Bt(0),this.W=u,this.H=f||{},g&&A!==void 0&&(this.H.OSID=g,this.H.OAID=A),this.F=this.X,this.J=xy(this,null,this.W),Fu(this)};function Zd(u){if(wy(u),u.I==3){var f=u.V++,g=Kn(u.J);if(be(g,"SID",u.M),be(g,"RID",f),be(g,"TYPE","terminate"),xa(u,g),f=new $r(u,u.j,f),f.M=2,f.A=Ou(Kn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Ry(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Du(f)}ky(u)}function Lu(u){u.g&&(tf(u),u.g.cancel(),u.g=null)}function wy(u){Lu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Uu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Fu(u){if(!ny(u.h)&&!u.m){u.m=!0;var f=u.Ea;P||y(),D||(P(),D=!0),E.add(f,u),u.D=0}}function hA(u,f){return ry(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ga(c(u.Ea,u,f),Ay(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new $r(this,this.j,u);let V=this.o;if(this.U&&(V?(V=K(V),Ze(V,this.U)):V=this.U),this.u!==null||this.R||(M.J=V,V=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var A=this.i[g];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ey(this,M,f),g=Kn(this.J),be(g,"RID",u),be(g,"CVER",22),this.G&&be(g,"X-HTTP-Session-Id",this.G),xa(this,g),V&&(this.R?f="headers="+ya(py(V))+"&"+f:this.u&&Jd(g,this.u,V)),Qd(this.h,M),this.Ra&&be(g,"TYPE","init"),this.S?(be(g,"$req",f),be(g,"SID","null"),M.U=!0,$d(M,g,null)):$d(M,g,f),this.I=2}}else this.I==3&&(u?Ty(this,u):this.i.length==0||ny(this.h)||Ty(this))};function Ty(u,f){var g;f?g=f.l:g=u.V++;const A=Kn(u.J);be(A,"SID",u.M),be(A,"RID",g),be(A,"AID",u.K),xa(u,A),u.u&&u.o&&Jd(A,u.u,u.o),g=new $r(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),f&&(u.i=f.G.concat(u.i)),f=Ey(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Qd(u.h,g),$d(g,A,f)}function xa(u,f){u.H&&B(u.H,function(g,A){be(f,A,g)}),u.l&&B({},function(g,A){be(f,A,g)})}function Ey(u,f,g){g=Math.min(u.i.length,g);const A=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let fe=-1;for(;;){const ut=["count="+g];fe==-1?g>0?(fe=M[0].g,ut.push("ofs="+fe)):fe=0:ut.push("ofs="+fe);let ke=!0;for(let _t=0;_t<g;_t++){var V=M[_t].g;const Qn=M[_t].map;if(V-=fe,V<0)fe=Math.max(0,M[_t].g-100),ke=!1;else try{V="req"+V+"_"||"";try{var $=Qn instanceof Map?Qn:Object.entries(Qn);for(const[ei,Qr]of $){let Yr=Qr;a(Qr)&&(Yr=jd(Qr)),ut.push(V+ei+"="+encodeURIComponent(Yr))}}catch(ei){throw ut.push(V+"type="+encodeURIComponent("_badmap")),ei}}catch{A&&A(Qn)}}if(ke){$=ut.join("&");break e}}$=void 0}return u=u.i.splice(0,g),f.G=u,$}function Sy(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;P||y(),D||(P(),D=!0),E.add(f,u),u.A=0}}function ef(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ga(c(u.Da,u),Ay(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Iy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ga(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Lu(this),Iy(this))};function tf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Iy(u){u.g=new $r(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=Kn(u.na);be(f,"RID","rpc"),be(f,"SID",u.M),be(f,"AID",u.K),be(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&be(f,"TO",u.ia),be(f,"TYPE","xmlhttp"),xa(u,f),u.u&&u.o&&Jd(f,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Ou(Kn(f)),g.u=null,g.R=!0,J_(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Lu(this),ef(this),Bt(19))};function Uu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Cy(u,f){var g=null;if(u.g==f){Uu(u),tf(u),u.g=null;var A=2}else if(Kd(u.h,f))g=f.G,sy(u.h,f),A=1;else return;if(u.I!=0){if(f.o)if(A==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var M=u.D;A=Nu(),me(A,new G_(A,g)),Fu(u)}else Sy(u);else if(M=f.m,M==3||M==0&&f.X>0||!(A==1&&hA(u,f)||A==2&&ef(u)))switch(g&&g.length>0&&(f=u.h,f.i=f.i.concat(g)),M){case 1:Zs(u,5);break;case 4:Zs(u,10);break;case 3:Zs(u,6);break;default:Zs(u,2)}}}function Ay(u,f){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*f}function Zs(u,f){if(u.j.info("Error code "+f),f==2){var g=c(u.bb,u),A=u.Ua;const M=!A;A=new Hr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||wa(A,"https"),Ou(A),M?iA(A.toString(),g):oA(A.toString(),g)}else Bt(2);u.I=0,u.l&&u.l.pa(f),ky(u),wy(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function ky(u){if(u.I=0,u.ja=[],u.l){const f=iy(u.h);(f.length!=0||u.i.length!=0)&&(_(u.ja,f),_(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function xy(u,f,g){var A=g instanceof Hr?Kn(g):new Hr(g);if(A.g!="")f&&(A.g=f+"."+A.g),Ta(A,A.u);else{var M=o.location;A=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;const V=new Hr(null);A&&wa(V,A),f&&(V.g=f),M&&Ta(V,M),g&&(V.h=g),A=V}return g=u.G,f=u.wa,g&&f&&be(A,g,f),be(A,"VER",u.ka),xa(u,A),A}function Ry(u,f,g){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new Ye(new Xd({ab:g})):new Ye(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Py(){}t=Py.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ju(){}ju.prototype.g=function(u,f){return new sn(u,f)};function sn(u,f){ae.call(this),this.g=new vy(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!R(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new $i(this)}d(sn,ae),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Zd(this.g)},sn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=jd(u),u=g);f.i.push(new XC(f.Ya++,u)),f.I==3&&Fu(f)},sn.prototype.N=function(){this.g.l=null,delete this.j,Zd(this.g),delete this.g,sn.Z.N.call(this)};function Ny(u){Bd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}d(Ny,Bd);function by(){zd.call(this),this.status=1}d(by,zd);function $i(u){this.g=u}d($i,Py),$i.prototype.ra=function(){me(this.g,"a")},$i.prototype.qa=function(u){me(this.g,new Ny(u))},$i.prototype.pa=function(u){me(this.g,new by)},$i.prototype.oa=function(){me(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,_I=function(){return new ju},gI=function(){return Nu()},mI=Ys,lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bu.NO_ERROR=0,bu.TIMEOUT=8,bu.HTTP_ERROR=6,Oc=bu,K_.COMPLETE="complete",pI=K_,W_.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",ae.prototype.listen=ae.prototype.J,qa=W_,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,fI=Ye}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="12.9.0";function oF(t){la=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Xg("@firebase/firestore");function Ki(){return Ri.logLevel}function Q(t,...e){if(Ri.logLevel<=ye.DEBUG){const n=e.map(c_);Ri.debug(`Firestore (${la}): ${t}`,...n)}}function Mr(t,...e){if(Ri.logLevel<=ye.ERROR){const n=e.map(c_);Ri.error(`Firestore (${la}): ${t}`,...n)}}function Pi(t,...e){if(Ri.logLevel<=ye.WARN){const n=e.map(c_);Ri.warn(`Firestore (${la}): ${t}`,...n)}}function c_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,yI(t,r,n)}function yI(t,e,n){let r=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mr(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||yI(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class lF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uF{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ks,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ks)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class cF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new X0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new X0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function um(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Bf(s)===Bf(i)?ve(s,i):Bf(s)?1:-1}return ve(t.length,e.length)}const pF=55296,mF=57343;function Bf(t){const e=t.charCodeAt(0);return e>=pF&&e<=mF}function Wo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__name__";class Jn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Jn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ve(e.length,n.length)}static compareSegments(e,n){const r=Jn.isNumericId(e),s=Jn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Jn.extractNumericId(e).compare(Jn.extractNumericId(n)):um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return As.fromString(e.substring(4,e.length-2))}}class $e extends Jn{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const gF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Jn{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return gF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J0}static keyField(){return new kt([J0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne($e.fromString(e))}static fromName(e){return new ne($e.fromString(e).popFirst(5))}static empty(){return new ne($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t,e,n){if(!n)throw new te(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yF(t,e,n,r){if(e===!0&&r===!0)throw new te(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z0(t){if(!ne.isDocumentKey(t))throw new te(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function d_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function Kl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=d_(t);throw new te(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Iu(t,e){if(!wI(t))throw new te(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=-62135596800,tw=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tw);return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ew)throw new te(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tw}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:lt("string",Me._jsonSchemaVersion),seconds:lt("number"),nanoseconds:lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Me(0,0))}static max(){return new ue(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=-1;function vF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new Os(s,ne.empty(),e)}function wF(t){return new Os(t.readTime,t.key,Ql)}class Os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Os(ue.min(),ne.empty(),Ql)}static max(){return new Os(ue.max(),ne.empty(),Ql)}}function TF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==EF)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-1;function Rd(t){return t==null}function Uh(t){return t===0&&1/t==-1/0}function CF(t){return typeof t=="number"&&Number.isInteger(t)&&!Uh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="";function AF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nw(e)),e=kF(t.get(n),e);return nw(e)}function kF(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case TI:n+="";break;default:n+=i}}return n}function nw(t){return t+TI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new At(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sw(this.data.getIterator())}getIteratorFrom(e){return new sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new ft(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SI("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const xF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=xF.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="server_timestamp",CI="__type__",AI="__previous_value__",kI="__local_write_time__";function p_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[CI])==null?void 0:r.stringValue)===II}function Pd(t){const e=t.mapValue.fields[AI];return p_(e)?Pd(e):e}function Yl(t){const e=Ms(t.mapValue.fields[kI].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,s,i,o,a,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h,this.apiKey=d}}const jh="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||jh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===jh}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}function PF(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new te(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="__type__",NF="__max__",fc={mapValue:{}},RI="__vector__",Bh="value";function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p_(t)?4:DF(t)?9007199254740991:bF(t)?10:11:oe(28295,{value:t})}function ar(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ms(s.timestampValue),a=Ms(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Vs(s.bytesValue).isEqual(Vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Uh(o)===Uh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wo(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(rw(o)!==rw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ar(o[l],a[l])))return!1;return!0}(t,e);default:return oe(52216,{left:t})}}function Jl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function qo(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return iw(t.timestampValue,e.timestampValue);case 4:return iw(Yl(t),Yl(e));case 5:return um(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Vs(i),l=Vs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ve(a[c],l[c]);if(h!==0)return h}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ve(tt(i.latitude),tt(o.latitude));return a!==0?a:ve(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ow(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,m,_,T;const a=i.fields||{},l=o.fields||{},c=(p=a[Bh])==null?void 0:p.arrayValue,h=(m=l[Bh])==null?void 0:m.arrayValue,d=ve(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((T=h==null?void 0:h.values)==null?void 0:T.length)||0);return d!==0?d:ow(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===fc.mapValue&&o===fc.mapValue)return 0;if(i===fc.mapValue)return 1;if(o===fc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=um(l[d],h[d]);if(p!==0)return p;const m=qo(a[l[d]],c[h[d]]);if(m!==0)return m}return ve(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function iw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Ms(t),r=Ms(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function ow(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qo(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function $o(t){return cm(t)}function cm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cm(n.fields[o])}`;return s+"}"}(t.mapValue):oe(61005,{value:t})}function Mc(t){switch(Ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(t);return e?16+Mc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Mc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Fi(r.fields,(i,o)=>{s+=i.length+Mc(o)}),s}(t.mapValue);default:throw oe(13486,{value:t})}}function hm(t){return!!t&&"integerValue"in t}function m_(t){return!!t&&"arrayValue"in t}function aw(t){return!!t&&"nullValue"in t}function lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vc(t){return!!t&&"mapValue"in t}function bF(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[xI])==null?void 0:r.stringValue)===RI}function al(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=al(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return{...t}}function DF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=al(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new gn(al(this.value))}}function PI(t){const e=[];return Fi(t.fields,(n,r)=>{const s=new kt([n]);if(Vc(r)){const i=PI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Lt(e,0,ue.min(),ue.min(),ue.min(),gn.empty(),0)}static newFoundDocument(e,n,r,s){return new Lt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Lt(e,2,n,ue.min(),ue.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ue.min(),ue.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.position=e,this.inclusive=n}}function uw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=qo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function cw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function OF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{}class ht extends NI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VF(e,n,r):n==="array-contains"?new UF(e,r):n==="in"?new jF(e,r):n==="not-in"?new BF(e,r):n==="array-contains-any"?new zF(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LF(e,r):new FF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qo(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends NI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new lr(e,n)}matches(e){return bI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bI(t){return t.op==="and"}function DI(t){return MF(t)&&bI(t)}function MF(t){for(const e of t.filters)if(e instanceof lr)return!1;return!0}function dm(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(DI(t))return t.filters.map(e=>dm(e)).join(",");{const e=t.filters.map(n=>dm(n)).join(",");return`${t.op}(${e})`}}function OI(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&ar(r.value,s.value)}(t,e):t instanceof lr?function(r,s){return s instanceof lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&OI(o,s.filters[a]),!0):!1}(t,e):void oe(19439)}function MI(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(MI).join(" ,")+"}"}(t):"Filter"}class VF extends ht{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class LF extends ht{constructor(e,n){super(e,"in",n),this.keys=VI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FF extends ht{constructor(e,n){super(e,"not-in",n),this.keys=VI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class UF extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return m_(n)&&Jl(n.arrayValue,this.value)}}class jF extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class BF extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class zF extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!m_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function hw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new WF(t,e,n,r,s,i,o)}function g_(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.Te=n}return e.Te}function __(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cw(t.startAt,e.startAt)&&cw(t.endAt,e.endAt)}function fm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qF(t,e,n,r,s,i,o,a){return new Nd(t,e,n,r,s,i,o,a)}function y_(t){return new Nd(t)}function dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $F(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function HF(t){return t.collectionGroup!==null}function ll(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wh(i,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new Wh(kt.keyField(),r))}return e.Ie}function rr(t){const e=he(t);return e.Ee||(e.Ee=GF(e,ll(t))),e.Ee}function GF(t,e){if(t.limitType==="F")return hw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wh(s.field,i)});const n=t.endAt?new zh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zh(t.startAt.position,t.startAt.inclusive):null;return hw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pm(t,e,n){return new Nd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bd(t,e){return __(rr(t),rr(e))&&t.limitType===e.limitType}function LI(t){return`${g_(rr(t))}|lt:${t.limitType}`}function Qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>MI(s)).join(", ")}]`),Rd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function Dd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ll(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=uw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ll(r),s)||r.endAt&&!function(o,a,l){const c=uw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ll(r),s))}(t,e)}function KF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FI(t){return(e,n)=>{let r=!1;for(const s of ll(t)){const i=QF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QF(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?qo(l,c):oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return EI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=new Qe(ne.comparator);function Vr(){return YF}const UI=new Qe(ne.comparator);function $a(...t){let e=UI;for(const n of t)e=e.insert(n.key,n);return e}function jI(t){let e=UI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return ul()}function BI(){return ul()}function ul(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const XF=new Qe(ne.comparator),JF=new ft(ne.comparator);function we(...t){let e=JF;for(const n of t)e=e.add(n);return e}const ZF=new ft(ve);function e5(){return ZF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function zI(t){return{integerValue:""+t}}function t5(t,e){return CF(e)?zI(e):v_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this._=void 0}}function n5(t,e,n){return t instanceof qh?function(s,i){const o={fields:{[CI]:{stringValue:II},[kI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&p_(i)&&(i=Pd(i)),i&&(o.fields[AI]=i),{mapValue:o}}(n,e):t instanceof Zl?qI(t,e):t instanceof eu?$I(t,e):function(s,i){const o=WI(s,i),a=fw(o)+fw(s.Ae);return hm(o)&&hm(s.Ae)?zI(a):v_(s.serializer,a)}(t,e)}function r5(t,e,n){return t instanceof Zl?qI(t,e):t instanceof eu?$I(t,e):n}function WI(t,e){return t instanceof $h?function(r){return hm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qh extends Od{}class Zl extends Od{constructor(e){super(),this.elements=e}}function qI(t,e){const n=HI(e);for(const r of t.elements)n.some(s=>ar(s,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends Od{constructor(e){super(),this.elements=e}}function $I(t,e){let n=HI(e);for(const r of t.elements)n=n.filter(s=>!ar(s,r));return{arrayValue:{values:n}}}class $h extends Od{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fw(t){return tt(t.integerValue||t.doubleValue)}function HI(t){return m_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zl&&s instanceof Zl||r instanceof eu&&s instanceof eu?Wo(r.elements,s.elements,ar):r instanceof $h&&s instanceof $h?ar(r.Ae,s.Ae):r instanceof qh&&s instanceof qh}(t.transform,e.transform)}class i5{constructor(e,n){this.version=e,this.transformResults=n}}class Ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Md{}function GI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new QI(t.key,Ar.none()):new Cu(t.key,t.data,Ar.none());{const n=t.data,r=gn.empty();let s=new ft(kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new Mn(s.toArray()),Ar.none())}}function o5(t,e,n){t instanceof Cu?function(s,i,o){const a=s.value.clone(),l=mw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!Lc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=mw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(KI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cl(t,e,n,r){return t instanceof Cu?function(i,o,a,l){if(!Lc(i.precondition,o))return a;const c=i.value.clone(),h=gw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!Lc(i.precondition,o))return a;const c=gw(i.fieldTransforms,l,o),h=o.data;return h.setAll(KI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Lc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=WI(r.transform,s||null);i!=null&&(n===null&&(n=gn.empty()),n.set(r.field,i))}return n||null}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wo(r,s,(i,o)=>s5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends Md{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends Md{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function KI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mw(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,r5(o,a,n[s]))}return r}function gw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,n5(i,o,e))}return r}class QI extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l5 extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&o5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=GI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,r)=>pw(n,r))&&Wo(this.baseMutations,e.baseMutations,(n,r)=>pw(n,r))}}class w_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return XF}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new w_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Te;function d5(t){switch(t){case j.OK:return oe(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function YI(t){if(t===void 0)return Mr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return oe(39323,{code:t})}}(Te=ot||(ot={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new As([4294967295,4294967295],0);function _w(t){const e=f5().encode(t),n=new dI;return n.update(e),new Uint8Array(n.digest())}function yw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new As([n,r],0),new As([s,i],0)]}class T_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ha(`Invalid padding: ${n}`);if(r<0)throw new Ha(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=As.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(As.fromNumber(r)));return s.compare(p5)===1&&(s=new As([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_w(e),[r,s]=yw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new T_(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=_w(e),[r,s]=yw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vd(ue.min(),s,new Qe(ve),Vr(),we())}}class Au{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Au(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class XI{constructor(e,n){this.targetId=e,this.Ce=n}}class JI{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vw{constructor(){this.ve=0,this.Fe=ww(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),n=we(),r=we();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}}),new Au(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=ww()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class m5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.He=pc(),this.Je=pc(),this.Ze=new Qe(ve)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(fm(i))if(r===0){const o=new ne(i.path);this.et(n,o,Lt.newNoDocument(o,ue.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Vs(r).toUint8Array()}catch(l){if(l instanceof SI)return Pi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new T_(o,s,i)}catch(l){return Pi(l instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&fm(a.target)){const l=new ne(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Lt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=we();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Vd(e,n,this.Ze,this.je,r);return this.je=Vr(),this.He=pc(),this.Je=pc(),this.Ze=new Qe(ve),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new vw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ft(ve),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ft(ve),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function pc(){return new Qe(ne.comparator)}function ww(){return new Qe(ne.comparator)}const g5={asc:"ASCENDING",desc:"DESCENDING"},_5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y5={and:"AND",or:"OR"};class v5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(t,e){return t.useProto3Json||Rd(e)?e:{value:e}}function Hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w5(t,e){return Hh(t,e.toTimestamp())}function sr(t){return Se(!!t,49232),ue.fromTimestamp(function(n){const r=Ms(n);return new Me(r.seconds,r.nanos)}(t))}function E_(t,e){return gm(t,e).canonicalString()}function gm(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eC(t){const e=$e.fromString(t);return Se(iC(e),10190,{key:e.toString()}),e}function _m(t,e){return E_(t.databaseId,e.path)}function zf(t,e){const n=eC(e);if(n.get(1)!==t.databaseId.projectId)throw new te(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(nC(n))}function tC(t,e){return E_(t.databaseId,e)}function T5(t){const e=eC(t);return e.length===4?$e.emptyPath():nC(e)}function ym(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nC(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tw(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function E5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(Se(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:YI(c.code);return new te(h,c.message||"")}(o);n=new JI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zf(t,r.document.name),i=sr(r.document.updateTime),o=r.document.createTime?sr(r.document.createTime):ue.min(),a=new gn({mapValue:{fields:r.document.fields}}),l=Lt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Fc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zf(t,r.document),i=r.readTime?sr(r.readTime):ue.min(),o=Lt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Fc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zf(t,r.document),i=r.removedTargetIds||[];n=new Fc([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new h5(s,i),a=r.targetId;n=new XI(a,o)}}return n}function S5(t,e){let n;if(e instanceof Cu)n={update:Tw(t,e.key,e.value)};else if(e instanceof QI)n={delete:_m(t,e.key)};else if(e instanceof ji)n={update:Tw(t,e.key,e.data),updateMask:b5(e.fieldMask)};else{if(!(e instanceof l5))return oe(16599,{dt:e.type});n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof qh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $h)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:w5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)}(t,e.precondition)),n}function I5(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?sr(s.updateTime):sr(i);return o.isEqual(ue.min())&&(o=sr(i)),new i5(o,s.transformResults||[])}(n,e))):[]}function C5(t,e){return{documents:[tC(t,e.path)]}}function A5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tC(t,s);const i=function(c){if(c.length!==0)return sC(lr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Yi(p.field),direction:R5(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function k5(t){let e=T5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=rC(d);return p instanceof lr&&DI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new Wh(Xi(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Rd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new zh(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new zh(m,p)}(n.endAt)),qF(e,s,o,i,a,"F",l,c)}function x5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xi(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xi(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xi(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Xi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(r=>rC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(n.compositeFilter.op))}(t):oe(30097,{filter:t})}function R5(t){return g5[t]}function P5(t){return _5[t]}function N5(t){return y5[t]}function Yi(t){return{fieldPath:t.canonicalString()}}function Xi(t){return kt.fromServerFormat(t.fieldPath)}function sC(t){return t instanceof ht?function(n){if(n.op==="=="){if(lw(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NAN"}};if(aw(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lw(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NAN"}};if(aw(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yi(n.field),op:P5(n.op),value:n.value}}}(t):t instanceof lr?function(n){const r=n.getFilters().map(s=>sC(s));return r.length===1?r[0]:{compositeFilter:{op:N5(n.op),filters:r}}}(t):oe(54877,{filter:t})}function b5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function oC(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.yt=e}}function O5(t){const e=k5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.Sn=new V5}addToCollectionParentIndex(e,n){return this.Sn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Os.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class V5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aC=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(aC,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ho(0)}static ar(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="LruGarbageCollector",L5=1048576;function Iw([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class F5{constructor(e){this.Pr=e,this.buffer=new ft(Iw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Iw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Q(Sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ca(n)?Q(Sw,"Ignoring IndexedDB error during garbage collection: ",n):await ua(n)}await this.Ar(3e5)})}}class j5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(xd.ce);const r=new F5(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ew)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Ki()<=ye.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function B5(t,e){return new j5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cl(r.mutation,s,Mn.empty(),Me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const s=ci();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$a();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Vr();const o=ul(),a=function(){return ul()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof ji)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),cl(h.mutation,c,h.mutation.getFieldMask(),Me.now())):o.set(c.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new W5(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ul();let s=new Qe((o,a)=>o-a),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Mn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||we()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=BI();h.forEach(p=>{if(!i.has(p)){const m=GI(n.get(p),r.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return $F(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(ci());let a=Ql,l=i;return o.next(c=>L.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,we())).next(h=>({batchId:a,changes:jI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=$a();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$a();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const c=function(d,p){return new Nd(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Lt.newInvalidDocument(h)))});let a=$a();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&cl(h.mutation,c,Mn.empty(),Me.now()),Dd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return L.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:sr(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:O5(s.bundledQuery),readTime:sr(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.overlays=new Qe(ne.comparator),this.Lr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ci();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=ci(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=ci(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ci(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return L.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c5(n,r));let i=this.Lr.get(n);i===void 0&&(i=we(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.kr=new ft(yt.Kr),this.qr=new ft(yt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new yt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ne(new $e([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ne(new $e([])),r=new yt(n,e),s=new yt(n,e+1);let i=we();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ne.comparator(e.key,n.key)||ve(e.Hr,n.Hr)}static Ur(e,n){return ve(e.Hr,n.Hr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ft(yt.Kr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u5(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?f_:this.Yn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(ve);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),L.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new yt(new ne(i),0);let a=new ft(ve);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),L.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return L.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new yt(n,0),s=this.Jr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.ti=e,this.docs=function(){return new Qe(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Lt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Vr();const o=n.path,a=new ne(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||TF(wF(h),r)<=0||(s.has(h.key)||Dd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ni(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Y5(this)}getSize(e){return L.resolve(this.size)}}class Y5 extends z5{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.persistence=e,this.ri=new Ui(n=>g_(n),__),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.ii=0,this.si=new S_,this.targetCount=0,this.oi=Ho._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),L.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ho(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.lr(n),L.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this._i={},this.overlays={},this.ai=new xd(0),this.ui=!1,this.ui=!0,this.ci=new G5,this.referenceDelegate=e(this),this.li=new X5(this),this.indexManager=new M5,this.remoteDocumentCache=function(s){return new Q5(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new D5(n),this.Pi=new $5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new K5(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new J5(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class J5 extends SF{constructor(e){super(),this.currentSequenceNumber=e}}class I_{constructor(e){this.persistence=e,this.Ri=new S_,this.Ai=null}static Vi(e){return new I_(e)}get di(){if(this.Ai)return this.Ai;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=ne.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Gh{constructor(e,n){this.persistence=e,this.fi=new Ui(r=>AF(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=B5(this,n)}static Vi(e,n){return new Gh(e,n)}Ti(){}Ii(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return L.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),L.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mc(e.data.value)),n}wr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=we(),s=we();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new C_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return CM()?8:IF(Ut())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Z5;return this.ys(e,n,o).next(a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ki()<=ye.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Ki()<=ye.DEBUG&&Q("QueryEngine","Query:",Qi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ki()<=ye.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):L.resolve())}gs(e,n){if(dw(n))return L.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pm(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=we(...i);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ss(n,c,o,l.readTime)?this.gs(e,pm(n,null,"F")):this.Ds(e,c,n,l)}))})))}ps(e,n,r,s){return dw(n)||s.isEqual(ue.min())?L.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?L.resolve(null):(Ki()<=ye.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qi(n)),this.Ds(e,o,n,vF(s,Ql)).next(a=>a))})}bs(e,n){let r=new ft(FI(e));return n.forEach((s,i)=>{Dd(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ki()<=ye.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Qi(n)),this.fs.getDocumentsMatchingQuery(e,n,Os.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="LocalStore",t3=3e8;class n3{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Qe(ve),this.Fs=new Ui(i=>g_(i),__),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q5(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function r3(t,e,n,r){return new n3(t,e,n,r)}async function uC(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=we();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function s3(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=L.resolve();return p.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(T=>{const I=c.docVersions.get(_);Se(I!==null,48541),T.version.compareTo(I)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function cC(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function i3(t,e){const n=he(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Pt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(T,I,v){return T.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=t3?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,h)&&a.push(n.li.updateTargetData(i,m))});let l=Vr(),c=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(o3(i,o,e.documentUpdates).next(h=>{l=h.Bs,c=h.Ls})),!r.isEqual(ue.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(d=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.vs=s,i))}function o3(t,e,n){let r=we(),s=we();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Vr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q(A_,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Bs:o,Ls:s}})}function a3(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=f_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l3(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function vm(t,e,n){const r=he(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ca(o))throw o;Q(A_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Cw(t,e,n){const r=he(t);let s=ue.min(),i=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=he(l),p=d.Fs.get(h);return p!==void 0?L.resolve(d.vs.get(p)):d.li.getTargetData(c,h)}(r,o,rr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:we())).next(a=>(u3(r,KF(e),a),{documents:a,ks:i})))}function u3(t,e,n){let r=t.Ms.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Aw{constructor(){this.activeTargetIds=e5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c3{constructor(){this.vo=new Aw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Aw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="ConnectivityMonitor";class xw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Q(kw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Q(kw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function wm(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="RestConnection",d3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class f3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===jh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=wm(),a=this.Qo(e,n.toUriEncodedString());Q(Wf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(a),h=ia(c);return this.zo(e,a,l,r,h).then(d=>(Q(Wf,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Pi(Wf,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=d3[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection",La=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Co extends f3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Co.c_){const e=gI();La(e,mI.STAT_EVENT,n=>{n.stat===lm.PROXY?Q(Ot,"STAT_EVENT: detected buffering proxy"):n.stat===lm.NOPROXY&&Q(Ot,"STAT_EVENT: detected no buffering proxy")}),Co.c_=!0}}zo(e,n,r,s,i){const o=wm();return new Promise((a,l)=>{const c=new fI;c.setWithCredentials(!0),c.listenOnce(pI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Oc.NO_ERROR:const d=c.getResponseJson();Q(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Oc.TIMEOUT:Q(Ot,`RPC '${e}' ${o} timed out`),l(new te(j.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const p=c.getStatus();if(Q(Ot,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const T=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(_.status);l(new te(T,_.message))}else l(new te(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new te(j.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Q(Ot,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Q(Ot,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=wm(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");Q(Ot,`Creating RPC '${e}' stream ${s}: ${c}`,a);const h=o.createWebChannel(c,a);this.I_(h);let d=!1,p=!1;const m=new p3({Ho:_=>{p?Q(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(d||(Q(Ot,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),Q(Ot,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Jo:()=>h.close()});return La(h,qa.EventType.OPEN,()=>{p||(Q(Ot,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),La(h,qa.EventType.CLOSE,()=>{p||(p=!0,Q(Ot,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))}),La(h,qa.EventType.ERROR,_=>{p||(p=!0,Pi(Ot,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),m.o_(new te(j.UNAVAILABLE,"The operation could not be completed")))}),La(h,qa.EventType.MESSAGE,_=>{var T;if(!p){const I=_.data[0];Se(!!I,16349);const v=I,w=(v==null?void 0:v.error)||((T=v[0])==null?void 0:T.error);if(w){Q(Ot,`RPC '${e}' stream ${s} received error:`,w);const S=w.status;let b=function(E){const y=ot[E];if(y!==void 0)return YI(y)}(S),P=w.message;S==="NOT_FOUND"&&P.includes("database")&&P.includes("does not exist")&&P.includes(this.databaseId.database)&&Pi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),b===void 0&&(b=j.INTERNAL,P="Unknown error status: "+S+" with message "+w.message),p=!0,m.o_(new te(b,P)),h.close()}else Q(Ot,`RPC '${e}' stream ${s} received:`,I),m.__(I)}}),Co.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _I()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){return new Co(t)}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){return new v5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co.c_=!1;class hC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="PersistentStream";class dC{constructor(e,n,r,s,i,o,a,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new te(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Rw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Q(Rw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g3 extends dC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=E5(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?sr(o.readTime):ue.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=ym(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=fm(l)?{documents:C5(i,l)}:{query:A5(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZI(i,o.resumeToken);const c=mm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Hh(i,o.snapshotVersion.toTimestamp());const c=mm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=x5(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.K_(n)}}class _3 extends dC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=I5(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ym(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>S5(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{}class v3 extends y3{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,gm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(j.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,gm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function w3(t,e,n,r){return new v3(t,e,n,r)}class T3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mr(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="RemoteStore";class E3{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Bi(this)&&(Q(Ni,"Restarting streams for network reachability change."),await async function(l){const c=he(l);c.Ea.add(4),await ku(c),c.Va.set("Unknown"),c.Ea.delete(4),await Fd(c)}(this))})}),this.Va=new T3(r,s)}}async function Fd(t){if(Bi(t))for(const e of t.Ra)await e(!0)}async function ku(t){for(const e of t.Ra)await e(!1)}function fC(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),P_(n)?R_(n):ha(n).O_()&&x_(n,e))}function k_(t,e){const n=he(t),r=ha(n);n.Ia.delete(e),r.O_()&&pC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Bi(n)&&n.Va.set("Unknown"))}function x_(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ha(t).Z_(e)}function pC(t,e){t.da.$e(e),ha(t).X_(e)}function R_(t){t.da=new m5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ha(t).start(),t.Va.ua()}function P_(t){return Bi(t)&&!ha(t).x_()&&t.Ia.size>0}function Bi(t){return he(t).Ea.size===0}function mC(t){t.da=void 0}async function S3(t){t.Va.set("Online")}async function I3(t){t.Ia.forEach((e,n)=>{x_(t,e)})}async function C3(t,e){mC(t),P_(t)?(t.Va.ha(e),R_(t)):t.Va.set("Unknown")}async function A3(t,e,n){if(t.Va.set("Online"),e instanceof JI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))}(t,e)}catch(r){Q(Ni,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(t,r)}else if(e instanceof Fc?t.da.Xe(e):e instanceof XI?t.da.st(e):t.da.tt(e),!n.isEqual(ue.min()))try{const r=await cC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),pC(i,l);const d=new ds(h.target,l,c,h.sequenceNumber);x_(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q(Ni,"Failed to raise snapshot:",r),await Kh(t,r)}}async function Kh(t,e,n){if(!ca(e))throw e;t.Ea.add(1),await ku(t),t.Va.set("Offline"),n||(n=()=>cC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ni,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fd(t)})}function gC(t,e){return e().catch(n=>Kh(t,n,e))}async function Ud(t){const e=he(t),n=Fs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:f_;for(;k3(e);)try{const s=await a3(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,x3(e,s)}catch(s){await Kh(e,s)}_C(e)&&yC(e)}function k3(t){return Bi(t)&&t.Ta.length<10}function x3(t,e){t.Ta.push(e);const n=Fs(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function _C(t){return Bi(t)&&!Fs(t).x_()&&t.Ta.length>0}function yC(t){Fs(t).start()}async function R3(t){Fs(t).ra()}async function P3(t){const e=Fs(t);for(const n of t.Ta)e.ea(n.mutations)}async function N3(t,e,n){const r=t.Ta.shift(),s=w_.from(r,e,n);await gC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ud(t)}async function b3(t,e){e&&Fs(t).Y_&&await async function(r,s){if(function(o){return d5(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();Fs(r).B_(),await gC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ud(r)}}(t,e),_C(t)&&yC(t)}async function Pw(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Q(Ni,"RemoteStore received new credentials");const r=Bi(n);n.Ea.add(3),await ku(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fd(n)}async function D3(t,e){const n=he(t);e?(n.Ea.delete(2),await Fd(n)):e||(n.Ea.add(2),await ku(n),n.Va.set("Unknown"))}function ha(t){return t.ma||(t.ma=function(n,r,s){const i=he(n);return i.sa(),new g3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:S3.bind(null,t),Yo:I3.bind(null,t),t_:C3.bind(null,t),J_:A3.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),P_(t)?R_(t):t.Va.set("Unknown")):(await t.ma.stop(),mC(t))})),t.ma}function Fs(t){return t.fa||(t.fa=function(n,r,s){const i=he(n);return i.sa(),new _3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:R3.bind(null,t),t_:b3.bind(null,t),ta:P3.bind(null,t),na:N3.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Ud(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(Ni,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new N_(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b_(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),ca(t))return new te(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=$a(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.ga=new Qe(ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Go{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Go(e,n,Ao.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class M3{constructor(){this.queries=bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=bw(),i.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new te(j.ABORTED,"Firestore shutting down"))}}function bw(){return new Ui(t=>LI(t),bd)}async function V3(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new O3,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=b_(o,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&D_(n)}async function L3(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F3(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&D_(n)}function U3(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function D_(t){t.Ca.forEach(e=>{e.next()})}var Tm,Dw;(Dw=Tm||(Tm={})).Ma="default",Dw.Cache="cache";class j3{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.key=e}}class wC{constructor(e){this.key=e}}class B3{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=we(),this.mutatedKeys=we(),this.eu=FI(e),this.tu=new Ao(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Nw,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),m=Dd(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?_!==T&&(r.track({type:3,doc:m}),I=!0):this.su(p,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),I=!0):p&&!m&&(r.track({type:1,doc:p}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,_){const T=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:I})}};return T(m)-T(_)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,o.length!==0||c?{snapshot:new Go(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=we(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new wC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new vC(r))}),n}cu(e){this.Za=e.ks,this.Ya=we();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const O_="SyncEngine";class z3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class W3{constructor(e){this.key=e,this.hu=!1}}class q3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ui(a=>LI(a),bd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Qe(ne.comparator),this.Au=new Map,this.Vu=new S_,this.du={},this.mu=new Map,this.fu=Ho.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $3(t,e,n=!0){const r=AC(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await TC(r,e,n,!0),s}async function H3(t,e){const n=AC(t);await TC(n,e,!0,!1)}async function TC(t,e,n,r){const s=await l3(t.localStore,rr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await G3(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&fC(t.remoteStore,s),a}async function G3(t,e,n,r,s){t.pu=(d,p,m)=>async function(T,I,v,w){let S=I.view.ru(v);S.Ss&&(S=await Cw(T.localStore,I.query,!1).then(({documents:E})=>I.view.ru(E,S)));const b=w&&w.targetChanges.get(I.targetId),P=w&&w.targetMismatches.get(I.targetId)!=null,D=I.view.applyChanges(S,T.isPrimaryClient,b,P);return Mw(T,I.targetId,D.au),D.snapshot}(t,d,p,m);const i=await Cw(t.localStore,e,!0),o=new B3(e,i.ks),a=o.ru(i.documents),l=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Mw(t,n,c.au);const h=new z3(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function K3(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!bd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&k_(r.remoteStore,s.targetId),Em(r,s.targetId)}).catch(ua)):(Em(r,s.targetId),await vm(r.localStore,s.targetId,!0))}async function Q3(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),k_(n.remoteStore,r.targetId))}async function Y3(t,e,n){const r=r6(t);try{const s=await function(o,a){const l=he(o),c=Me.now(),h=a.reduce((m,_)=>m.add(_.key),we());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Vr(),T=we();return l.xs.getEntries(m,h).next(I=>{_=I,_.forEach((v,w)=>{w.isValidDocument()||(T=T.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(I=>{d=I;const v=[];for(const w of a){const S=a5(w,d.get(w.key).overlayedDocument);S!=null&&v.push(new ji(w.key,S,PI(S.value.mapValue),Ar.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(I=>{p=I;const v=I.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(m,I.batchId,v)})}).then(()=>({batchId:p.batchId,changes:jI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.du[o.currentUser.toKey()];c||(c=new Qe(ve)),c=c.insert(a,l),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await xu(r,s.changes),await Ud(r.remoteStore)}catch(s){const i=b_(s,"Failed to persist write");n.reject(i)}}async function EC(t,e){const n=he(t);try{const r=await i3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Se(o.hu,14607):s.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))}),await xu(n,r,e)}catch(r){await ua(r)}}function Ow(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.ba)p.va(a)&&(c=!0)}),c&&D_(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function X3(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Qe(ne.comparator);o=o.insert(i,Lt.newNoDocument(i,ue.min()));const a=we().add(i),l=new Vd(ue.min(),new Map,new Qe(ve),o,a);await EC(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),M_(r)}else await vm(r.localStore,e,!1).then(()=>Em(r,e,n)).catch(ua)}async function J3(t,e){const n=he(t),r=e.batch.batchId;try{const s=await s3(n.localStore,e);IC(n,r,null),SC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,s)}catch(s){await ua(s)}}async function Z3(t,e,n){const r=he(t);try{const s=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Se(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);IC(r,e,n),SC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xu(r,s)}catch(s){await ua(s)}}function SC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function IC(t,e,n){const r=he(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||CC(t,r)})}function CC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(k_(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),M_(t))}function Mw(t,e,n){for(const r of n)r instanceof vC?(t.Vu.addReference(r.key,e),e6(t,r)):r instanceof wC?(Q(O_,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||CC(t,r.key)):oe(19791,{wu:r})}function e6(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Q(O_,"New document in limbo: "+n),t.Eu.add(r),M_(t))}function M_(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne($e.fromString(e)),r=t.fu.next();t.Au.set(r,new W3(n)),t.Ru=t.Ru.insert(n,r),fC(t.remoteStore,new ds(rr(y_(n.path)),r,"TargetPurposeLimboResolution",xd.ce))}}async function xu(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=C_.Es(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(l,c){const h=he(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(c,p=>L.forEach(p.Ts,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>L.forEach(p.Is,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!ca(d))throw d;Q(A_,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.vs.get(p),_=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(_);h.vs=h.vs.insert(p,T)}}}(r.localStore,i))}async function t6(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Q(O_,"User change. New user:",e.toKey());const r=await uC(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new te(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xu(n,r.Ns)}}function n6(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return we().add(r.key);{let s=we();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function AC(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X3.bind(null,e),e.Pu.J_=F3.bind(null,e.eventManager),e.Pu.yu=U3.bind(null,e.eventManager),e}function r6(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z3.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return r3(this.persistence,new e3,e.initialUser,this.serializer)}Cu(e){return new lC(I_.Vi,this.serializer)}Du(e){return new c3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class s6 extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new U5(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new lC(r=>Gh.Vi(r,n),this.serializer)}}class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t6.bind(null,this.syncEngine),await D3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M3}()}createDatastore(e){const n=Ld(e.databaseInfo.databaseId),r=m3(e.databaseInfo);return w3(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new E3(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ow(this.syncEngine,n,0),function(){return xw.v()?new xw:new h3}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new q3(s,i,o,a,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);Q(Ni,"RemoteStore shutting down."),i.Ea.add(5),await ku(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="FirestoreClient";class o6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=h_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Us,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Us,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=b_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Us,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await a6(t);Q(Us,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Pw(e.remoteStore,s)),t._onlineComponents=e}async function a6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Us,"Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new Qh)}}else Q(Us,"Using default OfflineComponentProvider"),await $f(t,new s6(void 0));return t._offlineComponents}async function kC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Us,"Using user provided OnlineComponentProvider"),await Vw(t,t._uninitializedComponentsProvider._online)):(Q(Us,"Using default OnlineComponentProvider"),await Vw(t,new Sm))),t._onlineComponents}function l6(t){return kC(t).then(e=>e.syncEngine)}async function u6(t){const e=await kC(t),n=e.eventManager;return n.onListen=$3.bind(null,e.syncEngine),n.onUnlisten=K3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q3.bind(null,e.syncEngine),n}function c6(t,e,n={}){const r=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new i6({next:p=>{h.Nu(),o.enqueueAndForget(()=>L3(i,d));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new te(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new te(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new j3(y_(a.path),h,{includeMetadataChanges:!0,Ka:!0});return V3(i,d)}(await u6(t),t.asyncQueue,e,n,r)),r.promise}function h6(t,e){const n=new ks;return t.asyncQueue.enqueueAndForget(async()=>Y3(await l6(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="ComponentProvider",Lw=new Map;function f6(t,e,n,r,s){return new RF(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,xC(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firestore.googleapis.com",Fw=!0;class Uw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RC,this.ssl=Fw}else this.host=e.host,this.ssl=e.ssl??Fw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L5)throw new te(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aF;switch(r.type){case"firstParty":return new hF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lw.get(n);r&&(Q(d6,"Removing Datastore"),Lw.delete(n),r.terminate())}(this),Promise.resolve()}}function p6(t,e,n,r={}){var c;t=Kl(t,V_);const s=ia(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(CS(`https://${a}`),AS("Firestore",!0)),i.host!==RC&&i.host!==a&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Ci(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=Mt.MOCK_USER;else{h=gM(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new te(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Mt(p)}t._authCredentials=new lF(new vI(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new L_(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Iu(n,wt._jsonSchema))return new wt(e,r||null,new ne($e.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:lt("string",wt._jsonSchemaVersion),referencePath:lt("string")};class tu extends L_{constructor(e,n,r){super(e,n,y_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ne(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function PC(t,e,...n){if(t=Cn(t),arguments.length===1&&(e=h_.newId()),_F("doc","path",e),t instanceof V_){const r=$e.fromString(e,...n);return Z0(r),new wt(t,null,new ne(r))}{if(!(t instanceof wt||t instanceof tu))throw new te(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return Z0(r),new wt(t.firestore,t instanceof tu?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="AsyncQueue";class Bw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hC(this,"async_queue_retry"),this._c=()=>{const r=qf();r&&Q(jw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ca(e))throw e;Q(jw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Mr("INTERNAL UNHANDLED ERROR: ",zw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=N_.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:zw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class F_ extends V_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Bw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}function m6(t,e){const n=typeof t=="object"?t:PS(),r=typeof t=="string"?t:jh,s=Zg(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=pM("firestore");i&&p6(s,...i)}return s}function NC(t){if(t._terminated)throw new te(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||g6(t),t._firestoreClient}function g6(t){var r,s,i,o;const e=t._freezeSettings(),n=f6(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new o6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Pt.fromBase64String(e))}catch(n){throw new te(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:lt("string",_n._jsonSchemaVersion),bytes:lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ir._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,ir._jsonSchema))return new ir(e.latitude,e.longitude)}}ir._jsonSchemaVersion="firestore/geoPoint/1.0",ir._jsonSchema={type:lt("string",ir._jsonSchemaVersion),latitude:lt("number"),longitude:lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jn(e.vectorValues);throw new te(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jn._jsonSchemaVersion="firestore/vectorValue/1.0",jn._jsonSchema={type:lt("string",jn._jsonSchemaVersion),vectorValues:lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=/^__.*__$/;class y6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}function OC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{dataSource:t})}}class U_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new U_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Yh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(OC(this.dataSource)&&_6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class v6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ld(e)}createContext(e,n,r,s=!1){return new U_({dataSource:e,methodName:n,targetDoc:r,path:kt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function w6(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new v6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T6(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);FC("Data must be an object, but it was:",o,r);const a=VC(r,o);let l,c;if(i.merge)l=new Mn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=j_(e,d,n);if(!o.contains(p))throw new te(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);I6(h,p)||h.push(p)}l=new Mn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new y6(new gn(a),l,c)}function MC(t,e){if(LC(t=Cn(t)))return FC("Unsupported field value:",e,t),VC(t,e);if(t instanceof DC)return function(r,s){if(!OC(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=MC(a,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t5(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Me.fromDate(r);return{timestampValue:Hh(s.serializer,i)}}if(r instanceof Me){const i=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(s.serializer,i)}}if(r instanceof ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _n)return{bytesValue:ZI(s.serializer,r._byteString)};if(r instanceof wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:E_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jn)return function(o,a){const l=o instanceof jn?o.toArray():o;return{mapValue:{fields:{[xI]:{stringValue:RI},[Bh]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return v_(a.serializer,h)})}}}}}}(r,s);if(oC(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${d_(r)}`)}(t,e)}function VC(t,e){const n={};return EI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(r,s)=>{const i=MC(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof ir||t instanceof _n||t instanceof wt||t instanceof DC||t instanceof jn||oC(t))}function FC(t,e,n){if(!LC(n)||!wI(n)){const r=d_(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function j_(t,e,n){if((e=Cn(e))instanceof bC)return e._internalPath;if(typeof e=="string")return S6(t,e);throw Yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const E6=new RegExp("[~\\*/\\[\\]]");function S6(t,e,n){if(e.search(E6)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bC(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new te(j.INVALID_ARGUMENT,a+t+l)}function I6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Bh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>tt(o.doubleValue));return new jn(n)}convertGeoPoint(e){return new ir(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);Se(iC(r),9688,{name:e});const s=new Xl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Mr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6 extends C6{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}const Ww="@firebase/firestore",qw="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(j_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k6 extends UC{data(){return super.data()}}function x6(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ga{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends UC{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:lt("string",pi._jsonSchemaVersion),bundleSource:lt("string","DocumentSnapshot"),bundleName:lt("string"),bundle:lt("string")};class Uc extends pi{data(e={}){return super.data(e)}}class hl{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ga(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uc(this._firestore,this._userDataWriter,r.key,r,new Ga(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Uc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Uc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:R6(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hl._jsonSchemaVersion="firestore/querySnapshot/1.0",hl._jsonSchema={type:lt("string",hl._jsonSchemaVersion),bundleSource:lt("string","QuerySnapshot"),bundleName:lt("string"),bundle:lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){t=Kl(t,wt);const e=Kl(t.firestore,F_),n=NC(e);return c6(n,t._key).then(r=>D6(e,t,r))}function N6(t,e,n){t=Kl(t,wt);const r=Kl(t.firestore,F_),s=x6(t.converter,e),i=w6(r);return b6(r,[T6(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ar.none())])}function b6(t,e){const n=NC(t);return h6(n,e)}function D6(t,e,n){const r=n.docs.get(e._key),s=new A6(t);return new pi(t,s,e._key,r,new Ga(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){oF(oa),zo(new Ai("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new F_(new uF(r.getProvider("auth-internal")),new dF(o,r.getProvider("app-check-internal")),PF(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Cs(Ww,qw,e),Cs(Ww,qw,"esm2020")})();const O6={apiKey:"AIzaSyDYGVS3agiO0z_2nyNGmgdzbNUP9fqt2wk",authDomain:"traumatch-f9171.firebaseapp.com",projectId:"traumatch-f9171",storageBucket:"traumatch-f9171.firebasestorage.app",messagingSenderId:"591979432657",appId:"1:591979432657:web:80693a12a52ee2408c0282",measurementId:"G-GMDD94XG97"},jC=RS(O6),jc=sF(jC),BC=m6(jC),M6=new _r,V6=()=>{const{setUser:t}=U.useContext(zi),e=au(),[n,r]=U.useState(!0),[s,i]=U.useState(!1),[o,a]=U.useState(""),[l,c]=U.useState(""),[h,d]=U.useState(""),[p,m]=U.useState(""),[_,T]=U.useState(""),I=async w=>{w.preventDefault(),T(""),i(!0);try{if(n)await qL(jc,o,l),e("/");else{const S=await WL(jc,o,l),b=PC(BC,"users",S.user.uid);await N6(b,{name:h,phone:p,email:o,createdAt:new Date().toISOString(),traumas:[],positive:[],interests:[],intent:""}),e("/assessment")}}catch(S){T(S.message.replace("Firebase: ",""))}finally{i(!1)}},v=async()=>{T("");try{await f4(jc,M6),e("/assessment")}catch(w){T(w.message)}};return O.jsx("div",{className:"page-container",style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},children:O.jsxs("div",{className:"animate-fade-in",style:{backgroundColor:"rgba(255,255,255,0.03)",padding:"2.5rem 2rem",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 40px rgba(0,0,0,0.4)"},children:[O.jsxs("div",{style:{textAlign:"center",marginBottom:"2.5rem"},children:[O.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:""}),O.jsx("h1",{style:{color:"var(--color-secondary)",fontSize:"2.2rem",fontWeight:"800"},children:"Traumatch"}),O.jsx("p",{style:{color:"var(--color-text-muted)",fontSize:"0.9rem"},children:n?"Welcome back to the sanctuary.":"Join the sanctuary of deep bonds."})]}),_&&O.jsx("div",{style:{backgroundColor:"rgba(255,68,68,0.1)",color:"#ff4444",padding:"1rem",borderRadius:"12px",marginBottom:"1.5rem",fontSize:"0.85rem",border:"1px solid rgba(255,68,68,0.2)"},children:_}),O.jsxs("form",{onSubmit:I,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[!n&&O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",placeholder:"Full Name",value:h,onChange:w=>d(w.target.value),required:!0}),O.jsx("input",{type:"tel",placeholder:"Phone Number",value:p,onChange:w=>m(w.target.value),required:!0})]}),O.jsx("input",{type:"email",placeholder:"Email Address",value:o,onChange:w=>a(w.target.value),required:!0}),O.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:w=>c(w.target.value),required:!0}),O.jsx("button",{type:"submit",disabled:s,className:"btn",children:s?"Connecting...":n?"Enter Sanctuary":"Create Soul Profile"})]}),O.jsxs("div",{style:{margin:"1.5rem 0",display:"flex",alignItems:"center",gap:"10px"},children:[O.jsx("div",{style:{flex:1,height:"1px",background:"rgba(255,255,255,0.1)"}}),O.jsx("span",{style:{fontSize:"0.8rem",color:"var(--color-text-muted)"},children:"OR"}),O.jsx("div",{style:{flex:1,height:"1px",background:"rgba(255,255,255,0.1)"}})]}),O.jsxs("button",{onClick:v,className:"btn btn-secondary",style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[O.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",style:{width:"18px"}}),"Continue with Google"]}),O.jsx("button",{onClick:()=>r(!n),style:{width:"100%",background:"none",border:"none",color:"var(--color-accent)",fontSize:"0.9rem",cursor:"pointer"},children:n?"New here? Create an account":"Already have an account? Login"})]})})},L6=()=>{const{user:t,setUser:e}=U.useContext(zi),n=au(),[r,s]=U.useState(0),[i,o]=U.useState({}),a=[{id:"q1",text:"How do you usually process a difficult day?",options:[{label:"I isolate and reflect in silence",trait:"Deep Thinker",type:"positive"},{label:"I seek comfort in music or art",trait:"Creative Soul",type:"positive"},{label:"I feel overwhelmed and anxious",trait:"Anxiety",type:"trauma"},{label:"I talk it out with someone I trust",trait:"Open Book",type:"positive"}]},{id:"q2",text:"What is your biggest fear in a relationship?",options:[{label:"Being misunderstood",trait:"Sensitive",type:"positive"},{label:"Being abandoned",trait:"Abandonment Issues",type:"trauma"},{label:"Losing my independence",trait:"Independent",type:"positive"},{label:"Not being 'enough'",trait:"Insecurity",type:"trauma"}]},{id:"q3",text:"Which of these sounds most like your 'Safe Space'?",options:[{label:"A rainy window with a book",trait:"Melancholic",type:"trauma"},{label:"A high-energy concert",trait:"Passionate",type:"positive"},{label:"A quiet forest path",trait:"Peaceful",type:"positive"},{label:"My bed, hiding from the world",trait:"Avoidant",type:"trauma"}]}],l=h=>{const d={...i,[r]:h};o(d),r<a.length-1?s(r+1):c(d)},c=h=>{const d=Object.values(h).filter(m=>m.type==="positive").map(m=>m.trait),p=Object.values(h).filter(m=>m.type==="trauma").map(m=>m.trait);e({...t,positive:[...new Set([...(t==null?void 0:t.positive)||[],...d])],traumas:[...new Set([...(t==null?void 0:t.traumas)||[],...p])]}),n("/")};return O.jsxs("div",{className:"page-container",style:{display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100%"},children:[O.jsxs("div",{className:"animate-fade-in",style:{backgroundColor:"rgba(255,255,255,0.03)",padding:"2rem",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)"},children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[O.jsx("h2",{style:{color:"var(--color-secondary)",fontSize:"1.2rem"},children:"Soul Discovery"}),O.jsxs("span",{style:{fontSize:"0.8rem",opacity:.5},children:["Step ",r+1," of ",a.length]})]}),O.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",lineHeight:1.3},children:a[r].text}),O.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a[r].options.map((h,d)=>O.jsx("button",{className:"btn btn-secondary",onClick:()=>l(h),style:{textAlign:"left",justifyContent:"flex-start",padding:"1.2rem",textTransform:"none",letterSpacing:"normal"},children:h.label},d))}),O.jsx("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:O.jsxs("button",{onClick:()=>n("/"),style:{display:"flex",alignItems:"center",gap:"5px",color:"var(--color-text-muted)",fontSize:"0.9rem"},children:[O.jsx(oP,{size:16})," Skip for now"]})})]}),O.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"rgba(100, 255, 218, 0.05)",borderRadius:"12px",border:"1px solid rgba(100, 255, 218, 0.1)",display:"flex",gap:"12px"},children:[O.jsx(iP,{size:40,color:"var(--color-accent)",style:{flexShrink:0}}),O.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)",lineHeight:1.4},children:[O.jsx("strong",{style:{color:"var(--color-accent)"},children:"Privacy Commitment:"})," All information you provide is protected on our secure servers. This data will ",O.jsx("strong",{style:{color:"white"},children:"never"})," be used for any purpose other than finding deep connections with others or personalizing your music and content feed based on your mood."]})]})]})},F6=()=>{const t=Zo(),e=n=>({color:t.pathname===n?"var(--color-secondary)":"var(--color-text-muted)",display:"flex",flexDirection:"column",alignItems:"center",fontSize:"0.8rem",textDecoration:"none",flex:1});return O.jsxs("div",{className:"app-shell",children:[O.jsx("div",{className:"page-container",children:O.jsx(DR,{})}),O.jsx("nav",{className:"main-nav",children:O.jsxs("div",{className:"nav-content",children:[O.jsxs(ic,{to:"/",style:e("/"),children:[O.jsx(JR,{size:24}),O.jsx("span",{children:"Home"})]}),O.jsxs(ic,{to:"/swipe",style:e("/swipe"),children:[O.jsx(d1,{size:24}),O.jsx("span",{children:"Match"})]}),O.jsxs(ic,{to:"/chat",style:e("/chat"),children:[O.jsx(tP,{size:24}),O.jsx("span",{children:"Chat"})]}),O.jsxs(ic,{to:"/profile",style:e("/profile"),children:[O.jsx(lP,{size:24}),O.jsx("span",{children:"Profile"})]})]})})]})},zi=Jh.createContext(null);function U6(){const[t,e]=U.useState(null),[n,r]=U.useState([]),[s,i]=U.useState(!0);return Jh.useEffect(()=>{const o=GL(jc,async a=>{if(a){const l=await P6(PC(BC,"users",a.uid));l.exists()?e({uid:a.uid,email:a.email,...l.data()}):e({uid:a.uid,email:a.email,name:a.displayName||"New Soul"})}else e(null);i(!1)});return()=>o()},[]),s?O.jsx("div",{className:"app-shell",style:{justifyContent:"center",alignItems:"center"},children:O.jsx("div",{className:"animate-pulse",style:{color:"var(--color-secondary)",fontSize:"1.2rem"},children:"Loading Traumatch..."})}):O.jsx(zi.Provider,{value:{user:t,setUser:e,matches:n,setMatches:r},children:O.jsx(zR,{children:O.jsx("div",{className:"app-shell",children:O.jsxs(MR,{children:[O.jsx(es,{path:"/auth",element:t?O.jsx(Nf,{to:"/"}):O.jsx(V6,{})}),O.jsx(es,{path:"/assessment",element:t?O.jsx(L6,{}):O.jsx(Nf,{to:"/auth"})}),O.jsxs(es,{path:"/",element:t?O.jsx(F6,{}):O.jsx(Nf,{to:"/auth"}),children:[O.jsx(es,{index:!0,element:O.jsx(cP,{})}),O.jsx(es,{path:"swipe",element:O.jsx(hP,{})}),O.jsx(es,{path:"chat",element:O.jsx(sM,{})}),O.jsx(es,{path:"profile",element:O.jsx(iM,{})})]})]})})})})}Hf.createRoot(document.getElementById("root")).render(O.jsx(Jh.StrictMode,{children:O.jsx(U6,{})}));
